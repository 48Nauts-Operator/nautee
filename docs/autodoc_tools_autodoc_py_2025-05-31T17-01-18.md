<!--
This documentation was auto-generated by Claude on 2025-05-31T17-01-18.
Source file: ./tools/autodoc.py
-->

# Python Code Documentation Generator

## Overview

This Python script automatically generates professional documentation for Python source files using Claude AI from Anthropic. It walks through Python files in a specified directory, sends the code to Claude for documentation generation, and outputs structured Markdown documentation suitable for GitHub Pages deployment.

## Features

- **Automated Documentation**: Generates comprehensive documentation for Python files using AI
- **GitHub Pages Ready**: Creates HTML index and `.nojekyll` file for GitHub Pages compatibility  
- **Recursive File Discovery**: Automatically finds all Python files in the target directory and subdirectories
- **Markdown Output**: Produces clean, professional Markdown documentation
- **Timestamped Files**: Adds timestamps to prevent filename conflicts
- **Error Handling**: Gracefully handles errors during processing

## Requirements

### Dependencies

```python
import os
import sys
import anthropic
from dotenv import load_dotenv
from datetime import datetime
```

### Environment Variables

The script requires the following environment variables to be set in a `.env` file:

- `ANTHROPIC_API_KEY`: Your Anthropic API key for Claude access
- `ANTHROPIC_MODEL` (optional): Claude model to use (defaults to "claude-sonnet-4-20250514")

## Usage

### Basic Usage

```bash
python script.py [target_directory]
```

### Parameters

- `target_directory` (optional): Directory to scan for Python files. Defaults to current directory (`.`) if not specified.

### Examples

```bash
# Document current directory
python script.py

# Document specific directory
python script.py /path/to/project

# Document relative path
python script.py ./src
```

## Output Structure

The script creates a `docs/` directory with the following structure:

```
docs/
├── .nojekyll                    # GitHub Pages configuration
├── index.html                   # Web-friendly index page
├── index.md                     # Markdown index
└── autodoc_[filename]_[timestamp].md  # Generated documentation files
```

## File Processing Logic

### File Discovery

- Recursively walks through the target directory
- Includes files with `.py` extension
- Excludes test files (`test_*.py`) and `__init__.py` files

### Documentation Generation

1. **Read Source Code**: Loads Python file content
2. **API Request**: Sends code to Claude with documentation prompt
3. **Process Response**: Extracts generated Markdown documentation
4. **Add Metadata**: Prepends timestamp and source file information
5. **Save Output**: Writes documentation to timestamped Markdown file

### Index Generation

- Creates `index.md` with links to all generated documentation
- Generates `index.html` for web viewing
- Updates with current timestamp

## Output File Naming

Documentation files follow this naming convention:
```
autodoc_{relative_path}_{timestamp}.md
```

Where:
- `relative_path`: Source file path with `/` and `.` replaced by `_`
- `timestamp`: Format `YYYY-MM-DDTHH-MM-SS`

## Error Handling

- **No Files Found**: Exits gracefully with warning message
- **File Processing Errors**: Continues processing remaining files, logs errors
- **Missing Environment**: Will fail if `ANTHROPIC_API_KEY` is not set

## Configuration

### Model Selection

The default Claude model can be overridden via environment variable:

```env
ANTHROPIC_MODEL=claude-3-opus-20240229
```

### API Limits

- **Max Tokens**: 1500 tokens per request
- **Rate Limiting**: Subject to Anthropic API rate limits

## GitHub Pages Integration

The script automatically configures output for GitHub Pages deployment:

- Creates `.nojekyll` file to bypass Jekyll processing
- Generates `index.html` with basic styling
- Uses relative links for cross-platform compatibility

## Best Practices

1. **API Key Security**: Store API key in `.env` file, never commit to version control
2. **Large Projects**: Be mindful of API costs when processing many files
3. **File Organization**: Use descriptive directory structures for better documentation organization
4. **Regular Updates**: Re-run after significant code changes to keep documentation current

## Limitations

- Processes only `.py` files
- Excludes test files and `__init__.py` by design
- Documentation quality depends on Claude's analysis
- Subject to Anthropic API rate limits and costs