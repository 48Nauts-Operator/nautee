<!--
This documentation was auto-generated by Claude on 2025-05-31T16-04-15.
Source file: ./tools/autodoc.py
-->

# Auto-Documentation Generator

This Python script automatically generates professional documentation for Python codebases using Anthropic's Claude AI. It recursively processes Python files in a target directory and creates comprehensive Markdown documentation.

## Overview

The script leverages Claude's natural language processing capabilities to analyze Python source code and generate clear, professional documentation in Markdown format. It's designed for automated documentation workflows and integrates seamlessly with GitHub Pages.

## Features

- **Recursive File Processing**: Automatically discovers and processes all Python files in a target directory
- **AI-Powered Documentation**: Uses Claude AI to generate professional, technical documentation
- **GitHub Pages Ready**: Creates `.nojekyll` file and HTML index for GitHub Pages deployment
- **Organized Output**: Generates timestamped documentation files with a centralized index
- **Error Handling**: Gracefully handles processing errors and continues with remaining files

## Requirements

### Dependencies

```python
import os
import sys
import anthropic
from dotenv import load_dotenv
from datetime import datetime
```

### Environment Variables

- `ANTHROPIC_API_KEY`: Your Anthropic API key (required)
- `ANTHROPIC_MODEL`: Claude model to use (optional, defaults to "claude-sonnet-4-20250514")

## Configuration

The script uses environment variables loaded from a `.env` file:

```bash
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
```

## Usage

### Command Line

```bash
python script.py [target_path]
```

**Parameters:**
- `target_path` (optional): Directory to scan for Python files. Defaults to current directory (`.`)

### Examples

```bash
# Document current directory
python script.py

# Document specific directory
python script.py /path/to/your/project

# Document relative path
python script.py ./src
```

## Output Structure

The script creates a `docs/` directory with the following structure:

```
docs/
├── .nojekyll                    # GitHub Pages configuration
├── index.html                   # HTML landing page
├── index.md                     # Markdown index of all documentation
└── autodoc_[file]_[timestamp].md # Generated documentation files
```

### File Naming Convention

Documentation files follow this pattern:
```
autodoc_{relative_path}_{timestamp}.md
```

Where:
- `{relative_path}`: Source file path with `/` and `.` replaced by `_`
- `{timestamp}`: Generation timestamp in `YYYY-MM-DDTHH-MM-SS` format

## Processing Logic

### File Discovery

1. **Recursive Scanning**: Uses `os.walk()` to traverse directory tree
2. **File Filtering**: Includes only `.py` files, excluding:
   - Test files (starting with `test_`)
   - `__init__.py` files
3. **Path Resolution**: Converts absolute paths to relative paths for clean output

### Documentation Generation

1. **Source Code Reading**: Reads Python file content
2. **AI Processing**: Sends code to Claude with professional documentation prompt
3. **Markdown Generation**: Receives structured Markdown documentation
4. **File Output**: Saves documentation with metadata header

### Index Creation

- **HTML Index**: Creates user-friendly landing page with styling
- **Markdown Index**: Generates linked list of all documented files
- **GitHub Pages Support**: Ensures compatibility with GitHub Pages rendering

## Error Handling

The script implements robust error handling:

- **File Access Errors**: Continues processing if individual files cannot be read
- **API Errors**: Logs Claude API errors and continues with remaining files
- **Missing Files**: Exits gracefully if no Python files are found
- **Directory Creation**: Safely creates output directory if it doesn't exist

## Technical Implementation Details

### AI Integration

```python
response = client.messages.create(
    model=model,
    max_tokens=1500,
    messages=[{"role": "user", "content": prompt}]
)
```

- **Token Limit**: Set to 1500 tokens for comprehensive documentation
- **Professional Prompt**: Instructs Claude to generate technical documentation
- **Error Recovery**: Handles API failures gracefully

### GitHub Pages Optimization

- **`.nojekyll` File**: Prevents Jekyll processing on GitHub Pages
- **HTML Landing Page**: Provides user-friendly entry point
- **Timestamp Tracking**: Shows last update time for freshness indication

## Best Practices

1. **API Key Security**: Store API keys in `.env` file, never commit to version control
2. **Rate Limiting**: Be mindful of API rate limits when processing large codebases
3. **Output Review**: Review generated documentation for accuracy and completeness
4. **Version Control**: Consider gitignoring the `docs/` directory if regenerating frequently

## Limitations

- **File Size**: Very large Python files may exceed Claude's context window
- **Token Limit**: Complex files may require higher token limits for complete documentation
- **API Dependency**: Requires active internet connection and valid Anthropic API access
- **Language Support**: Currently processes only Python files (`.py` extension)

## Integration Examples

### CI/CD Pipeline

```yaml
# GitHub Actions example
- name: Generate Documentation
  run: |
    pip install anthropic python-dotenv
    python autodoc.py ./src
    
- name: Deploy to GitHub Pages
  uses: peaceiris/actions-gh-pages@v3
  with:
    github_token: ${{ secrets.GITHUB_TOKEN }}
    publish_dir: ./docs
```

This documentation generator streamlines the process of maintaining up-to-date, professional documentation for Python projects while leveraging the power of AI for consistent, high-quality output.