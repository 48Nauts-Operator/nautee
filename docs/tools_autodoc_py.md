<!-- Auto-generated by Claude on 2025-06-02 07:21 -->

# Autodoc Generator Documentation

<!-- Auto-generated by Claude on 2024-12-19 XX:XX -->

## Overview

The `autodoc.py` script is an automated documentation generator that scans Python source files in a project and creates comprehensive Markdown documentation using Claude AI. It integrates seamlessly with MkDocs to build a complete documentation website.

## Purpose

This tool serves to:
- **Automate documentation generation** for Python codebases
- **Maintain up-to-date documentation** without manual intervention
- **Create structured documentation sites** using MkDocs
- **Leverage AI capabilities** to generate high-quality technical documentation

## Key Features

- 🔍 **Automatic Python file discovery** (excludes test files and `__init__.py`)
- 🤖 **AI-powered documentation generation** using Claude
- 📚 **MkDocs integration** with automatic configuration updates
- 🎨 **Material theme configuration** with dark/light mode support
- 📋 **Index generation** with comprehensive file listings

## Important Functions

### Core Processing Functions

#### `collect_python_files(base: str)`
```python
def collect_python_files(base: str):
    results = []
    for root, _, files in os.walk(base):
        for file in files:
            if file.endswith(".py") and not file.startswith("test_") and file != "__init__.py":
                results.append(os.path.join(root, file))
    return results
```
- Recursively scans directories for Python files
- Filters out test files and `__init__.py` files
- Returns list of file paths for documentation

#### `snake_md_path(rel_path: str)`
```python
def snake_md_path(rel_path: str) -> str:
    return rel_path.replace("/", "_").replace(".", "_") + ".md"
```
- Converts file paths to markdown filename format
- Replaces path separators and dots with underscores

### Configuration Management

#### `load_mkdocs_config(path: str)`
- Loads existing MkDocs configuration or creates default structure
- Handles YAML parsing safely
- Provides fallback configuration for new projects

#### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
- Generates comprehensive MkDocs configuration
- Includes Material theme with extensive feature set
- Configures markdown extensions and plugins
- Merges static navigation with auto-generated documentation

### Documentation Generation

#### `write_index_md(nav_items)`
- Creates main documentation index page
- Lists all auto-generated documentation files
- Includes timestamp for tracking updates

#### `append_missing_docs_to_index(nav_items)`
- Discovers additional markdown files in the docs directory
- Ensures no documentation files are missed in the index

## Configuration

### Environment Variables

- `ANTHROPIC_API_KEY`: Required API key for Claude integration
- `ANTHROPIC_MODEL`: Optional model specification (default: `claude-sonnet-4-20250514`)

### Command Line Usage

```bash
python autodoc.py [target_directory]
```

- `target_directory`: Optional path to scan (defaults to current directory)

## Generated Structure

```
docs/
├── index.md                 # Main documentation index
└── [filename]_py.md        # Generated documentation files

mkdocs.yml                  # Updated MkDocs configuration
```

## Workflow

1. **Environment Setup**: Loads environment variables and initializes Claude client
2. **File Discovery**: Scans for Python files in target directory
3. **Documentation Generation**: 
   - Reads each Python file
   - Sends content to Claude for analysis
   - Generates structured Markdown documentation
4. **Site Configuration**: Updates MkDocs configuration with new entries
5. **Index Creation**: Builds comprehensive documentation index

## Notes and Suggestions

### Best Practices
- **API Key Security**: Store `ANTHROPIC_API_KEY` in `.env` file, never commit to version control
- **Regular Execution**: Run as part of CI/CD pipeline for automatic updates
- **Review Generated Content**: While AI-generated, documentation should be reviewed for accuracy

### Limitations
- **API Dependencies**: Requires active Anthropic API access
- **Token Limits**: Large files may hit Claude's token limits (currently set to 1500 max tokens)
- **File Filtering**: Current logic excludes all test files - may need adjustment for specific projects

### Potential Improvements
- Add support for custom file filtering rules
- Implement incremental updates (only process changed files)
- Add configuration file for customizing documentation templates
- Include support for other documentation formats beyond Markdown

### Error Handling
The script includes basic error handling for file processing issues but continues execution when individual files fail, ensuring partial documentation generation is still possible.