<!-- Auto-generated by Claude on 2025-06-22 08:25 -->

# `autodoc.py` - Automated Documentation Generator

## Overview

This Python script is an **automated documentation generator** that scans a project for Python source files and generates comprehensive Markdown documentation using Claude AI from Anthropic. The script integrates with MkDocs to create a complete documentation website.

## Purpose

- **Automate documentation creation** for Python projects
- **Generate high-quality Markdown docs** using AI (Claude)
- **Maintain MkDocs configuration** automatically
- **Create organized documentation structure** with proper navigation

## Key Features

- üîç **Smart Python file discovery** (excludes tests and `__init__.py`)
- ü§ñ **AI-powered documentation generation** using Claude
- üìö **MkDocs integration** with Material theme
- üß≠ **Automatic navigation updates**
- üìù **Index page generation** with file listings

## Important Functions

### File Discovery Functions

#### `collect_python_files(base: str)`
```python
def collect_python_files(base: str):
    results = []
    for root, _, files in os.walk(base):
        for file in files:
            if file.endswith(".py") and not file.startswith("test_") and file != "__init__.py":
                results.append(os.path.join(root, file))
    return results
```
- **Purpose**: Recursively scans directory for Python files
- **Filters out**: Test files and `__init__.py` files
- **Returns**: List of Python file paths to document

### Configuration Management

#### `load_mkdocs_config(path: str)`
- Loads existing MkDocs YAML configuration
- Creates default config if none exists
- Preserves existing navigation structure

#### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
- Writes comprehensive MkDocs configuration
- Includes Material theme with dark/light mode toggle
- Configures advanced features like syntax highlighting, search, and navigation

### Documentation Generation

#### `snake_md_path(rel_path: str)`
```python
def snake_md_path(rel_path: str) -> str:
    return rel_path.replace("/", "_").replace(".", "_") + ".md"
```
- **Purpose**: Converts file paths to Markdown filenames
- **Example**: `src/utils/helper.py` ‚Üí `src_utils_helper_py.md`

#### `write_index_md(nav_items)`
- Creates main documentation index page
- Lists all generated documentation files
- Includes timestamp and project branding

## Configuration & Setup

### Environment Variables
- `ANTHROPIC_API_KEY`: Required API key for Claude
- `ANTHROPIC_MODEL`: AI model to use (default: `claude-sonnet-4-20250514`)

### Dependencies
```python
import anthropic
from dotenv import load_dotenv
import yaml
```

## Usage

### Command Line
```bash
# Document current directory
python autodoc.py

# Document specific path
python autodoc.py /path/to/project
```

### Output Structure
```
docs/
‚îú‚îÄ‚îÄ index.md                    # Main documentation index
‚îú‚îÄ‚îÄ module1_py.md              # Generated docs for module1.py
‚îú‚îÄ‚îÄ utils_helper_py.md         # Generated docs for utils/helper.py
‚îî‚îÄ‚îÄ ...
mkdocs.yml                     # Updated MkDocs configuration
```

## MkDocs Configuration Features

The script configures MkDocs with:

### Theme Features
- **Material Design** theme
- **Dark/Light mode** toggle
- **Advanced navigation** (instant loading, tabs, top navigation)
- **Code highlighting** with line numbers
- **Search functionality** with suggestions

### Markdown Extensions
- `admonition` - Info boxes and callouts
- `codehilite` - Syntax highlighting
- `pymdownx.superfences` - Enhanced code blocks
- `pymdownx.emoji` - Emoji support
- `toc` - Table of contents with permalinks

## Error Handling

- **Graceful failure**: Continues processing other files if one fails
- **Missing API key**: Will fail with clear error message
- **File access errors**: Logged and skipped
- **Empty projects**: Exits gracefully with warning

## Suggestions & Notes

### ‚ö†Ô∏è Important Considerations

1. **API Costs**: Each file generates an API call to Claude - monitor usage for large projects
2. **Rate Limits**: Consider adding delays between API calls for large codebases
3. **File Size**: Very large Python files may exceed token limits

### üîß Potential Improvements

1. **Batch Processing**: Group smaller files into single API calls
2. **Caching**: Skip regeneration if source file hasn't changed
3. **Configuration File**: Allow customization of documentation prompts
4. **Parallel Processing**: Use threading for faster generation

### üí° Best Practices

- Run regularly as part of CI/CD pipeline
- Review generated docs before publishing
- Customize the AI prompt for project-specific needs
- Keep API keys secure and use environment variables

## Output Example

The script generates output like:
```
üëÅ autodoc.py is executing from: /path/to/autodoc.py
üìÇ Found 5 Python files.

‚úÖ Documented: main.py ‚Üí main_py.md
‚úÖ Documented: utils/helper.py ‚Üí utils_helper_py.md
...
‚úÖ mkdocs.yml updated with latest AutoDocs.
‚úÖ index.md updated with all .md files.
```