<!-- Auto-generated by Claude on 2025-06-01 16:23 -->

# Claude Folder Reviewer Documentation

## Overview

The **Claude Folder Reviewer** is a Python script that automates code review processes by scanning directories for source files and leveraging Anthropic's Claude AI to provide comprehensive structural code insights. The tool aggregates multiple source files into a single analysis request and generates detailed feedback in Markdown format.

## Purpose

This script serves as an automated code review assistant that helps developers identify:

- **Code organization** issues and improvements
- **Bug patterns** and potential vulnerabilities  
- **Architecture weaknesses** in the codebase
- **Suggestions for modularization** and code clarity

## Key Features

- ✅ Recursive directory scanning for source files
- 📊 Real-time progress tracking with ETA calculations
- 🤖 AI-powered code analysis using Claude
- 📝 Markdown-formatted output reports
- ⚡ Batch processing for efficiency

## Installation & Setup

### Prerequisites

```bash
pip install anthropic python-dotenv
```

### Environment Configuration

Create a `.env` file in the project root:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Usage

### Basic Usage

```bash
python claude_folder_reviewer.py [folder_path]
```

### Examples

```bash
# Review current directory's parent folder
python claude_folder_reviewer.py ../my-project

# Review specific folder
python claude_folder_reviewer.py /path/to/codebase

# Use default folder (../137docs)
python claude_folder_reviewer.py
```

## Core Functions

### `render_progress(current, total, width=30)`

Generates a visual progress bar for file processing feedback.

**Parameters:**
- `current` (int): Current progress count
- `total` (int): Total items to process  
- `width` (int): Progress bar width in characters

**Returns:**
- `str`: Formatted progress bar with percentage

**Example Output:**
```
[████████████████████-----] 75%
```

### `estimate_valid_files(folder, valid_exts)`

Recursively discovers all source files with specified extensions in a directory tree.

**Parameters:**
- `folder` (str): Root directory path to scan
- `valid_exts` (tuple): Accepted file extensions

**Returns:**
- `list`: Complete file paths of discovered source files

**Supported Extensions:**
- `.py` (Python)
- `.js` (JavaScript)
- `.ts` (TypeScript)
- `.tsx` (TypeScript React)
- `.jsx` (JavaScript React)

### `main()`

The primary orchestration function that:

1. **Initializes** the Claude API client and configuration
2. **Scans** the target directory for source files
3. **Processes** files with progress tracking and ETA calculation
4. **Aggregates** all source code into a structured prompt
5. **Submits** the review request to Claude API
6. **Saves** the analysis results to timestamped output files

## Output

### File Location
```
output/folder_review_YYYY-MM-DDTHH-MM-SS.md
```

### Report Contents
- Comprehensive code organization analysis
- Identified bug patterns and security concerns
- Architecture recommendations
- Modularization suggestions
- Code clarity improvements

## Configuration Options

| Setting | Environment Variable | Default Value | Description |
|---------|---------------------|---------------|-------------|
| API Key | `ANTHROPIC_API_KEY` | *Required* | Claude API authentication |
| Model | `ANTHROPIC_MODEL` | `claude-sonnet-4-20250514` | Claude model version |
| Output Directory | *Hard-coded* | `./output/` | Review reports location |

## Error Handling

The script includes robust error handling for:

- **Missing API credentials** - Graceful failure with clear messaging
- **File read errors** - Individual file failures don't stop the process
- **API request failures** - Network and API errors are caught and reported
- **Empty directories** - Clear feedback when no valid files are found

## Performance Considerations

- **Token Limits**: Claude API has token limits (~2000 max tokens configured)
- **Rate Limiting**: Consider API rate limits for large codebases
- **Memory Usage**: Large codebases are loaded entirely into memory
- **Processing Time**: ETA calculations help manage expectations for large projects

## Suggestions for Improvement

### Recommended Enhancements

1. **Configuration File Support**: Add YAML/JSON config for custom extensions and settings
2. **Chunking Strategy**: Implement file batching for very large codebases
3. **Output Formats**: Support for JSON, HTML, or other output formats
4. **Filtering Options**: Add file size limits and ignore patterns (.gitignore support)
5. **Multi-model Support**: Allow switching between different Claude model versions
6. **Incremental Reviews**: Track changes and review only modified files

### Usage Tips

- **Large Codebases**: Consider reviewing subdirectories separately for better focus
- **API Costs**: Monitor token usage for cost management
- **Review Quality**: Smaller, focused reviews often provide more actionable insights
- **Integration**: Can be integrated into CI/CD pipelines for automated code quality checks

## Example Workflow

```bash
# 1. Set up environment
echo "ANTHROPIC_API_KEY=your_key_here" > .env

# 2. Run analysis
python claude_folder_reviewer.py ./my-project

# 3. Review generated report
cat output/folder_review_2024-01-15T14-30-22.md
```

This tool streamlines the code review process by providing AI-powered insights that complement human code review practices.