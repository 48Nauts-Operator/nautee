<!-- Auto-generated by Claude on 2025-06-01 12:38 -->

# Claude Folder Reviewer Documentation

## Overview

The **Claude Folder Reviewer** is a Python script that automates code review processes by scanning folders for source files and leveraging Anthropic's Claude AI to provide comprehensive structural code insights. The tool is designed to help developers identify code organization issues, potential bugs, architectural weaknesses, and opportunities for improvement across entire codebases.

## Purpose

This script serves as an automated code review assistant that:
- Scans directories recursively for source code files
- Batches multiple files into a single analysis request
- Uses Claude AI to generate detailed code review reports in Markdown format
- Provides insights on code structure, potential issues, and improvement suggestions

## Key Features

- **Multi-language support**: Supports Python, JavaScript, TypeScript, JSX, and TSX files
- **Progress tracking**: Real-time progress bar with ETA calculations
- **Batch processing**: Combines multiple files for comprehensive codebase analysis
- **Markdown output**: Generates structured review reports
- **Error handling**: Graceful handling of file read errors and API failures

## Dependencies

```python
import os
import sys
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import time
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
- `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to "claude-sonnet-4-20250514")

## Functions

### `render_progress(current: int, total: int, width: int = 30) -> str`

Creates a visual progress bar for tracking file processing.

**Parameters:**
- `current` (int): Current number of processed files
- `total` (int): Total number of files to process
- `width` (int): Character width of the progress bar (default: 30)

**Returns:**
- Formatted string with visual progress bar and percentage

**Example Output:**
```
[████████████████──────────────] 67%
```

### `estimate_valid_files(folder: str, valid_exts: tuple) -> list`

Recursively scans a directory for files with specified extensions.

**Parameters:**
- `folder` (str): Root directory path to search
- `valid_exts` (tuple): Tuple of acceptable file extensions

**Returns:**
- List of full file paths matching the criteria

**Supported Extensions:**
- `.py` (Python)
- `.js` (JavaScript)
- `.ts` (TypeScript)
- `.tsx` (TypeScript JSX)
- `.jsx` (JavaScript JSX)

### `main()`

Main execution function that orchestrates the entire review process:

1. **Setup Phase**:
   - Loads environment variables
   - Initializes Claude API client
   - Creates output directory
   - Processes command-line arguments

2. **File Discovery**:
   - Scans target folder for valid source files
   - Validates file count

3. **File Processing**:
   - Reads each file's content
   - Combines files into a single prompt
   - Tracks progress with ETA calculations

4. **AI Analysis**:
   - Sends combined codebase to Claude API
   - Requests structured review focusing on:
     - Code organization
     - Bug patterns
     - Architecture weaknesses
     - Modularization suggestions

5. **Output Generation**:
   - Saves review to timestamped Markdown file
   - Displays summary statistics

## Usage

### Basic Usage
```bash
python claude_folder_reviewer.py
```
*Uses default folder "../137docs"*

### Custom Folder
```bash
python claude_folder_reviewer.py /path/to/your/project
```

### Setup Requirements

1. **Install dependencies**:
   ```bash
   pip install anthropic python-dotenv
   ```

2. **Configure environment**:
   Create a `.env` file with:
   ```
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514
   ```

## Output

The script generates:
- **Progress updates** with file processing status and ETA
- **Timestamped Markdown file** in the `output/` directory
- **Summary report** showing total processing time and reviewed files

### Output File Format
```
output/folder_review_2024-01-15T14-30-25.md
```

## Error Handling

The script includes robust error handling for:
- **Missing API keys**: Script will fail gracefully if ANTHROPIC_API_KEY is not set
- **File read errors**: Individual file failures won't stop the entire process
- **API errors**: Claude API failures are caught and reported
- **Empty directories**: Script exits cleanly if no valid files are found

## Limitations and Considerations

### Token Limits
- Claude has token limits that may be exceeded with very large codebases
- Consider splitting large projects into smaller chunks

### API Costs
- Each run makes one API call to Claude
- Monitor your Anthropic usage to manage costs

### File Size Considerations
- Very large individual files may cause issues
- The script doesn't implement file size filtering

## Suggestions for Improvement

1. **Add file size filtering** to handle extremely large files
2. **Implement chunking strategy** for massive codebases
3. **Add configuration file support** for custom file extensions
4. **Include exclusion patterns** for build directories, node_modules, etc.
5. **Add output format options** (JSON, HTML, etc.)
6. **Implement caching** to avoid re-analyzing unchanged files

## Example Output Structure

The generated review will include sections such as:
- **Executive Summary**
- **Code Organization Analysis**
- **Potential Bug Patterns**
- **Architecture Recommendations**
- **Modularization Suggestions**
- **File-Specific Comments**

This tool is particularly useful for:
- **Code audits** before major releases
- **Onboarding new team members** to understand codebase structure
- **Identifying refactoring opportunities**
- **Maintaining code quality standards**