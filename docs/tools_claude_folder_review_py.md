<!-- Auto-generated by Claude on 2025-06-07 23:20 -->

# Claude Folder Reviewer Documentation

## Overview

The **Claude Folder Reviewer** is a Python script that automatically analyzes codebases by scanning directories for source files and leveraging Anthropic's Claude AI to provide comprehensive code reviews. The tool generates structured insights in Markdown format, focusing on code organization, potential bugs, architectural issues, and improvement suggestions.

## Purpose

This tool is designed to help developers:
- Get automated code reviews for entire project folders
- Identify structural weaknesses and bug patterns
- Receive suggestions for better code organization
- Improve overall code quality and maintainability

## Key Features

- **Recursive File Scanning**: Automatically discovers source files in nested directories
- **Progress Tracking**: Visual progress bar with ETA estimates
- **Multi-Language Support**: Supports Python, JavaScript, TypeScript, JSX, and TSX files
- **AI-Powered Analysis**: Uses Claude AI for intelligent code review
- **Markdown Output**: Generates well-formatted review reports

## Requirements

### Dependencies
```python
pip install anthropic python-dotenv
```

### Environment Variables
Create a `.env` file with:
```bash
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Functions

### `render_progress(current: int, total: int, width: int = 30) -> str`

Creates a visual progress bar for tracking file processing.

**Parameters:**
- `current`: Number of files processed
- `total`: Total number of files to process
- `width`: Character width of the progress bar (default: 30)

**Returns:** Formatted progress bar string with percentage

**Example Output:**
```
[████████████████████----------] 67%
```

### `estimate_valid_files(folder: str, valid_exts: tuple) -> list`

Recursively scans a directory for source files with specified extensions.

**Parameters:**
- `folder`: Root directory path to scan
- `valid_exts`: Tuple of valid file extensions

**Returns:** List of full file paths matching the criteria

### `main()`

The primary function that orchestrates the entire review process:

1. **Setup Phase**: Loads environment variables and initializes Claude client
2. **File Discovery**: Scans the target folder for valid source files
3. **Content Aggregation**: Reads and combines all source files into a single prompt
4. **AI Analysis**: Sends the combined content to Claude for review
5. **Output Generation**: Saves the review to a timestamped Markdown file

## Usage

### Basic Usage
```bash
python claude_folder_reviewer.py
```
*Uses default folder: `../137docs`*

### Custom Folder
```bash
python claude_folder_reviewer.py /path/to/your/project
```

## Supported File Types

The script currently processes files with these extensions:
- `.py` - Python files
- `.js` - JavaScript files
- `.ts` - TypeScript files
- `.tsx` - TypeScript JSX files
- `.jsx` - JavaScript JSX files

## Output

### Console Output
- File discovery summary
- Real-time progress with ETA
- Final summary with processing time
- List of reviewed files

### Generated Files
Reviews are saved in the `output/` directory with timestamped filenames:
```
output/folder_review_2024-03-15T14-30-45.md
```

## Error Handling

The script includes robust error handling for:
- Missing or invalid API keys
- File reading permissions
- Network connectivity issues
- Empty directories

## Limitations & Considerations

### Token Limits
- **Current limit**: 2000 tokens for Claude response
- **Impact**: Large codebases may receive truncated reviews
- **Suggestion**: Consider breaking very large projects into smaller chunks

### File Size Considerations
- Very large files may exceed Claude's input limits
- Consider implementing file size checks for production use

### Rate Limiting
- The script doesn't implement API rate limiting
- For frequent use, consider adding delays between requests

## Customization Suggestions

### Adding New File Types
```python
valid_exts = (".py", ".js", ".ts", ".tsx", ".jsx", ".go", ".java", ".cpp")
```

### Modifying Review Focus
Update the prompt in `main()` to emphasize different aspects:
```python
prompt = f"""Review this codebase focusing on:
- Security vulnerabilities
- Performance bottlenecks
- Code duplication
- Documentation quality
...
```

### Increasing Output Length
```python
response = client.messages.create(
    model=model,
    max_tokens=4000,  # Increased from 2000
    messages=[{"role": "user", "content": prompt}]
)
```

## Best Practices

1. **Environment Setup**: Always use `.env` files for API keys
2. **Small Batches**: For large codebases, consider reviewing modules separately
3. **Regular Reviews**: Integrate into CI/CD pipeline for continuous code quality monitoring
4. **Version Control**: Keep review outputs in version control to track improvements over time