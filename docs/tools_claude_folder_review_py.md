<!-- Auto-generated by Claude on 2025-06-08 05:20 -->

# Claude Folder Reviewer Documentation

## Overview

The **Claude Folder Reviewer** is a Python script that automatically analyzes entire codebases by scanning source files in a specified folder, combining them into a single prompt, and leveraging Anthropic's Claude AI to provide comprehensive code review insights in Markdown format.

## Purpose

This tool is designed to help developers quickly identify:
- **Code organization** issues
- **Bug patterns** and potential vulnerabilities  
- **Architecture weaknesses** in the codebase structure
- **Suggestions for modularization** and code clarity improvements

## Features

- 🔍 **Recursive file scanning** of project directories
- 📊 **Real-time progress tracking** with visual progress bars
- ⏱️ **ETA estimation** for processing completion
- 🤖 **AI-powered code analysis** using Claude
- 📝 **Markdown report generation** with timestamps
- 🛡️ **Error handling** for file reading and API calls

## Requirements

### Dependencies
```python
anthropic
python-dotenv
```

### Environment Variables
Create a `.env` file with:
```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional: defaults to this model
```

## Supported File Types

The script currently processes the following source file extensions:
- `.py` (Python)
- `.js` (JavaScript)  
- `.ts` (TypeScript)
- `.tsx` (TypeScript React)
- `.jsx` (JavaScript React)

## Usage

### Basic Usage
```bash
python claude_folder_reviewer.py
```
*Defaults to scanning `../137docs` directory*

### Custom Directory
```bash
python claude_folder_reviewer.py /path/to/your/project
```

## Key Functions

### `render_progress(current, total, width=30)`
Creates a visual progress bar for tracking file processing.

**Parameters:**
- `current` (int): Current progress count
- `total` (int): Total items to process  
- `width` (int): Progress bar width in characters

**Returns:** Formatted progress bar string with percentage

**Example Output:**
```
[████████████████████------] 67%
```

### `estimate_valid_files(folder, valid_exts)`
Recursively discovers all processable source files in the target directory.

**Parameters:**
- `folder` (str): Root directory path to scan
- `valid_exts` (tuple): Accepted file extensions

**Returns:** List of absolute file paths

### `main()`
Core orchestration function that:
1. **Initializes** the Claude client and environment
2. **Scans** the target folder for valid source files
3. **Processes** files with progress tracking and ETA calculation
4. **Combines** all source code into a structured prompt
5. **Sends** the prompt to Claude for analysis
6. **Saves** the AI-generated review to a timestamped Markdown file

## Output

### Console Output
```
🔍 Found 15 source files in: /path/to/project

[████████████████████------] 67% ⏱ ETA: 02:15 | ✅ src/main.py
[██████████████████████████] 100% ⏱ ETA: 00:00 | ✅ src/utils.py

✅ Folder review saved to `output/folder_review_2024-01-15T14-30-22.md` in 03:45

📁 Files Reviewed:
  - src/main.py
  - src/utils.py
  - tests/test_main.py
```

### Generated Files
- **Location:** `output/folder_review_YYYY-MM-DDTHH-MM-SS.md`
- **Format:** Markdown document with structured code review insights
- **Content:** AI-generated analysis focusing on architecture, bugs, and improvement suggestions

## Configuration Notes

### Model Selection
The script uses Claude Sonnet 4 by default. You can override this by setting the `ANTHROPIC_MODEL` environment variable:

```env
ANTHROPIC_MODEL=claude-3-opus-20240229
```

### Token Limits
- **Max tokens:** 2000 (configured in the API call)
- **Large codebases** may require prompt truncation or batching

## Error Handling

The script includes robust error handling for:
- **Missing API keys** (will fail gracefully)
- **File read errors** (skips problematic files and continues)
- **API failures** (displays clear error messages)
- **Empty directories** (exits with informative message)

## Limitations & Suggestions

### Current Limitations
- **Token limit** may truncate analysis for very large codebases
- **File type support** is limited to web development languages
- **No incremental analysis** - processes entire codebase each time

### Suggested Improvements
- Add support for more file types (`.go`, `.rs`, `.java`, etc.)
- Implement **chunking strategy** for large codebases
- Add **configuration file** support for custom settings
- Include **diff-based analysis** for changed files only
- Add **multiple output formats** (JSON, HTML, etc.)

## Example Workflow

1. **Set up environment:**
   ```bash
   pip install anthropic python-dotenv
   echo "ANTHROPIC_API_KEY=your_key" > .env
   ```

2. **Run analysis:**
   ```bash
   python claude_folder_reviewer.py ./my-project
   ```

3. **Review output:**
   ```bash
   cat output/folder_review_2024-01-15T14-30-22.md
   ```

This tool is particularly useful for **code audits**, **onboarding new team members**, and **identifying technical debt** in existing projects.