<!-- Auto-generated by Claude on 2025-06-22 17:18 -->

# Claude Folder Reviewer

A Python script that automatically analyzes source code folders using Anthropic's Claude AI to provide structural insights and code review feedback.

## Purpose

This tool scans a specified folder for source files, combines them into a single prompt, and leverages Claude AI to generate comprehensive code review insights in Markdown format. It's designed to help developers identify:

- Code organization issues
- Potential bug patterns
- Architecture weaknesses
- Opportunities for better modularization and code clarity

## Features

- **Recursive folder scanning** for multiple file types
- **Real-time progress tracking** with ETA estimates
- **Batch processing** of multiple source files
- **Automated output generation** with timestamped results
- **Error handling** for file reading issues

## Requirements

- Python 3.6+
- `anthropic` library
- `python-dotenv` library
- Anthropic API key

## Environment Setup

Create a `.env` file in your project directory:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

## Usage

```bash
python claude_folder_reviewer.py [folder_path]
```

If no folder path is provided, it defaults to `../137docs`.

## Key Functions

### `render_progress(current, total, width=30)`

Generates a visual progress bar for tracking file processing.

**Parameters:**
- `current` (int): Current progress count
- `total` (int): Total items to process  
- `width` (int): Progress bar width in characters

**Returns:**
- `str`: Formatted progress bar with percentage

```python
# Example output: [████████████████████----------] 67%
```

### `estimate_valid_files(folder, valid_exts)`

Recursively discovers all source files with specified extensions in a directory tree.

**Parameters:**
- `folder` (str): Root directory to search
- `valid_exts` (tuple): Acceptable file extensions

**Returns:**
- `list`: Full file paths of valid source files

### `main()`

The primary function that orchestrates the entire review process:

1. **Environment Setup**: Loads API credentials and configuration
2. **File Discovery**: Scans for valid source files
3. **Progress Tracking**: Displays real-time processing status
4. **Content Aggregation**: Combines all files into a single prompt
5. **AI Analysis**: Sends combined content to Claude for review
6. **Output Generation**: Saves results to timestamped Markdown file

## Supported File Types

The script currently processes files with these extensions:
- `.py` (Python)
- `.js` (JavaScript)
- `.ts` (TypeScript)
- `.tsx` (TypeScript React)
- `.jsx` (JavaScript React)

## Output

Results are saved to the `output/` directory with the naming convention:
```
folder_review_YYYY-MM-DDTHH-MM-SS.md
```

## Error Handling

- **Missing API Key**: The script will fail if `ANTHROPIC_API_KEY` is not set
- **Invalid Folder**: Exits gracefully if no valid files are found
- **File Read Errors**: Continues processing other files and logs errors
- **API Errors**: Catches and displays Claude API exceptions

## Performance Features

- **ETA Calculation**: Provides estimated completion time based on processing speed
- **Real-time Updates**: Shows current file being processed
- **Batch Processing**: Efficiently handles multiple files in a single API call

## Suggestions for Improvement

- **File Size Limits**: Consider adding checks for very large files that might exceed API limits
- **Configuration File**: Move file extensions and other settings to a config file
- **Output Formats**: Add support for other output formats (JSON, HTML)
- **Filtering Options**: Add ability to exclude certain directories or file patterns
- **Incremental Processing**: Support for processing only changed files

## Notes

- The script uses Claude's token limits (currently set to 2000 max tokens)
- Large codebases may hit API rate limits or token restrictions
- Processing time depends on the number of files and Claude API response time
- The default model can be overridden via the `ANTHROPIC_MODEL` environment variable