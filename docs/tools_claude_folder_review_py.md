<!-- Auto-generated by Claude on 2025-06-23 01:50 -->

# Claude Folder Reviewer

## Overview

The **Claude Folder Reviewer** is a Python script that automatically analyzes entire codebases by scanning source files in a directory and leveraging Anthropic's Claude AI to provide comprehensive code reviews. The tool generates structured insights in Markdown format, focusing on code organization, potential bugs, architectural issues, and improvement suggestions.

## Purpose

This tool is designed for:
- **Code Quality Assessment**: Automated analysis of code structure and patterns
- **Architecture Review**: Identifying weaknesses in system design
- **Bug Detection**: Spotting potential issues and anti-patterns
- **Refactoring Guidance**: Suggestions for better modularization and clarity
- **Documentation Generation**: Creating comprehensive review reports in Markdown

## Key Features

- âœ… Recursive directory scanning for source files
- ðŸ“Š Real-time progress tracking with ETA estimates
- ðŸ¤– AI-powered code analysis using Claude
- ðŸ“„ Markdown-formatted output reports
- âš¡ Batch processing of multiple file types
- ðŸ”§ Configurable file extension filtering

## Installation & Setup

### Prerequisites

```bash
pip install anthropic python-dotenv
```

### Environment Configuration

Create a `.env` file in the project root:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

## Usage

### Basic Usage

```bash
python claude_folder_reviewer.py [folder_path]
```

### Examples

```bash
# Review current directory
python claude_folder_reviewer.py .

# Review specific folder
python claude_folder_reviewer.py /path/to/my/project

# Review with default folder (../137docs)
python claude_folder_reviewer.py
```

## Core Functions

### `render_progress(current: int, total: int, width: int = 30) -> str`

Generates a visual progress bar for tracking file processing.

**Parameters:**
- `current`: Number of files processed
- `total`: Total files to process  
- `width`: Progress bar width in characters (default: 30)

**Returns:** Formatted progress bar string with percentage

**Example Output:**
```
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€] 60%
```

### `estimate_valid_files(folder: str, valid_exts: tuple) -> list`

Recursively discovers all source files with specified extensions in a directory tree.

**Parameters:**
- `folder`: Root directory to scan
- `valid_exts`: Tuple of acceptable file extensions

**Returns:** List of absolute file paths

**Supported Extensions:**
- `.py` (Python)
- `.js` (JavaScript)
- `.ts` (TypeScript)
- `.tsx` (TypeScript React)
- `.jsx` (JavaScript React)

### `main()`

Primary execution function that orchestrates the entire review process:

1. **Environment Setup**: Loads API credentials and configuration
2. **File Discovery**: Scans target directory for source files
3. **Content Aggregation**: Combines all files into a single prompt
4. **AI Analysis**: Sends combined content to Claude for review
5. **Report Generation**: Saves results to timestamped Markdown file

## Output Format

The script generates reports in the `output/` directory with the following naming convention:

```
output/folder_review_YYYY-MM-DDTHH-MM-SS.md
```

### Sample Output Structure

```markdown
# Code Review Report

## Code Organization
- Analysis of project structure
- Module separation assessment

## Bug Patterns
- Identified potential issues
- Common anti-patterns found

## Architecture Weaknesses
- Design pattern concerns
- Scalability considerations

## Suggestions
- Refactoring recommendations
- Best practice improvements
```

## Configuration Options

### Supported File Types

The script currently processes these file extensions:
```python
valid_exts = (".py", ".js", ".ts", ".tsx", ".jsx")
```

### Model Configuration

Default model can be overridden via environment variable:
```env
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

## Error Handling

The script includes robust error handling for:
- **Missing API Keys**: Graceful failure with clear error messages
- **File Access Issues**: Continues processing other files if individual files fail
- **API Failures**: Reports Claude API errors without crashing
- **Empty Directories**: Exits cleanly when no valid files are found

## Performance Considerations

- **Token Limits**: Current max_tokens set to 2000 (adjust based on needs)
- **File Size**: Large codebases may exceed Claude's context window
- **Rate Limiting**: Single API call per execution (no rate limiting implemented)

## Limitations & Suggestions

### Current Limitations

1. **Context Window**: Very large codebases may exceed Claude's token limits
2. **Single Language**: Prompt assumes Python syntax highlighting for all files
3. **No Filtering**: Processes all files regardless of size or relevance

### Suggested Improvements

1. **Implement file size filtering** to exclude overly large files
2. **Add language detection** for proper syntax highlighting
3. **Include configuration file** for customizable extensions and settings
4. **Add chunking support** for large codebases
5. **Implement caching** to avoid re-processing unchanged files

### Example Enhancement

```python
# Suggested addition for file size filtering
MAX_FILE_SIZE = 50 * 1024  # 50KB limit

def should_process_file(file_path: str) -> bool:
    return os.path.getsize(file_path) <= MAX_FILE_SIZE
```

## License & Usage Notes

âš ï¸ **API Costs**: This tool makes API calls to Anthropic Claude, which may incur charges based on your usage plan.

ðŸ“ **Best Practices**: 
- Test with small projects first
- Monitor API usage and costs
- Review output quality and adjust prompts as needed