<!-- Auto-generated by Claude on 2025-06-22 23:19 -->

# Claude Folder Reviewer

## Overview

This Python script automates code review processes by scanning a folder for source files and using Anthropic's Claude AI to generate comprehensive structural code insights. The tool combines all source files into a single prompt and returns detailed analysis in Markdown format.

## Purpose

The Claude Folder Reviewer is designed to help developers:
- Analyze code organization across entire project folders
- Identify bug patterns and potential issues
- Discover architecture weaknesses
- Receive suggestions for better modularization and code clarity

## Features

- **Multi-language support**: Supports Python, JavaScript, TypeScript, JSX, and TSX files
- **Progress tracking**: Real-time progress bar with ETA calculations
- **Batch processing**: Combines all files into a single AI review request
- **Markdown output**: Generates structured review reports
- **Error handling**: Graceful handling of file read errors and API issues

## Dependencies

```python
import os
import sys
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import time
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

## Configuration

### Environment Variables

Create a `.env` file with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

## Functions

### `render_progress(current: int, total: int, width: int = 30) -> str`

Creates a visual progress bar for terminal output.

**Parameters:**
- `current`: Current number of processed items
- `total`: Total items to process  
- `width`: Character width of the progress bar (default: 30)

**Returns:** Formatted progress bar string with percentage

**Example output:** `[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà----------] 67%`

### `estimate_valid_files(folder: str, valid_exts: tuple) -> list`

Recursively scans a directory tree to find all source files with valid extensions.

**Parameters:**
- `folder`: Root directory path to search
- `valid_exts`: Tuple of acceptable file extensions

**Returns:** List of full file paths matching the criteria

**Supported Extensions:**
- `.py` (Python)
- `.js` (JavaScript)
- `.ts` (TypeScript)
- `.tsx` (TypeScript JSX)
- `.jsx` (JavaScript JSX)

### `main()`

The primary function that orchestrates the entire review process:

1. **Setup Phase:**
   - Loads environment variables
   - Initializes Claude API client
   - Determines target folder (from command line or default)
   - Creates output directory

2. **File Discovery:**
   - Scans for valid source files
   - Displays file count and validates input

3. **File Processing:**
   - Reads each file with progress tracking
   - Combines all code into a single prompt
   - Calculates and displays ETA

4. **AI Review:**
   - Sends combined code to Claude API
   - Processes the response

5. **Output Generation:**
   - Saves review to timestamped Markdown file
   - Displays summary statistics

## Usage

### Basic Usage
```bash
python claude_folder_reviewer.py
```
*Reviews the default folder: `../137docs`*

### Custom Folder
```bash
python claude_folder_reviewer.py /path/to/your/project
```

## Output

The script generates:
- **Console output**: Progress tracking, file listing, and summary statistics
- **Markdown file**: Comprehensive code review saved to `output/folder_review_YYYY-MM-DDTHH-MM-SS.md`

### Sample Console Output
```
üîç Found 15 source files in: ../my-project

[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100% ‚è± ETA: 00:00 | ‚úÖ src/main.py

‚úÖ Folder review saved to `output/folder_review_2024-01-15T14-30-45.md` in 02:30

üìÅ Files Reviewed:
  - src/main.py
  - src/utils.py
  - tests/test_main.py
```

## Notes and Suggestions

### Performance Considerations
- **Large codebases**: The script combines all files into a single API request, which may hit token limits for very large projects
- **API costs**: Each run makes one API call to Claude, consider costs for frequent usage

### Best Practices
- **Environment security**: Keep your `ANTHROPIC_API_KEY` secure and never commit it to version control
- **Selective review**: For large projects, consider reviewing specific subdirectories rather than entire repositories

### Potential Improvements
- Add file size limits to prevent token overflow
- Implement chunking for very large codebases  
- Add support for additional file types
- Include configuration file support for custom extensions
- Add filtering options (e.g., exclude test files, node_modules)

### Error Handling
The script includes robust error handling for:
- Missing or invalid API keys
- File read permissions
- Network connectivity issues
- Claude API rate limits and errors