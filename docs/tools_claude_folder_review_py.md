<!-- Auto-generated by Claude on 2025-06-07 22:18 -->

# Claude Folder Reviewer Documentation

## Overview

The **Claude Folder Reviewer** is a Python script that automates code review processes by scanning source code folders and leveraging Anthropic's Claude AI to generate comprehensive structural insights. The tool batches all source files into a single analysis request and returns detailed feedback in Markdown format.

## Purpose

This script is designed to help developers and teams:
- Analyze entire codebases for structural issues
- Identify common bug patterns and architecture weaknesses
- Get AI-powered suggestions for code organization improvements
- Generate comprehensive code review reports automatically

## Key Features

- **Multi-language Support**: Supports Python, JavaScript, TypeScript, and JSX/TSX files
- **Progress Tracking**: Real-time progress bar with ETA calculations
- **Batch Processing**: Combines all files into a single AI analysis request
- **Markdown Output**: Generates well-formatted review reports
- **Error Handling**: Graceful handling of file reading errors

## Installation & Setup

### Prerequisites

```bash
pip install anthropic python-dotenv
```

### Environment Variables

Create a `.env` file in the project root:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Usage

### Basic Usage

```bash
python claude_folder_reviewer.py
```
*Defaults to scanning the `../137docs` folder*

### Custom Folder

```bash
python claude_folder_reviewer.py /path/to/your/project
```

## Functions Reference

### `render_progress(current: int, total: int, width: int = 30) -> str`

Creates a visual progress bar for tracking file processing.

**Parameters:**
- `current`: Number of files processed so far
- `total`: Total number of files to process
- `width`: Character width of the progress bar (default: 30)

**Returns:** Formatted progress bar string with percentage

**Example Output:**
```
[████████████████████████------] 80%
```

### `estimate_valid_files(folder: str, valid_exts: tuple) -> list`

Recursively scans a directory tree to find all source files with valid extensions.

**Parameters:**
- `folder`: Root directory path to scan
- `valid_exts`: Tuple of accepted file extensions

**Returns:** List of absolute file paths

**Supported Extensions:**
- `.py` (Python)
- `.js` (JavaScript)
- `.ts` (TypeScript)
- `.tsx` (TypeScript React)
- `.jsx` (JavaScript React)

### `main()`

The primary execution function that orchestrates the entire review process:

1. **Setup Phase**: Loads environment variables and initializes Claude client
2. **Discovery Phase**: Scans folder for valid source files
3. **Processing Phase**: Reads and combines all source files with progress tracking
4. **Analysis Phase**: Sends combined content to Claude for review
5. **Output Phase**: Saves the review to a timestamped Markdown file

## Output

### File Location
Reviews are saved to: `output/folder_review_YYYY-MM-DDTHH-MM-SS.md`

### Review Content
The AI-generated review focuses on:
- **Code Organization**: Structure and file organization patterns
- **Bug Patterns**: Common coding mistakes and potential issues
- **Architecture Weaknesses**: Design flaws and improvement opportunities
- **Modularization Suggestions**: Recommendations for better code separation

## Configuration

### Supported File Types
Currently configured to analyze:
```python
valid_exts = (".py", ".js", ".ts", ".tsx", ".jsx")
```

### AI Model Configuration
Default model: `claude-sonnet-4-20250514`
- Can be overridden via `ANTHROPIC_MODEL` environment variable
- Token limit: 2000 tokens for responses

## Error Handling

- **Missing API Key**: Script will fail if `ANTHROPIC_API_KEY` is not set
- **No Valid Files**: Exits gracefully with error message if no source files found
- **File Read Errors**: Continues processing other files, logs errors for individual files
- **API Errors**: Catches and displays Claude API errors

## Performance Considerations

### Limitations
- **Token Limits**: Large codebases may exceed Claude's context window
- **API Costs**: Each review consumes API tokens based on codebase size
- **Processing Time**: Larger projects take longer to read and analyze

### Recommendations
- Use on focused code modules rather than entire large applications
- Consider breaking very large codebases into smaller chunks
- Monitor API usage for cost management

## Example Output Structure

```markdown
# Code Review for Project XYZ

## Architecture Overview
[AI analysis of overall structure]

## Identified Issues
- Issue 1: Description and location
- Issue 2: Description and location

## Recommendations
1. Suggestion for improvement
2. Refactoring recommendations

## Files Analyzed
- src/main.py
- src/utils.js
- components/Header.tsx
```

## Troubleshooting

| Issue | Solution |
|-------|----------|
| "No valid files found" | Check folder path and ensure it contains supported file types |
| API authentication error | Verify `ANTHROPIC_API_KEY` in `.env` file |
| Permission errors | Ensure read access to source folder and write access to `output/` directory |
| Large codebase timeouts | Consider reviewing smaller subsections of the project |