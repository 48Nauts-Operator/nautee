<!-- Auto-generated by Claude on 2025-05-31 21:34 -->

# Claude Folder Reviewer Documentation

## Overview

The **Claude Folder Reviewer** is a Python script that automatically analyzes source code folders and generates comprehensive code review reports using Anthropic's Claude AI. It scans directories for source files, combines them into a single prompt, and produces structured insights in Markdown format.

## Purpose

This tool helps developers and teams by:
- **Automated Code Analysis**: Quickly reviews entire codebases without manual inspection
- **Structural Insights**: Identifies code organization patterns and architectural issues
- **Bug Detection**: Highlights potential bug patterns and code smells
- **Improvement Suggestions**: Provides recommendations for better modularization and code clarity

## Key Features

- 📁 **Recursive folder scanning** for multiple file types
- 📊 **Real-time progress tracking** with ETA estimates
- 🤖 **AI-powered code analysis** using Claude
- 📝 **Markdown-formatted reports** with timestamps
- ⚡ **Batch processing** for efficient API usage

## Functions

### `render_progress(current: int, total: int, width: int = 30) -> str`

Creates a visual progress bar for tracking file processing.

**Parameters:**
- `current`: Number of files processed
- `total`: Total files to process
- `width`: Progress bar width (default: 30 characters)

**Returns:** Formatted progress bar string with percentage

```python
# Example output: [████████████████------] 75%
```

### `estimate_valid_files(folder: str, valid_exts: tuple) -> list`

Recursively discovers all source files with valid extensions in a directory.

**Parameters:**
- `folder`: Root directory path to scan
- `valid_exts`: Tuple of acceptable file extensions

**Returns:** List of full file paths matching the criteria

### `main()`

The primary function that orchestrates the entire review process:

1. **Environment Setup**: Loads API credentials and configuration
2. **File Discovery**: Scans target folder for source files
3. **Content Aggregation**: Reads and combines all source files
4. **AI Analysis**: Sends combined content to Claude for review
5. **Report Generation**: Saves the analysis to a timestamped Markdown file

## Configuration

### Environment Variables

Create a `.env` file with the following variables:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

### Supported File Types

The script currently processes these file extensions:
- `.py` (Python)
- `.js` (JavaScript)
- `.ts` (TypeScript)
- `.tsx` (TypeScript React)
- `.jsx` (JavaScript React)

## Usage

### Command Line

```bash
# Review default folder (../137docs)
python claude_folder_reviewer.py

# Review specific folder
python claude_folder_reviewer.py /path/to/your/project
```

### Output

Reports are saved to the `output/` directory with timestamp naming:
```
output/folder_review_2024-01-15T14-30-25.md
```

## Error Handling

The script includes robust error handling for:
- **Missing API keys**: Graceful failure with clear error messages
- **File read errors**: Continues processing other files if one fails
- **API errors**: Catches and reports Claude API issues
- **Empty folders**: Exits cleanly if no valid files are found

## Performance Notes

- **Progress Tracking**: Real-time ETA calculation based on average processing time
- **Memory Efficiency**: Processes files sequentially to avoid memory issues
- **API Optimization**: Batches all files into a single API call to minimize costs

## Suggestions for Improvement

### 🔧 Potential Enhancements

1. **File Size Limits**: Add checks for extremely large files that might exceed API limits
2. **Filtering Options**: Allow exclusion of specific directories (e.g., `node_modules`, `.git`)
3. **Output Formats**: Support additional output formats (JSON, HTML)
4. **Incremental Reviews**: Only review changed files since last run
5. **Custom Prompts**: Allow users to specify custom review criteria

### 📋 Configuration Recommendations

```python
# Consider adding these configurations
MAX_FILE_SIZE = 100000  # Skip files larger than 100KB
EXCLUDED_DIRS = {'node_modules', '.git', '__pycache__', 'venv'}
MAX_TOKENS = 4000  # Adjust based on your Claude plan
```

### 🚨 Important Notes

- **API Costs**: Be mindful of token usage with large codebases
- **Rate Limits**: Consider adding rate limiting for high-volume usage
- **Security**: Never commit `.env` files with API keys to version control
- **File Encoding**: Assumes UTF-8 encoding for all source files