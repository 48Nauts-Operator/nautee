<!-- Auto-generated by Claude on 2025-05-31 22:59 -->

# Claude Folder Reviewer Documentation

## Overview

The **Claude Folder Reviewer** is a Python script that automatically analyzes source code folders using Anthropic's Claude AI. It recursively scans a directory for source files, combines them into a single prompt, and generates comprehensive code review insights in Markdown format.

## Purpose

This tool is designed to provide high-level code analysis focusing on:
- **Code organization** - How well the codebase is structured
- **Bug patterns** - Common issues that could lead to bugs
- **Architecture weaknesses** - Structural problems in the design
- **Modularization suggestions** - Recommendations for better code organization

## Requirements

- Python 3.x
- Required packages:
  - `anthropic` - Claude AI API client
  - `python-dotenv` - Environment variable management
- Environment variables:
  - `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
  - `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

## Usage

```bash
python claude_folder_reviewer.py [folder_path]
```

- If no folder path is provided, it defaults to `../137docs`
- The script will create an `output/` directory and save the review as a timestamped Markdown file

## Key Functions

### `render_progress(current: int, total: int, width: int = 30) -> str`

Creates a visual progress bar for tracking file processing.

**Parameters:**
- `current` - Number of files processed so far
- `total` - Total number of files to process  
- `width` - Character width of the progress bar (default: 30)

**Returns:** Formatted progress bar string with percentage

```python
# Example output: [████████████----------] 67%
```

### `estimate_valid_files(folder: str, valid_exts: tuple) -> list`

Recursively searches a directory for source files with valid extensions.

**Parameters:**
- `folder` - Root directory path to scan
- `valid_exts` - Tuple of acceptable file extensions

**Returns:** List of full file paths matching the criteria

**Supported file types:**
- `.py` - Python
- `.js` - JavaScript  
- `.ts` - TypeScript
- `.tsx` - TypeScript JSX
- `.jsx` - JavaScript JSX

### `main()`

The primary execution function that orchestrates the entire review process:

1. **Setup Phase:**
   - Loads environment variables
   - Initializes Claude API client
   - Processes command line arguments

2. **File Discovery:**
   - Scans target folder for valid source files
   - Displays file count and exits if none found

3. **File Processing:**
   - Reads each file and combines into a single prompt
   - Shows real-time progress with ETA estimates
   - Handles file reading errors gracefully

4. **AI Analysis:**
   - Sends combined codebase to Claude API
   - Processes the AI-generated review

5. **Output Generation:**
   - Saves review to timestamped Markdown file
   - Displays summary of processed files

## Output

The script generates a Markdown file in the `output/` directory with the naming pattern:
```
folder_review_YYYY-MM-DDTHH-MM-SS.md
```

## Error Handling

- **Missing API Key:** Script will fail if `ANTHROPIC_API_KEY` is not set
- **No Valid Files:** Exits gracefully with error message
- **File Read Errors:** Continues processing other files, logs errors
- **API Errors:** Catches and displays Claude API exceptions

## Configuration Notes

### Model Selection
The default model `claude-sonnet-4-20250514` can be overridden via the `ANTHROPIC_MODEL` environment variable.

### Token Limits
- Current max_tokens is set to 2000
- For larger codebases, you may need to increase this limit or implement chunking

### File Type Support
To add support for additional file types, modify the `valid_exts` tuple in the `main()` function:

```python
valid_exts = (".py", ".js", ".ts", ".tsx", ".jsx", ".rb", ".go")  # Added Ruby and Go
```

## Suggestions for Improvement

1. **Chunking Support:** For very large codebases, implement file batching to stay within token limits
2. **Configuration File:** Move settings like file extensions and model parameters to a config file
3. **Output Formats:** Add support for other output formats (JSON, HTML, etc.)
4. **Filtering Options:** Add ability to exclude certain directories or files (e.g., `node_modules`, `.git`)
5. **Parallel Processing:** Implement concurrent file reading for better performance on large codebases

## Example Usage

```bash
# Review current directory
python claude_folder_reviewer.py .

# Review specific project
python claude_folder_reviewer.py /path/to/my/project

# Set custom model via environment
export ANTHROPIC_MODEL="claude-3-opus-20240229"
python claude_folder_reviewer.py ./src
```