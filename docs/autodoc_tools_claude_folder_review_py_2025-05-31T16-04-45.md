<!--
This documentation was auto-generated by Claude on 2025-05-31T16-04-45.
Source file: ./tools/claude_folder_review.py
-->

# Code Review Tool

A Python script that analyzes code folders using Claude AI to provide comprehensive code reviews and architectural insights.

## Overview

This tool recursively scans a specified folder for source code files, combines them into a single review request, and uses Anthropic's Claude AI to generate detailed feedback on code organization, potential bugs, architecture, and improvement suggestions.

**Author:** André Wolke  
**Version:** 1.0.0  
**Date:** 2025-05-31

## Features

- 🔍 Recursive folder scanning for multiple file types
- 📊 Real-time progress tracking with ETA estimates
- 🤖 AI-powered code review using Claude
- 📝 Markdown-formatted output reports
- ⚡ Configurable file type filtering
- 🛡️ Error handling and graceful failures

## Prerequisites

### Dependencies

Install required Python packages:

```bash
pip install anthropic python-dotenv
```

### Environment Setup

Create a `.env` file in the project root:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key

**Optional:**
- `ANTHROPIC_MODEL`: Claude model to use (defaults to `claude-sonnet-4-20250514`)

## Usage

### Basic Usage

```bash
python code_review.py [folder_path]
```

### Examples

```bash
# Review current directory
python code_review.py .

# Review specific folder
python code_review.py /path/to/project

# Review with default folder (../137docs)
python code_review.py
```

## Configuration

### Supported File Types

Currently configured to review:
- `.py` (Python)
- `.js` (JavaScript)
- `.ts` (TypeScript)
- `.tsx` (TypeScript React)
- `.jsx` (JavaScript React)

### Extending File Types

Uncomment and modify the extended file types list:

```python
valid_exts = (".py", ".js", ".ts", ".tsx", ".jsx", ".html", ".css", ".json", ".go", ".java", ".yaml", ".yml")
```

## Output

### File Structure

```
project/
├── output/
│   └── folder_review_2025-05-31T14-30-15.md
├── .env
└── code_review.py
```

### Review Content

Generated reviews include:

- **Code Organization** - Structure and modularity analysis
- **Bug Patterns** - Potential issues and vulnerabilities  
- **Architecture Weaknesses** - Design flaws and improvement areas
- **Modularization Suggestions** - Recommendations for better code organization

## Progress Tracking

The tool provides real-time feedback:

```
🔍 Found 15 source files in: ./project

[████████████████████████──────] 80% ⏱ ETA: 01:23 | ✅ src/main.py
```

## Error Handling

### Common Issues

| Error | Cause | Solution |
|-------|-------|----------|
| `❌ No valid files found` | No matching file types in folder | Check folder path and file extensions |
| `❌ Claude API error` | Invalid API key or quota exceeded | Verify `.env` configuration |
| `[ERR] ❌ Error reading file` | File permissions or encoding issues | Check file accessibility |

### Troubleshooting

1. **API Key Issues:**
   ```bash
   # Verify your .env file
   cat .env
   ```

2. **File Access Problems:**
   ```bash
   # Check folder permissions
   ls -la /path/to/folder
   ```

3. **Module Import Errors:**
   ```bash
   # Install missing dependencies
   pip install -r requirements.txt
   ```

## API Limits

- **Max Tokens:** 2000 (configurable in code)
- **Rate Limits:** Depends on your Anthropic plan
- **File Size:** Large codebases may hit token limits

## Customization

### Modifying the Review Prompt

Edit the `prompt` string to customize review focus:

```python
prompt = f"""Custom review instructions here...

Focus on:
- Your specific requirements
- Custom analysis criteria

Files:
{combined}
"""
```

### Adjusting Progress Bar

Modify the progress bar width:

```python
progress_bar = render_progress(idx, total_files, width=50)  # Wider bar
```

## Best Practices

- 🔐 Keep your API key secure and never commit `.env` files
- 📏 For large codebases, consider reviewing folders separately
- 🔄 Regular reviews help maintain code quality over time
- 📋 Save review outputs for tracking improvements

## License

This tool is provided as-is for code review purposes. Ensure compliance with Anthropic's API terms of service.