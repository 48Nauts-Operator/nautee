<!--
This documentation was auto-generated by Claude on 2025-05-31T16-05-38.
Source file: ./tools/changelog.py
-->

# Git Changelog Generator

A Python script that automatically generates professional release notes from Git commit messages using Anthropic's Claude AI.

## Overview

This tool extracts recent Git commit messages from your repository and uses Claude AI to transform them into well-structured, readable release notes with proper categorization and formatting.

## Features

- Extracts Git commit history automatically
- Uses AI to categorize and summarize changes
- Generates markdown-formatted release notes
- Saves timestamped output files
- Handles errors gracefully

## Prerequisites

- Python 3.6+
- Git repository
- Anthropic API key

## Required Dependencies

```bash
pip install anthropic python-dotenv
```

## Environment Setup

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Configuration

| Environment Variable | Description | Default Value | Required |
|---------------------|-------------|---------------|----------|
| `ANTHROPIC_API_KEY` | Your Anthropic API key | None | Yes |
| `ANTHROPIC_MODEL` | Claude model to use | `claude-sonnet-4-20250514` | No |

## Usage

1. Navigate to your Git repository directory
2. Ensure your `.env` file is configured
3. Run the script:

```bash
python changelog_generator.py
```

## Output

The script generates:
- **File Location**: `output/changelog_YYYY-MM-DDTHH-MM-SS.txt`
- **Format**: Markdown with organized sections (Features, Fixes, Improvements)
- **Content**: AI-processed release notes based on recent commits

### Example Output Structure

```markdown
# Release Notes

## Features
- Added user authentication system
- Implemented data export functionality

## Fixes  
- Fixed memory leak in processing module
- Resolved database connection timeout issues

## Improvements
- Enhanced error handling and logging
- Updated documentation
```

## Error Handling

The script includes robust error handling:

- **Git Access Errors**: If Git commands fail, continues with placeholder text
- **API Errors**: Anthropic client errors are propagated with clear messages
- **File System Errors**: Creates output directory if it doesn't exist

## Technical Details

### Git Integration
- Retrieves last 10 commits using `git log --pretty=format:"* %s" -n 10`
- Decodes subprocess output to UTF-8
- Gracefully handles repositories without commits

### AI Processing
- Sends structured prompt to Claude for changelog generation
- Uses configurable model selection
- Limits response to 1000 tokens for concise output

### File Management
- Creates timestamped files to prevent overwrites
- Ensures output directory exists before writing
- Uses ISO 8601 timestamp format for file naming

## Customization

### Modify Commit Count
Change the number of commits to analyze:

```python
git_log = subprocess.check_output([
    "git", "log", "--pretty=format:* %s", "-n", "20"  # Changed from 10 to 20
]).decode()
```

### Customize AI Prompt
Modify the prompt variable to change output format:

```python
prompt = f"""Generate release notes in your preferred format:
- Use bullet points
- Focus on user-facing changes
- Group by component

Commits:
{git_log}
"""
```

### Change Output Location
Modify the output path:

```python
out_path = f"releases/notes_{timestamp}.md"  # Custom directory and extension
```

## Troubleshooting

| Issue | Cause | Solution |
|-------|-------|----------|
| "No commits found" | Not in Git repo or no commits | Ensure you're in a Git repository with commit history |
| API authentication error | Missing/invalid API key | Verify `ANTHROPIC_API_KEY` in `.env` file |
| Permission denied | No write access | Check permissions for output directory |
| Git command not found | Git not installed | Install Git and ensure it's in system PATH |

## License

This script is provided as-is for educational and development purposes.