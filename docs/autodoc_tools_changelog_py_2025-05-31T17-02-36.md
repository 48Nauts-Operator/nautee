<!--
This documentation was auto-generated by Claude on 2025-05-31T17-02-36.
Source file: ./tools/changelog.py
-->

# Git Changelog Generator

A Python script that automatically generates structured release notes from Git commit messages using Anthropic's Claude AI.

## Overview

This tool extracts recent Git commit messages from your repository and uses Claude AI to transform them into well-formatted, professional changelog entries with organized sections like Features, Fixes, and Improvements.

## Prerequisites

- Python 3.6+
- Git repository (script must be run from within a Git repository)
- Anthropic API key

## Dependencies

```bash
pip install anthropic python-dotenv
```

## Setup

### 1. Environment Configuration

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional: defaults to this model
```

### 2. Required Environment Variables

| Variable | Description | Required | Default |
|----------|-------------|----------|---------|
| `ANTHROPIC_API_KEY` | Your Anthropic API key | Yes | None |
| `ANTHROPIC_MODEL` | Claude model to use | No | `claude-sonnet-4-20250514` |

## Usage

Run the script from within your Git repository:

```bash
python changelog_generator.py
```

## How It Works

1. **Git Log Extraction**: Retrieves the last 10 commit messages using `git log --pretty=format:"* %s" -n 10`
2. **AI Processing**: Sends commit messages to Claude AI with instructions to create structured release notes
3. **Output Generation**: Saves the generated changelog to a timestamped file in the `output/` directory

## Output

The script generates a file named `changelog_YYYY-MM-DDTHH-MM-SS.txt` in the `output/` directory containing:

- Organized sections (Features, Fixes, Improvements, etc.)
- Clear, readable descriptions
- Markdown formatting

## Error Handling

- **Git Repository Access**: If Git commands fail, the script continues with a fallback message
- **API Errors**: Anthropic API errors will raise exceptions and halt execution
- **File System**: Automatically creates the `output/` directory if it doesn't exist

## Configuration Options

### Customizing Commit Count

To change the number of commits processed, modify line 11:

```python
git_log = subprocess.check_output([
    "git", "log", "--pretty=format:* %s", "-n", "20"  # Changed from 10 to 20
]).decode()
```

### Customizing the AI Prompt

Modify the `prompt` variable (lines 16-22) to adjust the output format or add specific instructions for your changelog style.

### Output Location

Change the output directory by modifying line 32:

```python
out_path = f"custom_directory/changelog_{timestamp}.txt"
```

## Example Output Structure

```markdown
## Features
- Added user authentication system
- Implemented file upload functionality

## Fixes  
- Fixed memory leak in data processing
- Resolved CSS styling issues on mobile

## Improvements
- Enhanced error handling and logging
- Optimized database queries for better performance
```

## Troubleshooting

### Common Issues

1. **"Error reading git log"**: Ensure you're running the script from within a Git repository
2. **API Key errors**: Verify your `ANTHROPIC_API_KEY` is correctly set in the `.env` file
3. **Permission errors**: Ensure write permissions for the output directory

### Debug Mode

Add error logging by modifying the exception handling:

```python
except Exception as e:
    print(f"‚ùå Error reading git log: {e}")
    import traceback
    traceback.print_exc()  # Add this line for detailed error information
```

## License

This script can be freely used and modified for your changelog generation needs.