<!--
This documentation was auto-generated by Claude on 2025-05-31T15-40-50.
Source file: ./tools/changelog.py
-->

# Git Changelog Generator

A Python script that automatically generates professional changelog documentation from Git commit messages using the Anthropic Claude API.

## Overview

This tool extracts recent Git commit messages from your repository and uses AI to transform them into well-structured, readable release notes with proper categorization and markdown formatting.

## Features

- Extracts Git commit history automatically
- AI-powered changelog generation using Claude
- Structured output with sections (Features, Fixes, Improvements)
- Timestamped output files
- Error handling for Git operations
- Configurable AI model selection

## Prerequisites

- Python 3.6+
- Git repository (must be run from within a Git repository)
- Anthropic API account and API key

## Dependencies

```bash
pip install anthropic python-dotenv
```

## Environment Setup

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to claude-sonnet-4-20250514
```

### Environment Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `ANTHROPIC_API_KEY` | Yes | None | Your Anthropic API key |
| `ANTHROPIC_MODEL` | No | `claude-sonnet-4-20250514` | Claude model to use for generation |

## Usage

```bash
python changelog_generator.py
```

The script will:
1. Extract the last 10 commit messages from your Git repository
2. Send them to Claude for processing and summarization
3. Generate a structured changelog in markdown format
4. Save the output to `output/changelog_YYYY-MM-DDTHH-MM-SS.txt`

## Output Structure

The generated changelog includes:
- **Features**: New functionality and additions
- **Fixes**: Bug fixes and corrections  
- **Improvements**: Enhancements and optimizations
- **Other**: Miscellaneous changes

## Error Handling

The script includes robust error handling for:
- Missing Git repository
- Git command failures
- API communication errors
- File system operations

If Git log extraction fails, the script continues with a fallback message rather than crashing.

## File Structure

```
project/
├── changelog_generator.py
├── .env
└── output/
    └── changelog_YYYY-MM-DDTHH-MM-SS.txt
```

## Customization

### Modify Commit Count

Change the number of commits to analyze:
```python
git_log = subprocess.check_output([
    "git", "log", "--pretty=format:* %s", "-n", "20"  # Changed from 10 to 20
]).decode()
```

### Customize AI Prompt

Modify the `prompt` variable to change how the AI processes your commits:
```python
prompt = f"""You are a changelog assistant. Create detailed release notes with:
- Bullet points for each change
- Technical details preserved
- Impact assessment for each feature

Commits:
{git_log}
"""
```

### Change Output Format

Modify the output file format and location:
```python
out_path = f"releases/CHANGELOG_{timestamp}.md"  # Different path and extension
```

## Limitations

- Requires active internet connection for API calls
- Limited to repositories with Git history
- API rate limits apply based on your Anthropic plan
- Output quality depends on commit message quality

## Security Notes

- Store API keys securely in `.env` files
- Add `.env` to your `.gitignore` file
- Never commit API keys to version control
- Consider using environment-specific API keys for different deployments

## Troubleshooting

### Common Issues

**"Error reading git log"**
- Ensure you're running the script from within a Git repository
- Verify Git is installed and accessible from command line

**API Authentication Errors**
- Check that `ANTHROPIC_API_KEY` is correctly set in `.env`
- Verify your API key is valid and has sufficient credits

**Permission Errors**
- Ensure the script has write permissions for the `output/` directory
- Check file system permissions if output saving fails