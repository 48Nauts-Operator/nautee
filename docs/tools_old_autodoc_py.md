<!-- Auto-generated by Claude on 2025-06-22 21:18 -->

# autodoc.py Documentation

<!-- Auto-generated by Claude on 2024-12-19 -->

## Overview

The `autodoc.py` file is an automated documentation generator that scans Python source files in a project and generates comprehensive Markdown documentation using Claude AI. It integrates with MkDocs by automatically updating the `mkdocs.yml` configuration file with the generated documentation.

## Purpose

- **Automated Documentation**: Eliminates manual documentation writing by leveraging AI
- **Project-wide Scanning**: Discovers and processes all Python files in a target directory
- **MkDocs Integration**: Seamlessly updates MkDocs configuration for immediate site generation
- **Consistent Format**: Ensures uniform documentation structure across all files

## Key Components

### Configuration & Setup

```python
load_dotenv()
client = anthropic.Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))
model = os.getenv("ANTHROPIC_MODEL", "claude-sonnet-4-20250514")
```

- Loads environment variables for API configuration
- Initializes Anthropic Claude client
- Sets default model with environment override capability

### Important Functions

#### `snake_md_path(rel_path: str) -> str`
Converts file paths to snake_case Markdown filenames.
- **Input**: Relative file path (e.g., `src/utils.py`)
- **Output**: Snake case MD filename (e.g., `src_utils_py.md`)

#### `load_mkdocs_config(path: str)`
Loads existing MkDocs configuration or creates a default structure.
- Returns existing YAML config if found
- Provides sensible defaults for new projects

#### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
Writes comprehensive MkDocs configuration with Material theme setup.

**Features configured:**
- Material theme with dark/light mode toggle
- Code highlighting and line numbers
- Navigation enhancements
- Search functionality
- Python docstring support via mkdocstrings

#### `collect_python_files(base: str)`
Recursively discovers Python files for documentation.
- **Excludes**: Test files (`test_*`), `__init__.py` files
- **Returns**: List of absolute file paths

### Core Documentation Generation

The main processing loop:

1. **File Reading**: Loads Python source code
2. **AI Processing**: Sends code to Claude with structured prompt
3. **Markdown Generation**: Receives formatted documentation
4. **File Writing**: Saves to `docs/` directory with timestamp
5. **Navigation Update**: Adds entries to MkDocs navigation

## Usage

### Command Line
```bash
# Document current directory
python autodoc.py

# Document specific directory
python autodoc.py /path/to/project
```

### Environment Variables
```bash
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
```

## Output Structure

```
docs/
‚îú‚îÄ‚îÄ index.md                    # Auto-generated if missing
‚îú‚îÄ‚îÄ module_name_py.md          # Generated docs
‚îú‚îÄ‚îÄ utils_helpers_py.md        # Snake-case naming
‚îî‚îÄ‚îÄ ...
mkdocs.yml                     # Updated configuration
```

## Notes and Suggestions

### ‚úÖ Strengths
- **Comprehensive MkDocs setup** with modern Material theme
- **Intelligent file filtering** excludes test and init files
- **Preserves existing navigation** while adding AutoDocs section
- **Detailed logging** for debugging and monitoring

### ‚ö†Ô∏è Considerations
- **API Costs**: Claude API calls for each file - consider batching for large projects
- **Rate Limiting**: No built-in rate limiting for API requests
- **Error Handling**: Individual file failures don't stop the entire process
- **Token Limits**: 1500 max tokens may truncate documentation for very large files

### üîß Potential Improvements
- Add configuration file support for customizable prompts
- Implement caching to avoid re-processing unchanged files
- Add support for batch processing to reduce API calls
- Include file modification time checking for incremental updates
- Add validation for generated Markdown quality

### üìã Prerequisites
- Python environment with required packages: `anthropic`, `python-dotenv`, `PyYAML`
- Valid Anthropic API key
- MkDocs installation for site generation

This tool effectively bridges the gap between code and documentation, making it easy to maintain up-to-date project documentation with minimal manual effort.