<!-- Auto-generated by Claude on 2025-06-08 05:20 -->

# autodoc.py

**Auto-generated by Claude on 2024-01-15 14:30**

## Overview

`autodoc.py` is an automated documentation generator that scans Python source files in a project and creates comprehensive Markdown documentation using Claude AI. The tool integrates seamlessly with MkDocs by automatically updating the `mkdocs.yml` configuration file with generated documentation links.

## Purpose

- **Automated Documentation**: Eliminates manual documentation writing by leveraging AI
- **MkDocs Integration**: Automatically maintains documentation site structure
- **Batch Processing**: Handles multiple Python files in a single execution
- **Consistent Format**: Ensures uniform documentation style across the project

## Key Features

### Core Functionality

- Scans project directories for Python files (`.py`)
- Generates detailed Markdown documentation using Claude AI
- Creates organized documentation files in `docs/` directory
- Updates MkDocs navigation configuration automatically
- Preserves existing static navigation items

### File Processing

- **Filters**: Excludes test files (`test_*`) and `__init__.py` files
- **Naming**: Converts file paths to snake_case Markdown filenames
- **Organization**: Groups all auto-generated docs under "AutoDocs" section

## Important Functions

### `snake_md_path(rel_path: str) -> str`
```python
def snake_md_path(rel_path: str) -> str:
    return rel_path.replace("/", "_").replace(".", "_") + ".md"
```
- Converts file paths to documentation-friendly filenames
- Replaces path separators and dots with underscores

### `load_mkdocs_config(path: str)`
```python
def load_mkdocs_config(path: str):
    if os.path.exists(path):
        with open(path, "r") as f:
            return yaml.safe_load(f)
    return {
        "site_name": "Nautee Docs",
        "theme": {"name": "material"},
        "nav": []
    }
```
- Loads existing MkDocs configuration
- Provides sensible defaults if no config exists

### `collect_python_files(base: str)`
```python
def collect_python_files(base: str):
    results = []
    for root, _, files in os.walk(base):
        for file in files:
            if file.endswith(".py") and not file.startswith("test_") and file != "__init__.py":
                results.append(os.path.join(root, file))
    return results
```
- Recursively finds Python files in the target directory
- Applies filtering logic to exclude unwanted files

## Configuration

### Environment Variables

- `ANTHROPIC_API_KEY`: Required API key for Claude AI service
- `ANTHROPIC_MODEL`: AI model to use (defaults to "claude-sonnet-4-20250514")

### MkDocs Theme Configuration

The tool configures a comprehensive Material theme with:
- **Dark/Light Mode Toggle**: Automatic theme switching
- **Enhanced Navigation**: Instant loading, tabs, and top navigation
- **Code Features**: Syntax highlighting, copy buttons, line numbers
- **Search**: Suggestion and highlighting capabilities
- **Extensions**: Admonitions, footnotes, emoji support, and more

## Usage

### Command Line
```bash
python autodoc.py [target_directory]
python autodoc.py .  # Current directory (default)
python autodoc.py src/  # Specific directory
```

### Prerequisites
```bash
pip install anthropic python-dotenv pyyaml
```

## Output Structure

```
docs/
‚îú‚îÄ‚îÄ index.md                    # Auto-generated index (if missing)
‚îú‚îÄ‚îÄ module_name_py.md          # Generated documentation files
‚îî‚îÄ‚îÄ path_to_file_py.md         # Snake-case naming convention

mkdocs.yml                     # Updated configuration
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each file generates an AI request - monitor usage for large projects
- **Rate Limits**: Consider adding delays for projects with many files
- **Error Handling**: Failed files are logged but don't stop the entire process

### üîß Potential Improvements

- **Incremental Updates**: Only regenerate docs for modified files
- **Custom Prompts**: Allow template customization for different documentation styles
- **Parallel Processing**: Speed up generation with concurrent API calls
- **Backup Strategy**: Create backups of existing documentation before overwriting

### üí° Best Practices

- Run from project root directory for consistent relative paths
- Ensure `.env` file contains valid `ANTHROPIC_API_KEY`
- Review generated documentation before committing to version control
- Consider excluding large auto-generated Python files from documentation

## Error Handling

The script includes robust error handling:
- Continues processing other files if one fails
- Provides clear console output with emoji indicators
- Gracefully handles missing configuration files
- Creates necessary directories automatically