<!-- Auto-generated by Claude on 2025-06-08 06:34 -->

# autodoc.py Documentation

<!-- Auto-generated documentation -->

## Overview

`autodoc.py` is an automated documentation generation tool that scans Python source files in a project and creates comprehensive Markdown documentation using Claude AI. The tool integrates seamlessly with MkDocs by automatically updating the navigation configuration.

## Purpose

- **Automated Documentation**: Generates technical documentation for Python files without manual intervention
- **AI-Powered Analysis**: Uses Claude AI to create detailed, readable documentation with explanations of purpose, functions, and classes
- **MkDocs Integration**: Automatically updates `mkdocs.yml` configuration to include generated documentation
- **Project Scanning**: Recursively finds and processes all relevant Python files in a project

## Key Components

### Configuration and Setup

```python
load_dotenv()
client = anthropic.Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))
model = os.getenv("ANTHROPIC_MODEL", "claude-sonnet-4-20250514")
```

- Loads environment variables for API configuration
- Initializes Anthropic client for Claude AI integration
- Supports configurable AI model selection

### Core Functions

#### `snake_md_path(rel_path: str) -> str`
- **Purpose**: Converts file paths to Markdown filename format
- **Behavior**: Replaces path separators and dots with underscores, adds `.md` extension
- **Example**: `src/utils.py` → `src_utils_py.md`

#### `load_mkdocs_config(path: str)`
- **Purpose**: Safely loads existing MkDocs configuration
- **Returns**: YAML configuration dictionary or default configuration if file doesn't exist
- **Fallback**: Creates minimal default configuration with Material theme

#### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
- **Purpose**: Writes comprehensive MkDocs configuration with enhanced features
- **Features**:
  - Material theme with dark/light mode toggle
  - Code highlighting and copying
  - Search functionality
  - Navigation enhancements
  - Markdown extensions for rich content

#### `collect_python_files(base: str)`
- **Purpose**: Recursively discovers Python files for documentation
- **Filters**: 
  - Excludes test files (`test_*.py`)
  - Excludes `__init__.py` files
  - Only processes `.py` extensions

### Documentation Generation Process

1. **File Discovery**: Scans target directory for Python files
2. **Content Reading**: Reads source code from each file
3. **AI Processing**: Sends code to Claude AI with structured prompt
4. **Markdown Generation**: Creates formatted documentation with:
   - File purpose explanation
   - Function and class descriptions
   - Usage suggestions and notes
   - Proper heading structure and code blocks
5. **File Writing**: Saves documentation with timestamp metadata
6. **Navigation Update**: Updates MkDocs navigation structure

### Error Handling

```python
try:
    # File processing logic
except Exception as e:
    print(f"❌ Error processing {file_path}: {e}")
```

- Graceful error handling for individual file processing failures
- Continues processing remaining files if one fails
- Provides detailed error messages for debugging

## Usage

### Command Line
```bash
python autodoc.py [target_directory]
```

- **Default**: Current directory (`.`) if no path specified
- **Target**: Any directory containing Python files

### Environment Variables
```bash
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
```

## Output Structure

### Generated Files
- **Documentation**: `docs/*.md` files for each Python source file
- **Index**: `docs/index.md` (created if missing)
- **Configuration**: Updated `mkdocs.yml` with navigation structure

### File Naming Convention
- Source: `src/database/models.py`
- Output: `docs/src_database_models_py.md`

## Features and Benefits

### Automation Benefits
- **Time Saving**: Eliminates manual documentation writing
- **Consistency**: Uniform documentation format across all files
- **Maintenance**: Easy regeneration when code changes

### AI-Generated Quality
- **Comprehensive Analysis**: Explains not just what code does, but why
- **Readable Format**: Uses proper Markdown structure with headings and code blocks
- **Technical Accuracy**: Claude AI understands Python patterns and best practices

### MkDocs Integration
- **Professional Appearance**: Material theme with modern UI
- **Enhanced Navigation**: Automatic sidebar generation
- **Search Functionality**: Built-in documentation search
- **Code Features**: Syntax highlighting, line numbers, copy buttons

## Suggestions and Notes

### Best Practices
- **Regular Updates**: Run after significant code changes
- **API Limits**: Be mindful of Anthropic API usage and costs
- **Review Generated Docs**: While AI-generated, manual review ensures accuracy
- **Version Control**: Consider gitignoring generated docs or committing selectively

### Customization Options
- **Prompt Modification**: Adjust the AI prompt for different documentation styles
- **File Filtering**: Modify `collect_python_files()` to change inclusion criteria
- **Theme Customization**: Extend MkDocs configuration for brand-specific styling

### Potential Improvements
- **Incremental Updates**: Only regenerate docs for changed files
- **Custom Templates**: Support for different documentation templates
- **Integration Hooks**: Git hooks for automatic documentation updates
- **Batch Processing**: Parallel processing for large codebases