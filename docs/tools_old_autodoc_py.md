<!-- Auto-generated by Claude on 2025-05-31 23:02 -->

# autodoc.py

<!-- Auto-generated documentation -->

## Overview

**autodoc.py** is an automated documentation generator that scans Python source files in a project and creates comprehensive Markdown documentation using Claude AI. The tool integrates seamlessly with MkDocs by automatically updating the `mkdocs.yml` configuration file with generated documentation entries.

## Purpose

- **Automated Documentation**: Eliminates manual documentation writing by leveraging AI
- **Project Scanning**: Recursively finds and processes all Python files in a target directory
- **MkDocs Integration**: Automatically maintains and updates MkDocs navigation structure
- **Documentation Standardization**: Ensures consistent documentation format across all Python modules

## Key Features

### 🔍 **File Discovery**
- Scans directories recursively for Python files
- Excludes test files (`test_*.py`) and `__init__.py` files
- Processes files from a specified target path or current directory

### 🤖 **AI-Powered Documentation**
- Uses Claude AI (Anthropic) to generate technical documentation
- Creates structured Markdown with headings, bullet points, and code blocks
- Provides explanations of file purpose, important functions, and usage suggestions

### 📚 **MkDocs Integration**
- Automatically updates `mkdocs.yml` configuration
- Maintains existing navigation structure while adding new AutoDocs section
- Creates professional documentation site with Material theme

## Important Functions

### `snake_md_path(rel_path: str) -> str`
Converts file paths to Markdown-friendly filenames by replacing slashes and dots with underscores.

```python
# Example: "src/utils/helper.py" → "src_utils_helper_py.md"
```

### `load_mkdocs_config(path: str)`
Loads existing MkDocs configuration or creates a default structure if none exists.

### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
Writes comprehensive MkDocs configuration with:
- Material theme with dark/light mode toggle
- Enhanced markdown extensions
- Search and navigation features
- Code highlighting and syntax support

### `collect_python_files(base: str)`
Recursively discovers Python files while filtering out:
- Test files (`test_*.py`)
- Init files (`__init__.py`)
- Non-Python files

## Configuration

### Required Environment Variables
```bash
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

### Usage
```bash
# Document current directory
python autodoc.py

# Document specific path
python autodoc.py /path/to/project
```

## Output Structure

```
docs/
├── index.md                    # Auto-generated index (if missing)
├── module_name_py.md          # Generated docs for each Python file
└── ...

mkdocs.yml                     # Updated with AutoDocs navigation
```

## Notes and Suggestions

### ✅ **Strengths**
- **Comprehensive MkDocs Setup**: Includes professional theme configuration with useful extensions
- **Preservation of Existing Config**: Maintains manual navigation entries while adding auto-generated ones
- **Error Handling**: Continues processing even if individual files fail
- **Flexible Input**: Accepts command-line arguments for target directories

### ⚠️ **Areas for Improvement**

1. **API Cost Management**: Consider implementing:
   - File size limits before sending to Claude
   - Caching mechanism to avoid re-processing unchanged files
   - Token usage tracking

2. **Error Recovery**: 
   - Add retry logic for API failures
   - Better handling of malformed Python files
   - Logging system for debugging

3. **Configuration Options**:
   - Make output directory configurable
   - Allow custom documentation templates
   - Support for excluding specific directories/files

4. **Performance Optimization**:
   - Implement parallel processing for large codebases
   - Add progress indicators for long-running operations

### 🚀 **Recommended Enhancements**

```python
# Example: Add file change detection
def needs_update(py_file, md_file):
    if not os.path.exists(md_file):
        return True
    return os.path.getmtime(py_file) > os.path.getmtime(md_file)
```

This tool provides an excellent foundation for automated documentation generation and can significantly reduce the maintenance burden of keeping project documentation current.