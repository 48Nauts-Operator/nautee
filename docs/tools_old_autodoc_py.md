<!-- Auto-generated by Claude on 2025-06-08 08:24 -->

# Autodoc Generator Documentation

<!-- Auto-generated documentation -->

## Overview

The `autodoc.py` script is an automated documentation generator that scans Python projects, creates Markdown documentation using Claude AI, and integrates the generated docs into an MkDocs configuration. This tool streamlines the documentation process by automatically analyzing Python source code and generating comprehensive documentation.

## Purpose

- **Automated Documentation**: Generates technical documentation for Python files without manual intervention
- **AI-Powered Analysis**: Uses Claude AI to analyze code structure and create meaningful documentation
- **MkDocs Integration**: Automatically updates MkDocs configuration to include generated documentation
- **Project Scanning**: Recursively finds and processes Python files in a project directory

## Key Components

### Dependencies

```python
import os
import sys
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import yaml
```

- **anthropic**: Claude AI API client for generating documentation
- **dotenv**: Environment variable management for API keys
- **yaml**: MkDocs configuration file manipulation

### Configuration Setup

```python
load_dotenv()
client = anthropic.Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))
model = os.getenv("ANTHROPIC_MODEL", "claude-sonnet-4-20250514")
```

- Loads environment variables from `.env` file
- Initializes Claude AI client with API key
- Configurable AI model selection

## Important Functions

### `snake_md_path(rel_path: str) -> str`
- **Purpose**: Converts file paths to safe Markdown filename format
- **Behavior**: Replaces path separators and dots with underscores
- **Example**: `src/utils.py` ‚Üí `src_utils_py.md`

### `load_mkdocs_config(path: str)`
- **Purpose**: Loads existing MkDocs configuration or creates default structure
- **Returns**: Dictionary containing MkDocs configuration
- **Fallback**: Creates minimal default config if file doesn't exist

### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
- **Purpose**: Writes comprehensive MkDocs configuration with Material theme
- **Features**: 
  - Dark/light mode toggle
  - Code highlighting and copying
  - Search functionality
  - Navigation enhancements

### `collect_python_files(base: str)`
- **Purpose**: Recursively scans directory for Python source files
- **Filters**: 
  - Excludes test files (`test_*.py`)
  - Excludes `__init__.py` files
  - Only includes `.py` extensions

## Workflow Process

### 1. File Discovery
```python
py_files = collect_python_files(target_path)
```
- Scans target directory for Python files
- Exits gracefully if no files found

### 2. Documentation Generation
For each Python file:
- Reads source code content
- Sends code to Claude AI with documentation prompt
- Generates Markdown documentation
- Saves to `docs/` directory with timestamp

### 3. MkDocs Integration
- Loads existing MkDocs configuration
- Preserves static navigation items
- Adds new "AutoDocs" section with generated documentation
- Updates configuration with Material theme features

## Usage

### Command Line
```bash
python autodoc.py [target_directory]
```

- **target_directory**: Optional path to scan (defaults to current directory)
- **Output**: Generated files in `docs/` directory
- **Configuration**: Updates `mkdocs.yml`

### Environment Variables
```bash
ANTHROPIC_API_KEY=your_claude_api_key
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
```

## Output Structure

### Generated Files
- **docs/*.md**: Individual documentation files for each Python module
- **docs/index.md**: Auto-generated index page (if missing)
- **mkdocs.yml**: Updated MkDocs configuration

### File Naming Convention
- Original: `src/database/models.py`
- Generated: `docs/src_database_models_py.md`

## Features & Benefits

### ‚úÖ Strengths
- **Automated Process**: Minimal manual intervention required
- **AI-Powered**: Generates contextual, meaningful documentation
- **Integration Ready**: Seamlessly works with MkDocs workflow
- **Configurable**: Supports different Claude models and target directories
- **Preservation**: Maintains existing MkDocs navigation structure

### üìù Suggestions for Improvement

1. **Error Handling**: Add retry logic for API failures
2. **Configuration**: Make prompt templates configurable
3. **Filtering**: Add more sophisticated file filtering options
4. **Caching**: Implement caching to avoid re-processing unchanged files
5. **Validation**: Add validation for generated Markdown content
6. **Logging**: Replace print statements with proper logging framework

### ‚ö†Ô∏è Requirements

- Valid Anthropic API key
- Python packages: `anthropic`, `python-dotenv`, `pyyaml`
- Sufficient API quota for processing all files
- Write permissions in target directory

### üîß Configuration Notes

The script creates a comprehensive MkDocs configuration with:
- Material theme with dark/light mode
- Code syntax highlighting
- Search functionality
- Navigation features
- Multiple Markdown extensions

This tool is ideal for teams wanting to maintain up-to-date documentation automatically as part of their development workflow.