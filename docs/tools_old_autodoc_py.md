<!-- Auto-generated by Claude on 2025-06-21 22:18 -->

# Autodoc Generator Documentation

<!-- Auto-generated by Claude on 2024-12-19 12:30 -->

## Overview

The `autodoc.py` file is an automated documentation generator that scans Python projects, creates Markdown documentation using Claude AI, and integrates the generated docs into a MkDocs site structure. It serves as a CI/CD-friendly tool for maintaining up-to-date project documentation.

## Purpose

- **Automated Documentation**: Generates comprehensive Markdown documentation for Python source files
- **AI-Powered**: Uses Anthropic's Claude API to create intelligent, contextual documentation
- **MkDocs Integration**: Automatically updates `mkdocs.yml` configuration with new documentation entries
- **Project Scanning**: Recursively finds and processes Python files in a target directory

## Key Components

### Configuration & Setup

```python
load_dotenv()
client = anthropic.Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))
model = os.getenv("ANTHROPIC_MODEL", "claude-sonnet-4-20250514")
```

- Loads environment variables for API credentials
- Configures Claude AI client with fallback model selection
- Sets up output directory structure

### Core Functions

#### `snake_md_path(rel_path: str) -> str`
- **Purpose**: Converts file paths to Markdown filename format
- **Behavior**: Replaces path separators and dots with underscores
- **Example**: `src/utils.py` ‚Üí `src_utils_py.md`

#### `load_mkdocs_config(path: str)`
- **Purpose**: Loads existing MkDocs configuration or creates default structure
- **Returns**: Dictionary with site configuration including nav, theme, and plugins
- **Fallback**: Creates basic Material theme configuration if no existing config found

#### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
- **Purpose**: Writes comprehensive MkDocs configuration with enhanced features
- **Features**: 
  - Material theme with dark/light mode toggle
  - Code syntax highlighting with line numbers
  - Search functionality with suggestions
  - Navigation enhancements
  - Emoji support and custom extensions

#### `collect_python_files(base: str)`
- **Purpose**: Recursively scans directory for Python source files
- **Filters**: Excludes test files (`test_*`) and `__init__.py` files
- **Returns**: List of absolute file paths

### Main Workflow

1. **File Discovery**: Scans target directory for Python files
2. **Documentation Generation**: 
   - Reads source code from each file
   - Sends code to Claude API with documentation prompt
   - Receives structured Markdown documentation
3. **File Writing**: Saves generated docs with timestamps to `docs/` directory
4. **Navigation Update**: Updates MkDocs navigation structure
5. **Configuration Management**: Preserves existing MkDocs settings while adding AutoDocs section

## Usage

### Command Line
```bash
python autodoc.py [target_directory]
```

### Environment Variables Required
```bash
ANTHROPIC_API_KEY=your_claude_api_key
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # optional
```

## Output Structure

```
docs/
‚îú‚îÄ‚îÄ index.md                    # Auto-generated if missing
‚îú‚îÄ‚îÄ src_main_py.md             # Generated documentation files
‚îú‚îÄ‚îÄ utils_helpers_py.md
‚îî‚îÄ‚îÄ ...
mkdocs.yml                     # Updated configuration
```

## Important Notes

### ‚ö†Ô∏è API Considerations
- **Rate Limits**: Be mindful of Anthropic API rate limits for large projects
- **Token Usage**: Each file consumes API tokens (max 1500 tokens per response)
- **Cost Management**: Monitor API usage for cost control

### üîß Configuration Features
- **Preserves Existing Config**: Maintains manual mkdocs.yml entries
- **Material Theme**: Implements modern documentation theme with enhanced features
- **Plugin Integration**: Includes mkdocstrings for API documentation
- **Extensible**: Easy to modify prompt templates for custom documentation styles

### üìù Best Practices
- Run after significant code changes to keep docs current
- Include in CI/CD pipeline for automated documentation updates
- Review generated documentation for accuracy and completeness
- Customize prompts for project-specific documentation standards

## Suggestions for Improvement

1. **Error Handling**: Add retry logic for API failures
2. **Caching**: Implement file change detection to avoid regenerating unchanged files
3. **Customization**: Add configuration file for prompt templates and output formatting
4. **Parallel Processing**: Process multiple files concurrently to improve performance
5. **Validation**: Add checks for API key presence and file permissions before execution