<!-- Auto-generated by Claude on 2025-06-22 14:17 -->

# autodoc.py Documentation

<!-- Auto-generated documentation -->

## Overview

The `autodoc.py` script is an **automated documentation generator** that scans Python source files in a project and generates comprehensive Markdown documentation using Claude AI. It integrates with MkDocs by automatically updating the `mkdocs.yml` configuration file to include the generated documentation.

## Purpose

- **Automate documentation generation** for Python projects
- **Leverage AI** (Claude) to create high-quality technical documentation
- **Integrate seamlessly** with MkDocs static site generators
- **Maintain up-to-date documentation** with minimal manual effort

## Key Features

- Scans directories for Python files (excluding tests and `__init__.py`)
- Generates Markdown documentation using Claude AI
- Updates MkDocs configuration automatically
- Preserves existing navigation structure
- Provides detailed logging and error handling

## Configuration

### Environment Variables

The script requires the following environment variables:

```bash
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to specified model
```

### Command Line Usage

```bash
python autodoc.py [target_directory]
```

- `target_directory`: Optional path to scan (defaults to current directory)

## Important Functions

### `snake_md_path(rel_path: str) -> str`
Converts file paths to snake_case Markdown filenames.
- **Input**: Relative file path (e.g., `src/utils.py`)
- **Output**: Snake case MD filename (e.g., `src_utils_py.md`)

### `load_mkdocs_config(path: str)`
Loads existing MkDocs configuration or creates a default one.
- **Returns**: Dictionary containing MkDocs configuration
- **Fallback**: Creates default "Nautee Docs" configuration if file doesn't exist

### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
Writes comprehensive MkDocs configuration with Material theme.
- **Features**: Dark/light mode toggle, code highlighting, search functionality
- **Navigation**: Preserves existing nav + adds AutoDocs section

### `collect_python_files(base: str)`
Recursively scans directory for Python files.
- **Excludes**: Test files (`test_*.py`) and `__init__.py`
- **Returns**: List of Python file paths

## Workflow

1. **Environment Setup**: Loads environment variables and initializes Claude client
2. **File Discovery**: Scans target directory for Python files
3. **Documentation Generation**: 
   - Reads each Python file
   - Sends code to Claude with documentation prompt
   - Saves generated Markdown to `docs/` directory
4. **Navigation Update**: Updates `mkdocs.yml` with new documentation links
5. **Index Creation**: Creates `index.md` if it doesn't exist

## Output Structure

```
docs/
├── index.md
├── filename_py.md
├── subdirectory_module_py.md
└── ...
```

## MkDocs Integration

The script automatically configures MkDocs with:

- **Material theme** with dark/light mode support
- **Code highlighting** and line numbers
- **Search functionality** with suggestions
- **Navigation features** (tabs, instant loading)
- **Markdown extensions** (admonitions, code blocks, emojis)

## Error Handling

- **File Access**: Continues processing other files if one fails
- **API Errors**: Logs Claude API errors and continues
- **Missing Config**: Creates default MkDocs config if none exists

## Notes & Suggestions

### Strengths
- ✅ Comprehensive MkDocs theme configuration
- ✅ Preserves existing navigation structure
- ✅ Detailed logging and progress tracking
- ✅ Robust error handling

### Potential Improvements
- **Rate Limiting**: Consider adding delays between API calls for large projects
- **Caching**: Implement file change detection to avoid regenerating unchanged files
- **Configuration**: Make prompt templates configurable
- **Validation**: Add Python syntax validation before sending to Claude

### Usage Tips
- Run regularly in CI/CD pipeline to keep docs updated
- Consider excluding certain directories (e.g., `venv/`, `.git/`)
- Monitor API usage costs with large codebases
- Review generated documentation for accuracy before publishing

## Dependencies

```python
anthropic>=0.3.0
python-dotenv>=0.19.0
PyYAML>=6.0
```

The script requires a valid Anthropic API key and internet connection to function properly.