<!-- Auto-generated by Claude on 2025-06-22 06:28 -->

# autodoc.py Documentation

<!-- Auto-generated by Claude on 2024-12-19 -->

## Overview

`autodoc.py` is an automated documentation generator that leverages Claude AI to create comprehensive Markdown documentation for Python projects. The script scans Python source files, generates human-readable documentation using Anthropic's Claude API, and integrates the results into a MkDocs-compatible documentation site.

## Purpose and Features

- **Automated Documentation Generation**: Converts Python source code into well-structured Markdown documentation
- **AI-Powered Analysis**: Uses Claude AI to understand code context and generate meaningful explanations
- **MkDocs Integration**: Automatically updates `mkdocs.yml` configuration with generated documentation
- **Material Theme Support**: Pre-configured with Material for MkDocs theme and extensions
- **Flexible File Discovery**: Recursively scans directories for Python files

## Key Components

### Configuration and Setup

```python
load_dotenv()
client = anthropic.Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))
model = os.getenv("ANTHROPIC_MODEL", "claude-sonnet-4-20250514")
```

- Loads environment variables for API configuration
- Initializes Anthropic client with API key
- Supports configurable Claude model selection

### Core Functions

#### `snake_md_path(rel_path: str) -> str`
- Converts file paths to snake_case Markdown filenames
- Replaces path separators and dots with underscores
- Ensures consistent naming for generated documentation files

#### `load_mkdocs_config(path: str)`
- Loads existing MkDocs configuration from YAML file
- Returns default configuration if file doesn't exist
- Maintains backward compatibility with existing documentation setups

#### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
- Generates comprehensive MkDocs configuration with Material theme
- Includes advanced features like:
  - Dark/light mode toggle
  - Code highlighting and copying
  - Search functionality
  - Navigation enhancements
  - Markdown extensions for rich content

#### `collect_python_files(base: str)`
- Recursively discovers Python files in the target directory
- Filters out test files (`test_*`) and `__init__.py` files
- Returns list of absolute file paths for processing

## Documentation Generation Process

1. **File Discovery**: Scans the target directory for Python files
2. **Code Analysis**: Reads source code content
3. **AI Processing**: Sends code to Claude with structured prompts
4. **Markdown Generation**: Receives formatted documentation from AI
5. **File Writing**: Saves generated docs to `docs/` directory
6. **Navigation Update**: Updates MkDocs navigation structure

### AI Prompt Template

The script uses a carefully crafted prompt that instructs Claude to:
- Explain file purpose and functionality
- Document important functions and classes
- Provide usage suggestions and notes
- Format output with proper Markdown structure

## Configuration Options

### Environment Variables

- `ANTHROPIC_API_KEY`: Required API key for Claude access
- `ANTHROPIC_MODEL`: Optional model selection (defaults to claude-sonnet-4-20250514)

### Command Line Usage

```bash
python autodoc.py [target_directory]
```

- `target_directory`: Optional path to scan (defaults to current directory)

## Output Structure

```
docs/
├── index.md                    # Auto-generated index page
├── filename_py.md             # Generated documentation files
└── ...
mkdocs.yml                     # Updated configuration
```

## Error Handling and Logging

- Comprehensive error handling for file I/O and API operations
- Detailed console output with emoji indicators for visual feedback
- Graceful handling of missing configuration files
- Continues processing even if individual files fail

## Suggestions for Improvement

1. **Rate Limiting**: Consider adding delays between API calls to respect rate limits
2. **Caching**: Implement file change detection to avoid regenerating unchanged documentation
3. **Custom Templates**: Allow customizable prompt templates for different documentation styles
4. **Batch Processing**: Group multiple files in single API calls to improve efficiency
5. **Error Recovery**: Add retry logic for transient API failures

## Dependencies

- `anthropic`: Claude AI API client
- `python-dotenv`: Environment variable management
- `pyyaml`: YAML configuration file handling
- Standard library modules: `os`, `sys`, `datetime`

## Notes

- Requires valid Anthropic API key and sufficient credits
- Generated documentation quality depends on source code clarity and structure
- MkDocs configuration includes extensive Material theme customization
- Best suited for well-structured Python projects with clear function/class definitions