<!-- Auto-generated by Claude on 2025-06-22 05:19 -->

# Autodoc Generator Documentation

## Overview

The `autodoc.py` script is an automated documentation generator that scans Python source files in a project and creates comprehensive Markdown documentation using Claude AI. It integrates seamlessly with MkDocs by automatically updating the `mkdocs.yml` configuration file.

## Purpose

- **Automated Documentation**: Generates technical documentation for Python files without manual intervention
- **AI-Powered Analysis**: Uses Anthropic's Claude AI to understand code structure and create meaningful documentation
- **MkDocs Integration**: Automatically updates MkDocs configuration for immediate deployment
- **Project Scanning**: Recursively finds and processes all relevant Python files in a project

## Key Features

### Core Functionality

- **File Discovery**: Automatically finds Python files while excluding test files and `__init__.py`
- **AI Documentation**: Leverages Claude AI to generate comprehensive Markdown documentation
- **Configuration Management**: Updates MkDocs YAML configuration with new documentation entries
- **Error Handling**: Gracefully handles processing errors and continues with remaining files

### Output Management

- Creates documentation files in `docs/` directory
- Generates snake_case filenames from Python file paths
- Adds timestamps to generated documentation
- Maintains existing MkDocs navigation structure

## Important Functions

### `snake_md_path(rel_path: str) -> str`
Converts file paths to snake_case Markdown filenames.

```python
# Example: "src/utils/helper.py" becomes "src_utils_helper_py.md"
```

### `load_mkdocs_config(path: str)`
Loads existing MkDocs configuration or creates a default structure.

**Returns:**
- Existing YAML configuration as dictionary
- Default configuration if file doesn't exist

### `write_mkdocs_config(path: str, static_nav, autodoc_items)`
Updates the MkDocs configuration with comprehensive theme settings and navigation.

**Features:**
- Material theme with dark/light mode toggle
- Code highlighting and copy functionality
- Search capabilities
- Navigation enhancements

### `collect_python_files(base: str)`
Recursively scans directories for Python files.

**Filters:**
- Excludes test files (`test_*.py`)
- Excludes `__init__.py` files
- Only processes `.py` extensions

## Configuration

### Environment Variables

The script requires the following environment variables:

```bash
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

### Command Line Usage

```bash
# Scan current directory
python autodoc.py

# Scan specific directory
python autodoc.py /path/to/project
```

## Generated Documentation Structure

```
docs/
├── index.md                    # Auto-generated index (if missing)
├── filename_py.md             # Generated docs for filename.py
├── module_submodule_py.md     # Generated docs for module/submodule.py
└── ...
```

## MkDocs Integration

### Theme Configuration

The script configures MkDocs with:

- **Material Theme**: Modern, responsive design
- **Dual Color Schemes**: Light and dark mode support
- **Enhanced Navigation**: Instant loading, tabs, top navigation
- **Code Features**: Syntax highlighting, copy buttons, line numbers
- **Search**: Suggestion and highlighting capabilities

### Navigation Structure

```yaml
nav:
  - "Static Pages": "existing_pages.md"  # Preserved from existing config
  - "AutoDocs":
      - "module_name": "module_name_py.md"
      - "another_module": "another_module_py.md"
```

## Notes and Suggestions

### Best Practices

- **API Key Security**: Store the Anthropic API key in `.env` file, never commit to version control
- **Rate Limiting**: Consider adding delays between API calls for large projects
- **File Filtering**: Customize the `collect_python_files()` function to exclude additional patterns if needed

### Potential Improvements

- **Incremental Updates**: Only process files that have changed since last run
- **Configuration Options**: Add command-line flags for output directory and file filters
- **Error Recovery**: Implement retry logic for failed API calls
- **Progress Indicators**: Add progress bars for large projects

### Limitations

- **API Dependency**: Requires active internet connection and valid Anthropic API key
- **Token Limits**: Large files may exceed Claude's token limits (currently set to 1500 max tokens)
- **File Overwrites**: Regenerates all documentation on each run, losing manual edits

### Security Considerations

- Store API keys securely using environment variables
- Review generated documentation before deployment
- Consider implementing input validation for file paths

## Error Handling

The script includes basic error handling:

- Continues processing remaining files if one fails
- Provides clear error messages with file names
- Exits gracefully if no Python files are found

```python
# Example error output
❌ Error processing src/broken_file.py: SyntaxError: invalid syntax
✅ Documented: src/working_file.py → src_working_file_py.md
```