<!-- Auto-generated by Claude on 2025-06-22 09:20 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python script that automates the creation of project changelogs by analyzing recent Git commit messages and generating human-readable release notes using Claude AI. The script fetches commit history, sends it to Claude for summarization, and outputs formatted documentation.

## Purpose

- **Automate changelog creation** from Git commit messages
- **Generate readable release notes** using AI-powered summarization
- **Maintain consistent documentation** with timestamps and structured formatting
- **Save time** by eliminating manual changelog writing

## Dependencies

The script requires the following packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Environment Variables

- `ANTHROPIC_API_KEY` - Your Anthropic API key for Claude access
- `ANTHROPIC_MODEL` (optional) - Claude model to use (defaults to `claude-sonnet-4-20250514`)

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages from the repository.

**Parameters:**
- `n` (int): Number of recent commits to retrieve (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update README documentation
```

**Error handling:** Returns `"# No commits found"` if Git operations fail.

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to summarize commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Requests markdown formatting
- Suggests categorization (Features, Fixes, Improvements)
- Provides clear context for AI processing

### `main()`

Main execution function that orchestrates the changelog generation process.

**Process flow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Query Claude for summarization
6. Write formatted changelog to file

**Output:** Creates/overwrites `docs/changelog.md` with generated content

## Output Format

The generated changelog includes:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

[AI-generated summary organized by categories]
```

## Usage

### Basic Execution

```bash
python changelog_generator.py
```

### Prerequisites

1. **Set up environment variables:**
   ```bash
   # Create .env file
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514  # optional
   ```

2. **Ensure Git repository:** Script must run in a Git repository with commit history

3. **Create docs directory:** Ensure `docs/` directory exists for output

## Configuration Notes

### Model Selection
- Default model: `claude-sonnet-4-20250514`
- Override via `ANTHROPIC_MODEL` environment variable
- Consider cost and performance trade-offs for different models

### Commit History Depth
- Default: 20 most recent commits
- Modify `get_git_log()` call in `main()` to adjust count
- Balance between comprehensive coverage and processing efficiency

## Suggestions for Improvement

### Error Handling
- [ ] Add validation for Anthropic API responses
- [ ] Implement retry logic for API failures
- [ ] Check for `docs/` directory existence before writing

### Features
- [ ] Support for date range filtering of commits
- [ ] Configuration file for customizable prompt templates
- [ ] Integration with CI/CD pipelines
- [ ] Support for multiple output formats (JSON, HTML)

### Code Quality
- [ ] Add type hints for better code documentation
- [ ] Implement logging instead of print statements
- [ ] Add command-line argument parsing
- [ ] Create unit tests for core functions

## Security Considerations

‚ö†Ô∏è **Important:** Keep your `ANTHROPIC_API_KEY` secure and never commit it to version control. Use environment variables or secure secret management systems.

## Troubleshooting

| Issue | Solution |
|-------|----------|
| "No commits found" | Ensure you're in a Git repository with commit history |
| API key errors | Verify `ANTHROPIC_API_KEY` is set correctly |
| File write errors | Check that `docs/` directory exists and is writable |
| Model not found | Verify the model name in `ANTHROPIC_MODEL` is valid |