<!-- Auto-generated by Claude on 2025-06-22 06:28 -->

# Changelog Generator

## Overview

This Python script automatically generates changelog documentation by analyzing recent Git commit messages and using Claude AI to create human-readable release notes. The tool extracts commit history, processes it through Anthropic's Claude API, and outputs a formatted changelog in Markdown format.

## Purpose

- **Automate changelog creation** from Git commit messages
- **Generate human-readable release notes** using AI summarization
- **Maintain consistent documentation** in `docs/changelog.md`
- **Save developer time** by eliminating manual changelog writing

## Dependencies

The script requires the following packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required installations:**
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to retrieve (default: 20)

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation for API endpoints
```

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to process commit messages into changelog format.

**Parameters:**
- `git_log` (str): Raw commit messages from Git

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Instructs AI to categorize changes (Features, Fixes, Improvements)
- Requests Markdown formatting
- Provides context for changelog generation

### `main()`

Main execution function that orchestrates the changelog generation process.

**Process flow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Request changelog from Claude
6. Write formatted output to file

## Configuration

### Environment Variables

Create a `.env` file with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key for Claude access

**Optional:**
- `ANTHROPIC_MODEL`: Claude model version (defaults to `claude-sonnet-4-20250514`)

### Output Configuration

- **Output file**: `docs/changelog.md`
- **Format**: Markdown with timestamp
- **Max tokens**: 1000 (configurable in code)

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Integration Examples

**Git Hook (post-commit):**
```bash
#!/bin/bash
python /path/to/changelog_generator.py
```

**CI/CD Pipeline:**
```yaml
- name: Generate Changelog
  run: python scripts/changelog_generator.py
```

## Output Format

The generated changelog includes:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- API rate limiting implementation

## Fixes  
- Resolved database connection issues
- Fixed memory leak in data processing

## Improvements
- Enhanced error handling
- Updated documentation
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens
- **Git Dependency**: Requires Git repository with commit history
- **Directory Structure**: Assumes `docs/` directory exists

### üîß Potential Improvements

1. **Error Handling**: Add more robust error handling for API failures
2. **Commit Filtering**: Filter out merge commits or specific patterns
3. **Date Range**: Add options for specific date ranges instead of commit count
4. **Configuration File**: Use YAML/JSON config for customizable settings
5. **Multiple Formats**: Support for different output formats (JSON, HTML)

### üí° Usage Tips

- **Commit Message Quality**: Better commit messages produce better changelogs
- **Frequency**: Run regularly (daily/weekly) for manageable changelog sizes
- **Review Output**: Always review AI-generated content before publishing
- **Backup**: Consider version control for changelog history

### üöÄ Extension Ideas

```python
# Add date range filtering
def get_git_log_since(since_date: str, n=20):
    return subprocess.check_output([
        "git", "log", f"--since={since_date}", 
        f"--pretty=format:* %s", f"-n", str(n)
    ]).decode()

# Add commit categorization
def categorize_commits(commits: list):
    # Logic to auto-categorize commits by keywords
    pass
```

This tool streamlines the changelog creation process while maintaining professional documentation standards through AI assistance.