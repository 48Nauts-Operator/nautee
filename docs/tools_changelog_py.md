<!-- Auto-generated by Claude on 2025-06-08 06:28 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI model to intelligently summarize recent commit messages into organized, human-readable release notes.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Extracting recent Git commit messages
- Using AI to categorize and summarize changes
- Generating a formatted Markdown changelog file
- Maintaining consistent documentation standards

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required packages:**
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

## Core Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages with bullet points

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

**Error handling:** Returns "# No commits found" if Git command fails.

### `format_prompt(git_log: str)`

Creates an AI prompt for Claude to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git log output

**Returns:**
- `str`: Formatted prompt instructing Claude to categorize commits into sections like "Features", "Fixes", "Improvements"

### `main()`

The primary execution function that orchestrates the changelog generation process:

1. **Environment Setup**: Loads API credentials from `.env` file
2. **Git Data Extraction**: Fetches recent commit messages
3. **AI Processing**: Sends commits to Claude for summarization
4. **File Generation**: Writes formatted changelog to `docs/changelog.md`

## Configuration

### Environment Variables

Create a `.env` file with the following variables:

```bash
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

### Output Configuration

- **Output path**: `docs/changelog.md` (hardcoded)
- **Model**: Defaults to `claude-sonnet-4-20250514`
- **Token limit**: 1000 tokens maximum

## Usage

```bash
python changelog_generator.py
```

### Sample Output

The generated changelog follows this structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added user authentication system
- Implemented dark mode toggle

## Fixes  
- Resolved database connection timeout issues
- Fixed CSS layout problems on mobile

## Improvements
- Enhanced error handling
- Updated documentation
```

## Notes and Suggestions

### Security Considerations
- üîí **API Key Safety**: Ensure your `.env` file is added to `.gitignore`
- üîí **Repository Access**: Script requires read access to Git repository

### Limitations
- **Git Dependency**: Must be run from within a Git repository
- **API Costs**: Each run consumes Claude API tokens
- **Fixed Output Path**: Currently hardcoded to `docs/changelog.md`

### Potential Improvements

1. **Configurable Parameters**:
   ```python
   # Add command-line arguments for:
   # - Number of commits
   # - Output file path  
   # - Date range filtering
   ```

2. **Enhanced Error Handling**:
   ```python
   # Add validation for:
   # - Git repository existence
   # - API key validity
   # - Output directory permissions
   ```

3. **Incremental Updates**:
   ```python
   # Track last processed commit to avoid duplicates
   # Append new changes rather than overwriting
   ```

4. **Multiple Output Formats**:
   ```python
   # Support for JSON, HTML, or plain text output
   ```

### Best Practices

- Run this tool as part of your CI/CD pipeline
- Review generated changelogs before publishing
- Maintain consistent commit message formatting for better AI interpretation
- Consider rate limiting if running frequently