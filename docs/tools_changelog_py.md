<!-- Auto-generated by Claude on 2025-06-22 18:24 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automates the creation of project changelogs by analyzing recent Git commit messages and generating human-readable release notes using Claude AI. The tool fetches commit history, processes it through Anthropic's Claude model, and outputs a formatted changelog in Markdown format.

## Purpose

- **Automate documentation**: Eliminates manual changelog creation
- **Improve readability**: Transforms raw commit messages into structured release notes
- **Maintain consistency**: Provides standardized changelog formatting across releases
- **Save time**: Reduces developer overhead for documentation tasks

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Official Anthropic API client
- `python-dotenv` - Environment variable management

## Key Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages from the repository.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Default is 20.

**Returns:**
- `str`: Formatted commit messages as bullet points

**Example Output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation for API endpoints
```

**Error Handling:**
- Returns `"# No commits found"` if Git operations fail
- Prints error message to console

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit log output

**Returns:**
- `str`: Formatted prompt with instructions for AI processing

**Prompt Structure:**
- Clear role definition for the AI assistant
- Formatting instructions (Markdown with sections)
- Suggested categorization (Features, Fixes, Improvements)

### `main()`

The primary execution function that orchestrates the changelog generation process.

**Process Flow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Request changelog from Claude
6. Write formatted output to file

## Configuration

### Environment Variables

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key

**Optional:**
- `ANTHROPIC_MODEL`: Claude model version (defaults to `claude-sonnet-4-20250514`)

## Output

The generated changelog is saved to `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Enhanced API endpoint documentation

## Fixes
- Resolved database connection timeouts
- Fixed memory leak in data processing

## Improvements
- Optimized query performance
- Updated error handling
```

## Usage

### Command Line Execution

```bash
python changelog_generator.py
```

### Integration Examples

```python
# Custom commit count
def generate_changelog_last_10():
    git_log = get_git_log(10)  # Only last 10 commits
    # ... rest of processing
```

## Requirements & Setup

1. **Git Repository**: Must be run within a Git repository
2. **API Access**: Valid Anthropic API key required
3. **Directory Structure**: Ensure `docs/` directory exists

```bash
# Install dependencies
pip install anthropic python-dotenv

# Create docs directory
mkdir -p docs

# Set up environment variables
echo "ANTHROPIC_API_KEY=your_key" > .env
```

## Notes & Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Claude API tokens
- **Rate Limits**: Be mindful of Anthropic's rate limiting
- **Git Dependency**: Requires Git to be installed and accessible via command line

### üîß Potential Improvements

- **Date Filtering**: Add support for commits since last release
- **Template Customization**: Allow custom changelog templates
- **Multiple Formats**: Support for different output formats (JSON, HTML)
- **Commit Filtering**: Exclude certain commit types (merge commits, etc.)
- **Error Recovery**: More robust error handling and retry logic

### üí° Usage Tips

- Run before each release to maintain up-to-date documentation
- Consider integrating into CI/CD pipelines
- Review generated content before publishing
- Customize the prompt for project-specific terminology

## Error Handling

The script includes basic error handling for:
- Git command failures
- Missing environment variables (handled by anthropic client)
- File write permissions

For production use, consider adding more comprehensive error handling and logging.