<!-- Auto-generated by Claude on 2025-06-22 13:27 -->

# Changelog Generator Documentation

## Overview

The Changelog Generator is a Python script that automates the creation of project changelogs by analyzing recent Git commit messages. It uses Anthropic's Claude AI to intelligently summarize and categorize commits into a well-formatted changelog document.

## Purpose

- **Automate changelog creation**: Eliminates manual effort in writing release notes
- **AI-powered summarization**: Uses Claude to transform raw commit messages into readable documentation
- **Consistent formatting**: Generates standardized changelog entries with proper categorization
- **Version control integration**: Directly reads from Git history to ensure accuracy

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Required API key for Claude access
- `ANTHROPIC_MODEL` - Optional model specification (defaults to `claude-sonnet-4-20250514`)

## Functions

### `get_git_log(n=20)`

Retrieves recent commit messages from the Git repository.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages as bullet points

**Error Handling:**
- Returns `"# No commits found"` if Git command fails
- Prints error message to console

```python
# Example output format:
* Add user authentication feature
* Fix database connection timeout
* Update README documentation
```

### `format_prompt(git_log: str)`

Creates an AI prompt for summarizing commit messages into changelog format.

**Parameters:**
- `git_log` (str): Raw commit messages from Git

**Returns:**
- `str`: Formatted prompt for Claude AI

**Features:**
- Instructs AI to use markdown formatting
- Requests categorization (Features, Fixes, Improvements)
- Provides clear context for changelog generation

### `main()`

Orchestrates the entire changelog generation process.

**Process Flow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Request changelog from Claude
6. Write formatted output to file

**Output:**
- Creates `docs/changelog.md` with timestamp and AI-generated content

## Usage

### Prerequisites

1. **Environment Setup:**
   ```bash
   # Create .env file
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
   ```

2. **Directory Structure:**
   ```
   project/
   ‚îú‚îÄ‚îÄ docs/           # Must exist for output
   ‚îú‚îÄ‚îÄ .env
   ‚îî‚îÄ‚îÄ changelog_generator.py
   ```

### Running the Script

```bash
python changelog_generator.py
```

### Expected Output

The script generates a file at `docs/changelog.md` with content like:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added user authentication system
- Implemented API rate limiting

## Fixes  
- Resolved database connection timeout issues
- Fixed memory leak in data processing

## Improvements
- Enhanced error handling throughout application
- Updated documentation and examples
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Claude API tokens; monitor usage for frequent executions
- **Git Repository**: Must be run from within a Git repository with commit history
- **File Permissions**: Ensure write access to `docs/` directory

### üîß Potential Improvements

1. **Incremental Updates**: Track last processed commit to avoid reprocessing
   ```python
   # Add commit hash tracking
   def get_commits_since(last_hash):
       # Implementation needed
   ```

2. **Configuration File**: Replace hardcoded values with config file
   ```yaml
   # config.yaml
   output_path: "docs/changelog.md"
   commit_count: 20
   categories: ["Features", "Fixes", "Improvements"]
   ```

3. **Error Recovery**: Add retry logic for API failures
   ```python
   import time
   
   def call_claude_with_retry(client, prompt, max_retries=3):
       # Implementation with exponential backoff
   ```

4. **Commit Filtering**: Exclude commits with specific patterns
   ```python
   # Filter out merge commits, version bumps, etc.
   def filter_commits(commits):
       return [c for c in commits if not c.startswith("Merge")]
   ```

### üöÄ Usage Tips

- **Commit Message Quality**: Better commit messages produce better changelogs
- **Regular Execution**: Run before releases for most relevant summaries  
- **Manual Review**: Always review AI-generated content before publishing
- **Backup**: Consider versioning changelog files for historical tracking