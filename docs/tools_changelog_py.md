<!-- Auto-generated by Claude on 2025-06-02 01:47 -->

# Changelog Generator Documentation

## Overview

The Changelog Generator is a Python utility that automatically creates formatted changelogs by analyzing recent Git commit messages. It leverages Claude AI (Anthropic's language model) to intelligently summarize and categorize commits into readable release notes.

## Purpose

- **Automate changelog creation** from Git commit history
- **Generate human-readable summaries** of recent code changes
- **Organize commits** into logical categories (Features, Fixes, Improvements)
- **Save time** by eliminating manual changelog writing

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Anthropic's Python SDK for Claude AI
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` (required) - Your Anthropic API key
- `ANTHROPIC_MODEL` (optional) - Claude model to use (defaults to `claude-sonnet-4-20250514`)

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to process the commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for the AI

### `main()`

The primary function that orchestrates the entire changelog generation process:

1. **Load environment variables** from `.env` file
2. **Initialize Anthropic client** with API credentials
3. **Fetch Git commits** using `get_git_log()`
4. **Generate AI summary** via Claude API
5. **Write formatted changelog** to `docs/changelog.md`

## Output Format

The generated changelog includes:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Dashboard analytics integration

## Fixes
- Resolved database connection issues
- Fixed mobile responsive layout

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Setup Requirements

1. **Create `.env` file:**
   ```env
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514
   ```

2. **Ensure Git repository** is initialized and has commit history

3. **Create docs directory** (if it doesn't exist):
   ```bash
   mkdir -p docs
   ```

## Configuration Notes

### Model Selection
- Default model: `claude-sonnet-4-20250514`
- Can be customized via `ANTHROPIC_MODEL` environment variable
- Consider model capabilities and API costs when choosing

### Output Location
- Fixed output path: `docs/changelog.md`
- File is overwritten on each run (not appended)

## Suggestions & Improvements

### ‚ö†Ô∏è Current Limitations

- **No error handling** for missing environment variables
- **Fixed output path** - not configurable
- **Overwrites existing changelog** instead of appending
- **No commit filtering** by date range or author

### üîß Recommended Enhancements

1. **Add error handling:**
   ```python
   if not os.getenv("ANTHROPIC_API_KEY"):
       raise ValueError("ANTHROPIC_API_KEY environment variable is required")
   ```

2. **Make output path configurable:**
   ```python
   output_path = os.getenv("CHANGELOG_PATH", "docs/changelog.md")
   ```

3. **Add date range filtering:**
   ```python
   def get_git_log(n=20, since=None):
       cmd = ["git", "log", f"--pretty=format:* %s", f"-n", str(n)]
       if since:
           cmd.extend(["--since", since])
   ```

4. **Implement changelog versioning** instead of overwriting

5. **Add command-line argument support** for better flexibility

### üí° Usage Tips

- **Run regularly** (e.g., before releases) to maintain up-to-date changelogs
- **Use meaningful commit messages** for better AI summaries
- **Review generated output** before publishing
- **Consider integrating** into CI/CD pipelines for automation