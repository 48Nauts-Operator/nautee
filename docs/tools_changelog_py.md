<!-- Auto-generated by Claude on 2025-06-02 05:21 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It uses Anthropic's Claude AI model to intelligently summarize and categorize recent commit messages into readable release notes.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Fetching recent Git commit messages
- Using AI to summarize and organize commits into logical categories
- Generating a formatted Markdown changelog file
- Maintaining a consistent documentation structure

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
- `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update README documentation
```

### `format_prompt(git_log: str)`

Creates an AI prompt for summarizing commit messages into structured changelog format.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt instructing Claude to categorize commits into sections like 'Features', 'Fixes', 'Improvements'

### `main()`

The primary function that orchestrates the changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Sends formatted prompt to Claude
5. Writes AI response to `docs/changelog.md`

## Output

The generated changelog is saved to `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added new user authentication system
- Implemented dark mode toggle

## Fixes  
- Fixed database connection timeout issues
- Resolved navigation menu bug

## Improvements
- Updated documentation
- Optimized performance
```

## Usage

### Setup

1. Install required dependencies:
   ```bash
   pip install anthropic python-dotenv
   ```

2. Create a `.env` file with your API key:
   ```bash
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514  # optional
   ```

3. Ensure you're in a Git repository with commit history

### Running the Script

```bash
python changelog_generator.py
```

## Notes and Suggestions

### ‚úÖ Strengths
- **Automated workflow** - Saves manual changelog writing time
- **AI-powered categorization** - Intelligently organizes commits
- **Configurable** - Adjustable commit count and model selection
- **Error handling** - Graceful fallback for Git command failures

### ‚ö†Ô∏è Considerations

- **API costs** - Each run consumes Anthropic API tokens
- **Commit message quality** - Output quality depends on descriptive commit messages
- **Directory structure** - Assumes `docs/` directory exists
- **Git dependency** - Requires Git to be installed and accessible

### üîß Suggested Improvements

1. **Add file existence check:**
   ```python
   os.makedirs("docs", exist_ok=True)
   ```

2. **Implement commit filtering by date range:**
   ```python
   def get_git_log_since(days=7):
       return subprocess.check_output([
           "git", "log", f"--since={days}.days.ago", "--pretty=format:* %s"
       ]).decode()
   ```

3. **Add configuration file support** for customizable templates and output paths

4. **Include error handling** for API failures and network issues

5. **Add dry-run mode** to preview output before writing to file

## Error Handling

The script includes basic error handling for:
- Git command failures (returns fallback message)
- Missing environment variables (Anthropic client handles this)

Consider adding more robust error handling for production use.