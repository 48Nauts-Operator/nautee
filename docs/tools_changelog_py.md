<!-- Auto-generated by Claude on 2025-06-01 17:16 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It uses Anthropic's Claude AI model to intelligently summarize and categorize recent commit messages into readable release notes.

## Purpose

This tool automates the process of:
- Extracting recent Git commit messages
- Using AI to summarize and categorize changes
- Generating a well-formatted changelog in Markdown
- Saving the output to `docs/changelog.md`

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to retrieve. Default is 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails.

**Example Output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str) -> str`

Creates a structured prompt for the Claude AI model to process commit messages.

**Parameters:**
- `git_log` (str): Raw commit messages from Git

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

### `main()`

The primary function that orchestrates the changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Sends formatted prompt to Claude AI
5. Writes the generated changelog to file

## Configuration

### Environment Variables

Create a `.env` file in your project root with:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key for Claude access

**Optional:**
- `ANTHROPIC_MODEL`: Claude model to use (defaults to `claude-sonnet-4-20250514`)

### Output Configuration

- **Output Path**: `docs/changelog.md`
- **Max Tokens**: 1000 (for AI response)
- **Encoding**: UTF-8

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Prerequisites

1. Ensure you're in a Git repository
2. Have the required Python packages installed:
   ```bash
   pip install anthropic python-dotenv
   ```
3. Set up your `.env` file with valid Anthropic API key

## Output Format

The generated changelog includes:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Added API rate limiting

## Fixes  
- Resolved database timeout issues
- Fixed memory leak in background tasks

## Improvements
- Enhanced error handling
- Updated documentation
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens
- **Git Dependency**: Requires Git to be installed and accessible via command line
- **Directory Structure**: Assumes `docs/` directory exists

### üîß Potential Improvements

1. **Error Handling**: Add more robust error handling for API failures
2. **Configuration**: Make output path and commit count configurable
3. **Incremental Updates**: Track last processed commit to avoid regenerating entire changelog
4. **Formatting Options**: Add templates for different changelog formats
5. **Integration**: Add CI/CD integration capabilities

### üí° Usage Tips

- Run before releases to generate up-to-date changelogs
- Customize the prompt in `format_prompt()` for different categorization styles
- Consider running with different commit counts (`n` parameter) for major vs. minor releases
- Review and edit the generated changelog before publishing

### üö® Security Notes

- Keep your `ANTHROPIC_API_KEY` secure and never commit it to version control
- Consider using different API keys for development and production environments