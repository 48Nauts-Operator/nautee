<!-- Auto-generated by Claude on 2025-06-23 03:26 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI to intelligently summarize recent commit messages into organized, human-readable release notes.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Fetching recent Git commit messages
- Using AI to categorize and summarize changes
- Generating a formatted Markdown changelog file
- Saving the output to `docs/changelog.md`

## Dependencies

The script requires the following Python packages:
- `anthropic` - For Claude AI integration
- `python-dotenv` - For environment variable management
- `subprocess` - For Git command execution (built-in)
- `datetime` - For timestamp generation (built-in)
- `os` - For environment variable access (built-in)

## Environment Variables

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails.

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str) -> str`

Creates a structured prompt for the Claude AI model to generate organized changelog entries.

**Parameters:**
- `git_log` (str): Raw Git commit messages from `get_git_log()`

**Returns:**
- `str`: Formatted prompt instructing Claude to categorize commits into sections like Features, Fixes, and Improvements.

### `main()`

The primary function that orchestrates the entire changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Sends prompt to Claude AI
5. Writes formatted changelog to file

## Output Format

The generated changelog follows this structure:

```markdown
# 📝 Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Added dark mode support

## Fixes  
- Resolved database connection issues
- Fixed responsive design bugs

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Integration with CI/CD

Add this script to your deployment pipeline to automatically update changelogs:

```yaml
# Example GitHub Actions step
- name: Generate Changelog
  run: python changelog_generator.py
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

## Notes and Suggestions

### ⚠️ Important Considerations

- **API Key Security**: Never commit your `ANTHROPIC_API_KEY` to version control. Use environment variables or CI/CD secrets.
- **Rate Limits**: Be mindful of Anthropic's API rate limits when running frequently.
- **Git Repository**: This script must be run from within a Git repository with commit history.

### 🔧 Potential Improvements

1. **Error Handling**: Add more robust error handling for network issues and API failures.
2. **Configuration**: Allow customization of output path and commit count via command-line arguments.
3. **Incremental Updates**: Track last processed commit to avoid regenerating the entire changelog.
4. **Commit Filtering**: Add options to filter commits by author, date range, or commit type.

### 📝 Best Practices

- **Commit Messages**: Use clear, descriptive commit messages for better AI summarization.
- **Regular Updates**: Run the script regularly to keep changelogs current.
- **Manual Review**: Always review AI-generated content before publishing.
- **Backup**: Consider backing up existing changelog files before overwriting.

## File Structure

```
project/
├── .env                    # Environment variables
├── changelog_generator.py  # This script
├── docs/
│   └── changelog.md       # Generated output
└── requirements.txt       # Dependencies
```

## Error Handling

The script includes basic error handling for Git command failures but may need enhancement for production use. Common issues include:

- Missing Git repository
- Invalid API credentials
- Network connectivity problems
- Insufficient API quota