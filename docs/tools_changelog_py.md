<!-- Auto-generated by Claude on 2025-06-01 10:20 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python automation tool that creates formatted changelogs by analyzing recent Git commit messages. It leverages Anthropic's Claude AI to intelligently summarize and categorize commits into readable release notes.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Fetching recent Git commit messages
- Using AI to categorize and summarize changes
- Generating a properly formatted markdown changelog
- Automatically updating documentation

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
- `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages as bullet points

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update README documentation
```

**Error handling:** Returns `"# No commits found"` if Git command fails.

### `format_prompt(git_log: str)`

Creates an AI prompt to transform raw commit messages into structured release notes.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt for Claude AI

The prompt instructs Claude to:
- Categorize changes into sections (Features, Fixes, Improvements)
- Use proper markdown formatting
- Create clear, readable summaries

### `main()`

The primary function that orchestrates the entire changelog generation process:

1. **Load environment variables** from `.env` file
2. **Initialize Anthropic client** with API key
3. **Fetch Git commits** using `get_git_log()`
4. **Generate AI prompt** with commit data
5. **Query Claude AI** for changelog summary
6. **Write formatted output** to `docs/changelog.md`

## Output Format

The generated changelog includes:
- **Header**: `# üìù Changelog`
- **Timestamp**: Last updated date and time
- **AI-generated content**: Categorized and summarized changes

## Usage

### Setup

1. Install required dependencies:
```bash
pip install anthropic python-dotenv
```

2. Create a `.env` file with your API key:
```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # optional
```

3. Ensure you're in a Git repository with commit history

### Running the Tool

```bash
python changelog_generator.py
```

**Expected output:**
```
‚úÖ Changelog written to docs/changelog.md
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **Git Repository Required**: Must be run from within a Git repository
- **API Costs**: Each run consumes Anthropic API tokens
- **File Overwrite**: Completely rewrites `docs/changelog.md` on each run

### üîß Potential Improvements

1. **Incremental Updates**: Append new entries instead of overwriting
2. **Commit Range Selection**: Allow custom date ranges or tag-based filtering
3. **Configuration File**: Support for customizable output templates
4. **Error Recovery**: Better handling of network/API failures
5. **Commit Filtering**: Exclude merge commits or commits matching certain patterns

### üí° Usage Tips

- Run after significant development milestones
- Review and edit the generated changelog before publishing
- Consider running with different commit counts (`n` parameter) for different release scopes
- Ensure meaningful commit messages for better AI summaries

### üìÅ Directory Structure

```
project/
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ changelog.md          # Generated output
‚îú‚îÄ‚îÄ .env                      # API configuration
‚îî‚îÄ‚îÄ changelog_generator.py    # This script
```