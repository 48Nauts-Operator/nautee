<!-- Auto-generated by Claude on 2025-06-01 15:19 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelog documentation by analyzing recent Git commit messages. It leverages Anthropic's Claude AI to intelligently summarize commits into human-readable release notes and outputs them as a structured Markdown file.

## Purpose

- **Automate changelog creation** from Git commit history
- **Generate human-readable summaries** using AI instead of raw commit messages
- **Maintain consistent documentation** with standardized formatting
- **Save developer time** by eliminating manual changelog writing

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
- `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

## Key Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update README documentation
```

### `format_prompt(git_log: str)`

Creates an AI prompt for Claude to transform raw commit messages into structured release notes.

**Parameters:**
- `git_log` (str): Raw commit messages from Git

**Returns:**
- `str`: Formatted prompt with instructions for the AI model

### `main()`

The primary execution function that orchestrates the entire changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI prompt
5. Calls Claude API for summarization
6. Writes formatted changelog to file

## Output

The script generates a changelog file at `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added new user authentication system
- Implemented dashboard analytics

## Fixes  
- Resolved database connection issues
- Fixed memory leak in data processing

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Basic Execution

```bash
python changelog_generator.py
```

### Setup Requirements

1. **Install dependencies:**
   ```bash
   pip install anthropic python-dotenv
   ```

2. **Create `.env` file:**
   ```env
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514  # optional
   ```

3. **Ensure `docs/` directory exists** in your project root

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Key Security**: Store your Anthropic API key securely in environment variables, never commit it to version control
- **Git Repository**: Script must be run within a Git repository with commit history
- **Directory Structure**: Ensure `docs/` directory exists before running

### üîß Potential Improvements

1. **Error Handling Enhancement**
   ```python
   # Add more robust error handling for API calls
   try:
       response = client.messages.create(...)
   except anthropic.APIError as e:
       print(f"‚ùå API Error: {e}")
       return
   ```

2. **Configurable Output Path**
   ```python
   # Allow custom output location
   output_path = os.getenv("CHANGELOG_PATH", "docs/changelog.md")
   ```

3. **Date Range Filtering**
   ```python
   # Add option to generate changelog for specific date ranges
   def get_git_log_since(since_date: str):
       return subprocess.check_output([
           "git", "log", f"--since={since_date}", "--pretty=format:* %s"
       ]).decode()
   ```

4. **Multiple Format Support**
   - Add options for different output formats (JSON, HTML, etc.)
   - Support for different changelog standards (Keep a Changelog, etc.)

### üöÄ Usage Tips

- **Run regularly** as part of your CI/CD pipeline
- **Review generated content** before publishing
- **Customize the prompt** in `format_prompt()` to match your project's style
- **Adjust commit count** (`n` parameter) based on your release frequency