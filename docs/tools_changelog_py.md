<!-- Auto-generated by Claude on 2025-06-01 18:24 -->

# Changelog Generator Documentation

## Overview

The Changelog Generator is a Python utility that automatically creates formatted changelogs by analyzing recent Git commit messages. It leverages Anthropic's Claude AI model to intelligently summarize and categorize commits into readable release notes.

## Purpose

This tool automates the tedious process of creating changelogs by:
- Fetching recent Git commit messages
- Using AI to summarize and categorize changes
- Generating a well-formatted markdown changelog
- Automatically updating documentation with timestamps

## Dependencies

The script requires the following Python packages:
- `anthropic` - For Claude AI integration
- `python-dotenv` - For environment variable management
- `subprocess` - For Git command execution (built-in)
- `datetime` - For timestamp generation (built-in)
- `os` - For environment variable access (built-in)

## Environment Variables

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default value
```

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using Git CLI commands.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation for API endpoints
```

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

### `main()`

The primary function that orchestrates the entire changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit messages
4. Sends formatted prompt to Claude AI
5. Processes AI response
6. Writes formatted changelog to file

## Output

The script generates a changelog file at `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Added API rate limiting

## Fixes  
- Resolved database connection issues
- Fixed memory leak in image processing

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Integration with CI/CD

This script can be integrated into your CI/CD pipeline to automatically update changelogs on releases:

```yaml
# Example GitHub Actions workflow
- name: Generate Changelog
  run: python changelog_generator.py
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

## Important Notes

### Security Considerations
- ‚ö†Ô∏è **Never commit your `.env` file** - Add it to `.gitignore`
- Store API keys securely using your platform's secret management system
- Consider using environment-specific API keys for different deployment stages

### Error Handling
- The script includes basic error handling for Git command failures
- If Git log retrieval fails, it defaults to "No commits found"
- Consider adding more robust error handling for production use

### Limitations
- Requires Git repository with commit history
- Depends on external Anthropic API (requires internet connection)
- Output quality depends on commit message quality
- Limited to 1000 tokens for AI response (configurable)

## Suggestions for Improvement

### Enhanced Features
- Add support for date range filtering (e.g., changes since last release)
- Implement commit categorization based on conventional commit patterns
- Add configuration file support for customizable output formats
- Include author information and commit hashes in detailed view

### Error Handling
```python
# Example improved error handling
try:
    response = client.messages.create(...)
except anthropic.APIError as e:
    print(f"‚ùå Anthropic API error: {e}")
    return
except Exception as e:
    print(f"‚ùå Unexpected error: {e}")
    return
```

### Configuration Options
Consider adding a configuration file (`config.yaml`) for:
- Number of commits to analyze
- Output file path
- Custom prompt templates
- Changelog format preferences

## File Structure Requirements

Ensure your project has the following structure:
```
project-root/
‚îú‚îÄ‚îÄ .env                    # Environment variables (don't commit!)
‚îú‚îÄ‚îÄ .gitignore             # Should include .env
‚îú‚îÄ‚îÄ changelog_generator.py # This script
‚îú‚îÄ‚îÄ docs/                  # Will be created if doesn't exist
‚îÇ   ‚îî‚îÄ‚îÄ changelog.md       # Generated output
‚îî‚îÄ‚îÄ requirements.txt       # Python dependencies
```