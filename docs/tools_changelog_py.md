<!-- Auto-generated by Claude on 2025-06-22 14:17 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python script that automates the creation of project changelogs by leveraging AI-powered summarization. It fetches recent Git commit messages, processes them through Anthropic's Claude AI model, and generates a well-formatted changelog in Markdown format.

## Purpose

This tool serves to:
- **Automate changelog creation** from Git commit history
- **Generate human-readable release notes** using AI summarization
- **Maintain consistent documentation** with standardized formatting
- **Save development time** by eliminating manual changelog writing

## Dependencies

The script requires the following packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required installations:**
```bash
pip install anthropic python-dotenv
```

## Environment Configuration

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails

**Usage:**
```python
commits = get_git_log(10)  # Get last 10 commits
```

### `format_prompt(git_log: str)`

Creates a structured prompt for the AI model to generate changelog content.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Provides clear instructions for markdown formatting
- Suggests organizational sections (Features, Fixes, Improvements)
- Maintains consistent prompt structure

### `main()`

The primary execution function that orchestrates the changelog generation process.

**Process Flow:**
1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI prompt
5. Calls Claude API for summarization
6. Writes formatted changelog to file

## Output

The script generates a changelog file at `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

[AI-generated content organized by categories]
```

## Usage

### Basic Execution

```bash
python changelog_generator.py
```

### Integration Examples

**As part of CI/CD pipeline:**
```yaml
- name: Generate Changelog
  run: python scripts/changelog_generator.py
```

**Custom commit count:**
```python
# Modify the main() function
git_log = get_git_log(50)  # Get last 50 commits
```

## Notes and Recommendations

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens; monitor usage for cost control
- **Git Repository**: Script must be run within a Git repository with commit history
- **Directory Structure**: Ensures `docs/` directory exists before running

### üîß Suggested Improvements

1. **Error Handling**: Add more robust error handling for API failures
2. **Configuration**: Make output path and commit count configurable via command-line arguments
3. **Validation**: Add checks for required environment variables
4. **Logging**: Implement proper logging instead of print statements
5. **Git Integration**: Add support for commit ranges (e.g., between releases)

### üí° Enhancement Ideas

```python
# Example: Command-line argument support
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--commits', type=int, default=20)
parser.add_argument('--output', default='docs/changelog.md')
args = parser.parse_args()
```

### üîê Security Best Practices

- Store API keys securely using environment variables
- Add `.env` to `.gitignore` to prevent accidental commits
- Consider using secret management tools in production environments

## Troubleshooting

**Common Issues:**

| Issue | Solution |
|-------|----------|
| `git` command not found | Ensure Git is installed and in system PATH |
| API key errors | Verify `ANTHROPIC_API_KEY` is set correctly |
| Permission errors | Check write permissions for `docs/` directory |
| Empty changelog | Verify repository has recent commits |