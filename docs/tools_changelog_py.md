<!-- Auto-generated by Claude on 2025-06-22 03:25 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI to intelligently summarize recent commit messages into readable release notes and outputs them as a structured Markdown file.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Extracting recent Git commit messages
- Using AI to categorize and summarize changes
- Generating professional, readable release notes
- Maintaining consistent changelog formatting

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
- `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Features:**
- Uses bullet-point formatting (`* %s`)
- Includes error handling for Git command failures
- Returns fallback message if no commits are found

```python
# Example output format:
* Add user authentication feature
* Fix database connection timeout
* Update README documentation
```

### `format_prompt(git_log: str)`

Creates an AI prompt for summarizing commit messages into structured changelog sections.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt for Claude AI

**Prompt Structure:**
- Instructs AI to categorize changes (Features, Fixes, Improvements)
- Requests Markdown formatting
- Provides context for changelog generation

### `main()`

The primary execution function that orchestrates the changelog generation process.

**Workflow:**
1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI prompt
5. Calls Claude API for summarization
6. Writes formatted changelog to file

## Output

The generated changelog is saved to `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Dashboard analytics integration

## Fixes
- Resolved database timeout issues
- Fixed responsive design bugs

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Basic Execution
```bash
python changelog_generator.py
```

### Prerequisites
1. Set up environment variables in `.env` file:
   ```
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514  # optional
   ```

2. Ensure you're in a Git repository with commit history

3. Create `docs/` directory if it doesn't exist

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens; monitor usage for cost management
- **Git Dependency**: Requires Git to be installed and accessible via command line
- **Network Requirement**: Needs internet connection for API calls

### üîß Potential Improvements

1. **Error Handling**: Add more robust error handling for API failures
2. **Configuration**: Make commit count and output path configurable
3. **Caching**: Implement caching to avoid regenerating identical changelogs
4. **Git Integration**: Add support for specific date ranges or tag-based filtering
5. **Template Customization**: Allow custom changelog templates

### üí° Usage Tips

- Run this tool as part of your CI/CD pipeline before releases
- Consider using different commit count values for different release types
- Review generated changelogs before publishing to ensure accuracy
- Use conventional commit messages for better AI categorization

### üö® Security Notes

- Store API keys securely using environment variables
- Consider using API key rotation for production environments
- Review generated content before publishing, as AI output may need human verification