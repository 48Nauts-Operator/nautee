<!-- Auto-generated by Claude on 2025-06-02 03:21 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit messages using Anthropic's Claude AI. It fetches recent commit history, processes it through Claude for intelligent summarization, and outputs a well-formatted changelog in Markdown format.

## Purpose

This tool automates the tedious process of writing release notes by:
- Extracting recent Git commit messages
- Using AI to intelligently categorize and summarize changes
- Generating professional, readable changelog documentation
- Maintaining consistent formatting and structure

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Anthropic's Python client for Claude API
- `python-dotenv` - Environment variable management

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages from the repository.

**Parameters:**
- `n` (int, optional): Number of recent commits to retrieve. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages or error message

**Features:**
- Uses `git log --pretty=format:* %s` for clean bullet-point formatting
- Handles errors gracefully with fallback message
- Configurable commit count

```python
# Example usage
recent_commits = get_git_log(10)  # Get last 10 commits
```

### `format_prompt(git_log: str)`

Creates an AI prompt for Claude to process commit messages into structured changelog format.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt for Claude API

**Features:**
- Instructs Claude to use proper Markdown formatting
- Requests categorization into sections (Features, Fixes, Improvements)
- Provides clear context for changelog generation

### `main()`

Main execution function that orchestrates the changelog generation process.

**Process Flow:**
1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI prompt
5. Calls Claude API for summarization
6. Writes formatted changelog to file

## Configuration

### Environment Variables

Create a `.env` file with the following variables:

```bash
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

### Output Configuration

- **Output Path:** `docs/changelog.md`
- **Max Tokens:** 1000 (Claude API limit)
- **Encoding:** UTF-8

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Expected Output Structure

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added new user authentication system
- Implemented dark mode toggle

## Fixes
- Resolved database connection timeout issues
- Fixed responsive design on mobile devices

## Improvements
- Enhanced error handling throughout application
- Optimized database queries for better performance
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Key Security:** Ensure your `ANTHROPIC_API_KEY` is kept secure and not committed to version control
- **Git Repository:** This script must be run from within a Git repository
- **Directory Structure:** Ensure `docs/` directory exists before running

### üîß Potential Improvements

1. **Error Handling Enhancement**
   ```python
   # Add validation for API key existence
   if not os.getenv("ANTHROPIC_API_KEY"):
       raise ValueError("ANTHROPIC_API_KEY not found in environment")
   ```

2. **Configurable Output Path**
   ```python
   output_path = os.getenv("CHANGELOG_PATH", "docs/changelog.md")
   ```

3. **Append Mode Option**
   - Consider adding option to append to existing changelog rather than overwriting

4. **Date Range Filtering**
   - Add ability to generate changelog for specific date ranges or between tags

### üöÄ Usage Tips

- Run this script as part of your CI/CD pipeline for automated changelog generation
- Consider running before each release to maintain up-to-date documentation
- Review and edit the generated changelog as needed before publishing
- Use meaningful commit messages for better AI summarization results

### üìÅ File Structure Requirement

```
project-root/
‚îú‚îÄ‚îÄ .env                    # Environment variables
‚îú‚îÄ‚îÄ changelog_generator.py  # This script
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ changelog.md       # Generated output
‚îî‚îÄ‚îÄ .git/                  # Git repository
```