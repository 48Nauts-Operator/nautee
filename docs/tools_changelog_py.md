<!-- Auto-generated by Claude on 2025-06-23 04:34 -->

# Changelog Generator Documentation

## Overview

The Changelog Generator is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI to intelligently summarize and categorize recent commit messages into readable release notes.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Fetching recent Git commit messages
- Using AI to summarize and organize commits into logical categories
- Generating a properly formatted Markdown changelog file
- Saving time and ensuring consistent changelog formatting

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - For Claude AI API integration
- `python-dotenv` - For environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Required API key for Claude access
- `ANTHROPIC_MODEL` - Optional model specification (defaults to "claude-sonnet-4-20250514")

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit log data

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Instructs AI to use Markdown formatting
- Requests categorization into sections (Features, Fixes, Improvements)
- Provides clear context for changelog generation

### `main()`

The primary execution function that orchestrates the entire changelog generation process.

**Workflow:**
1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI prompt
5. Calls Claude API for summarization
6. Writes formatted changelog to file

## Output

The tool generates a changelog file at `docs/changelog.md` with:
- Header with emoji (üìù Changelog)
- Timestamp of generation
- AI-summarized and categorized commit information

## Usage

### Basic Execution
```bash
python changelog_generator.py
```

### Prerequisites
1. Set up environment variables in `.env` file:
```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
```

2. Ensure you're in a Git repository with commit history

## Notes and Suggestions

### ‚úÖ Strengths
- **Automated workflow** - Reduces manual changelog maintenance
- **AI-powered categorization** - Intelligently organizes commits
- **Error handling** - Gracefully handles Git command failures
- **Configurable** - Allows customization of commit count and model

### ‚ö†Ô∏è Considerations
- **API dependency** - Requires active Anthropic API key and internet connection
- **Git requirement** - Must be run in a valid Git repository
- **Cost implications** - API calls incur usage costs
- **Output overwriting** - Completely replaces existing changelog file

### üîß Improvement Suggestions

1. **Add append mode option**:
```python
def write_changelog(content, append=False):
    mode = "a" if append else "w"
    # Implementation
```

2. **Add commit filtering**:
```python
def get_git_log(n=20, since=None, exclude_patterns=None):
    # Filter by date range or exclude certain commit patterns
```

3. **Error recovery**:
```python
def main():
    try:
        # Main logic
    except anthropic.APIError as e:
        print(f"‚ùå API Error: {e}")
        # Fallback to basic formatting
```

4. **Configuration file support** for more complex settings

5. **Dry-run mode** to preview changes before writing

## File Structure

```
project/
‚îú‚îÄ‚îÄ changelog_generator.py
‚îú‚îÄ‚îÄ .env                    # API keys and configuration
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ changelog.md       # Generated output
```