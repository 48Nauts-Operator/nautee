<!-- Auto-generated by Claude on 2025-06-22 05:19 -->

# Changelog Generator Documentation

## Overview

This Python script automates the creation of project changelogs by analyzing recent Git commit messages and generating human-readable release notes using Claude AI. The tool fetches commit history, processes it through Anthropic's Claude API, and outputs a formatted changelog in Markdown format.

## Purpose

- **Automate Documentation**: Eliminates manual changelog creation by leveraging AI
- **Improve Readability**: Converts raw commit messages into organized, user-friendly release notes
- **Maintain Consistency**: Ensures changelog format remains consistent across releases
- **Save Time**: Reduces the overhead of maintaining project documentation

## Dependencies

The script requires the following Python packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Environment Variables

```bash
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default value
```

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages from the repository.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails

**Example Output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to generate organized release notes.

**Parameters:**
- `git_log` (str): Raw commit messages from Git

**Returns:**
- `str`: Formatted prompt with instructions for the AI model

### `main()`

Orchestrates the entire changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Sends formatted prompt to Claude API
5. Writes generated changelog to file

**Output Location:** `docs/changelog.md`

## Usage

### Basic Execution

```bash
python changelog_generator.py
```

### Prerequisites

1. **Git Repository**: Must be run within a Git repository
2. **API Key**: Valid Anthropic API key in environment variables
3. **Directory Structure**: Ensure `docs/` directory exists or script will create it

### Setup

1. Install required packages:
   ```bash
   pip install anthropic python-dotenv
   ```

2. Create `.env` file:
   ```bash
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514
   ```

3. Run the script:
   ```bash
   python changelog_generator.py
   ```

## Output Format

The generated changelog follows this structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Advanced search functionality

## Fixes
- Resolved database timeout issues
- Fixed UI rendering bugs

## Improvements
- Enhanced error handling
- Updated documentation
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Claude API tokens; monitor usage for cost management
- **Git Dependency**: Script requires Git to be installed and accessible via command line
- **Error Handling**: Limited error handling for API failures or network issues

### üîß Potential Improvements

1. **Enhanced Error Handling**:
   ```python
   try:
       response = client.messages.create(...)
   except anthropic.APIError as e:
       print(f"‚ùå API Error: {e}")
       return
   ```

2. **Configurable Output Path**:
   ```python
   output_path = os.getenv("CHANGELOG_PATH", "docs/changelog.md")
   ```

3. **Append Mode**: Consider appending to existing changelog instead of overwriting

4. **Date Range Filtering**: Add ability to generate changelogs for specific date ranges

### üí° Best Practices

- **Commit Message Quality**: Ensure meaningful commit messages for better AI summaries
- **Regular Updates**: Run periodically (e.g., before releases) to maintain current documentation
- **Review Output**: Always review AI-generated content before publishing
- **Backup**: Consider versioning changelog files or maintaining backups

### üöÄ Integration Ideas

- **CI/CD Integration**: Automate execution during release pipelines
- **Git Hooks**: Trigger on specific Git events
- **Scheduled Runs**: Use cron jobs for regular updates
- **Multiple Formats**: Extend to generate changelogs in different formats (JSON, HTML, etc.)