<!-- Auto-generated by Claude on 2025-06-01 23:18 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelog documentation by analyzing recent Git commit messages. It leverages Anthropic's Claude AI to intelligently summarize commit messages into readable release notes and outputs the results to a structured Markdown file.

## Purpose

- **Automate changelog creation** from Git commit history
- **Generate human-readable summaries** of code changes using AI
- **Maintain consistent documentation** in Markdown format
- **Save time** by eliminating manual changelog writing

## Dependencies

The script requires the following Python packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Environment Variables

- `ANTHROPIC_API_KEY` - Your Anthropic API key for Claude access
- `ANTHROPIC_MODEL` (optional) - Claude model to use (defaults to `claude-sonnet-4-20250514`)

## Key Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages as bullet points

**Features:**
- Uses `git log --pretty=format:* %s` for clean formatting
- Includes error handling for Git command failures
- Returns fallback message if no commits are found

```python
# Example output format
* Added user authentication feature
* Fixed database connection issue
* Updated README documentation
```

### `format_prompt(git_log: str)`

Creates an AI prompt for summarizing commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt for Claude AI

**Features:**
- Instructs AI to categorize changes (Features, Fixes, Improvements)
- Requests Markdown formatting
- Provides context for better summarization

### `main()`

The primary execution function that orchestrates the changelog generation process.

**Workflow:**
1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI prompt
5. Calls Claude API for summarization
6. Writes formatted changelog to file

## Output

The script generates a changelog file at `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Added dashboard analytics

## Fixes  
- Resolved database timeout issues
- Fixed responsive design bugs

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Basic Execution

```bash
python changelog_generator.py
```

### Environment Setup

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

## Configuration Notes

### Model Selection
- Default model: `claude-sonnet-4-20250514`
- Can be overridden via `ANTHROPIC_MODEL` environment variable
- Consider token limits when choosing models

### Output Location
- Fixed output path: `docs/changelog.md`
- Ensure `docs/` directory exists before running
- File is overwritten on each execution

## Suggestions for Improvement

### Error Handling
- Add validation for environment variables
- Implement retry logic for API calls
- Handle missing `docs/` directory

### Customization Options
- Make output path configurable
- Add command-line arguments for commit count
- Support for date-range filtering

### Enhanced Features
```python
# Potential improvements
def get_git_log(n=20, since_date=None, author=None):
    """Enhanced version with more filtering options"""
    pass

def append_to_changelog(new_content):
    """Append to existing changelog instead of overwriting"""
    pass
```

### Security Considerations
- Store API keys securely
- Validate Git repository presence
- Sanitize commit messages before API calls

## Example Integration

This tool works well in CI/CD pipelines:

```yaml
# GitHub Actions example
- name: Generate Changelog
  run: python changelog_generator.py
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

## Troubleshooting

### Common Issues
- **Git not found**: Ensure Git is installed and accessible in PATH
- **API key errors**: Verify `ANTHROPIC_API_KEY` is set correctly
- **File permissions**: Check write permissions for `docs/` directory
- **Empty output**: Verify repository has commit history