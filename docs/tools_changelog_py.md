<!-- Auto-generated by Claude on 2025-06-23 06:38 -->

# Changelog Generator

## Overview

This Python script automatically generates a changelog by analyzing recent Git commit messages and using Claude AI to summarize them into readable release notes. The generated changelog is saved as a formatted Markdown file in the `docs/` directory.

## Purpose

- **Automate changelog creation** from Git commit history
- **Improve documentation** by converting raw commit messages into structured release notes
- **Save time** by eliminating manual changelog writing
- **Maintain consistency** in changelog formatting across releases

## Dependencies

The script requires the following packages:
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management
- `subprocess` - Git command execution (built-in)
- `datetime` - Timestamp generation (built-in)

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Default is 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails.

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update README documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to process the commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages from `get_git_log()`

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

### `main()`

The primary function that orchestrates the changelog generation process:

1. **Loads environment variables** from `.env` file
2. **Initializes Claude AI client** with API key
3. **Fetches Git commit history**
4. **Sends prompt to Claude AI** for summarization
5. **Writes formatted changelog** to `docs/changelog.md`

## Environment Variables

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

| Variable | Description | Required |
|----------|-------------|----------|
| `ANTHROPIC_API_KEY` | Your Anthropic Claude API key | ‚úÖ Yes |
| `ANTHROPIC_MODEL` | Claude model to use | ‚ùå No (defaults to claude-sonnet-4-20250514) |

## Output

The script generates a changelog file at `docs/changelog.md` with:
- **Header**: "üìù Changelog"
- **Timestamp**: Last updated date and time
- **Organized sections**: Features, Fixes, Improvements (as determined by Claude AI)

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Prerequisites

1. **Git repository**: Ensure you're running this in a Git repository with commit history
2. **API key**: Obtain an Anthropic Claude API key and add it to your `.env` file
3. **Directory structure**: Ensure `docs/` directory exists or the script will create it

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API costs**: Each run consumes Claude API tokens. Monitor usage for large repositories.
- **Git dependency**: Script requires Git to be installed and accessible via command line.
- **File overwrite**: The script overwrites `docs/changelog.md` completely on each run.

### üîß Potential Improvements

- **Incremental updates**: Modify to append new changes instead of overwriting
- **Date range filtering**: Add options to generate changelogs for specific time periods
- **Branch selection**: Allow changelog generation from specific Git branches
- **Error handling**: Add more robust error handling for network issues or API failures
- **Configuration file**: Move settings like output path and commit count to a config file

### üí° Usage Tips

- **Run before releases**: Integrate into your release workflow
- **Customize prompt**: Modify `format_prompt()` to match your project's changelog style
- **Review output**: Always review the AI-generated changelog before publishing
- **Backup**: Consider versioning your changelog files or keeping backups

## Error Handling

The script includes basic error handling for:
- **Git command failures**: Returns fallback message if Git log cannot be retrieved
- **Missing environment variables**: Will fail gracefully if API key is not provided

For production use, consider adding more comprehensive error handling and logging.