<!-- Auto-generated by Claude on 2025-06-22 04:31 -->

# Changelog Generator

## Overview

This Python script automatically generates formatted changelogs by analyzing recent Git commit messages using Anthropic's Claude AI. It fetches commit history, summarizes the changes using natural language processing, and outputs a well-formatted changelog in Markdown format.

## Purpose

- **Automate changelog creation** from Git commit messages
- **Improve documentation** by providing human-readable release notes
- **Save time** by eliminating manual changelog writing
- **Maintain consistency** in changelog formatting across releases

## Dependencies

The script requires the following Python packages:
- `anthropic` - For Claude AI integration
- `python-dotenv` - For environment variable management
- `subprocess` - For Git command execution (built-in)
- `datetime` - For timestamp generation (built-in)
- `os` - For environment variable access (built-in)

## Configuration

### Environment Variables

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

### Required Setup

- **Git repository** - The script must be run in a Git repository
- **Anthropic API key** - Valid API key for Claude access
- **docs/ directory** - Output directory must exist

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation for API endpoints
```

### `format_prompt(git_log: str) -> str`

Creates a structured prompt for Claude AI to summarize commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt for AI processing

### `main()`

Main execution function that orchestrates the entire changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI summary
5. Writes formatted changelog to file

## Output

The script generates a changelog file at `docs/changelog.md` with the following structure:

```markdown
# 📝 Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added user authentication system
- Implemented password reset functionality

## Fixes
- Resolved database connection timeout issues
- Fixed API response formatting

## Improvements
- Enhanced error handling in login process
- Updated documentation structure
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Integration Examples

**In a CI/CD pipeline:**
```yaml
- name: Generate Changelog
  run: |
    python scripts/changelog_generator.py
    git add docs/changelog.md
    git commit -m "Update changelog"
```

**As a pre-release script:**
```bash
#!/bin/bash
python changelog_generator.py
echo "Changelog updated successfully!"
```

## Notes and Suggestions

### ⚠️ Important Considerations

- **API Costs**: Each run consumes Anthropic API credits
- **Rate Limits**: Be mindful of API rate limiting in automated workflows
- **Commit Quality**: Works best with descriptive, well-formatted commit messages

### 🔧 Potential Improvements

1. **Error Handling**: Add more robust error handling for network issues
2. **Caching**: Implement caching to avoid regenerating identical changelogs
3. **Customization**: Add configuration options for output format and sections
4. **Git Integration**: Add support for tag-based changelog generation
5. **Backup**: Create backup of existing changelog before overwriting

### 📋 Best Practices

- **Run before releases** to ensure up-to-date documentation
- **Review AI output** before publishing to ensure accuracy
- **Use descriptive commit messages** for better AI summaries
- **Version control** the generated changelog files

### 🛠️ Troubleshooting

**Common issues:**
- **"No commits found"**: Ensure you're in a Git repository with commit history
- **API errors**: Verify your Anthropic API key is valid and has sufficient credits
- **Permission errors**: Check write permissions for the `docs/` directory
- **Git not found**: Ensure Git is installed and accessible in your PATH

## File Structure

```
project/
├── .env                    # Environment variables
├── docs/
│   └── changelog.md       # Generated changelog (output)
└── changelog_generator.py # This script
```