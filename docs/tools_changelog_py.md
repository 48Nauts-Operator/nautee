<!-- Auto-generated by Claude on 2025-06-23 05:22 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI to intelligently summarize commit messages into well-structured release notes and outputs them to a Markdown file.

## Purpose

This tool addresses the common challenge of maintaining up-to-date project changelogs by:
- Automatically extracting recent Git commit messages
- Using AI to intelligently categorize and summarize changes
- Generating clean, readable Markdown documentation
- Maintaining consistent changelog formatting across releases

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required packages:**
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management
- `subprocess` - Git command execution
- `os`, `datetime` - Standard library utilities

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git operation fails.

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update API documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages from `get_git_log()`

**Returns:**
- `str`: Formatted prompt instructing Claude to categorize commits into sections like Features, Fixes, and Improvements.

### `main()`

The primary execution function that orchestrates the changelog generation process:

1. **Environment Setup**: Loads environment variables using `load_dotenv()`
2. **AI Client Initialization**: Creates Anthropic client with API key
3. **Data Collection**: Fetches Git commit history
4. **AI Processing**: Sends commits to Claude for summarization
5. **File Generation**: Writes formatted changelog to `docs/changelog.md`

## Configuration

### Environment Variables

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key for Claude access

**Optional:**
- `ANTHROPIC_MODEL`: Claude model version (defaults to `claude-sonnet-4-20250514`)

## Output

The generated changelog is written to `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Dashboard analytics integration

## Fixes  
- Resolved database timeout issues
- Fixed mobile responsive layout

## Improvements
- Enhanced API documentation
- Optimized query performance
```

## Usage

### Command Line Execution

```bash
python changelog_generator.py
```

### Integration Examples

```python
# Custom commit count
def generate_weekly_changelog():
    git_log = get_git_log(n=50)  # Last 50 commits
    # ... rest of processing
```

## Requirements & Setup

1. **Git Repository**: Must be run within a Git repository
2. **API Access**: Valid Anthropic API key required
3. **Directory Structure**: Ensures `docs/` directory exists for output
4. **Dependencies Installation**:
   ```bash
   pip install anthropic python-dotenv
   ```

## Notes & Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Claude API tokens; monitor usage for large repositories
- **Git Dependency**: Requires Git to be installed and accessible via command line
- **File Overwriting**: Each run overwrites the existing changelog.md file

### üîß Potential Improvements

- **Incremental Updates**: Modify to append new entries rather than overwriting
- **Date Range Filtering**: Add support for generating changelogs between specific dates or tags
- **Error Handling**: Enhanced error handling for network issues or API failures
- **Configuration File**: Support for YAML/JSON configuration files
- **Multiple Output Formats**: Support for JSON, HTML, or other formats

### üí° Usage Tips

- Run before each release to maintain up-to-date documentation
- Integrate into CI/CD pipelines for automated changelog generation
- Consider using meaningful commit message formats (e.g., Conventional Commits) for better AI summarization
- Review generated content before publishing, as AI summaries may need manual refinement