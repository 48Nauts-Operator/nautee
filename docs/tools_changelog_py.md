<!-- Auto-generated by Claude on 2025-06-23 10:23 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Claude AI (Anthropic's language model) to intelligently summarize recent commit messages into readable release notes and outputs them to a markdown file.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Fetching recent Git commit messages
- Using AI to categorize and summarize changes
- Generating properly formatted markdown documentation
- Maintaining a consistent changelog format

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Claude AI client library
- `python-dotenv` - Environment variable management
- `subprocess` - Git command execution
- `os`, `datetime` - Standard library modules

## Key Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages as bullet points

**Features:**
- Uses `git log --pretty=format:* %s` for clean bullet-point formatting
- Includes error handling for Git command failures
- Returns fallback message if no commits are found

```python
# Example output format:
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to process commit messages.

**Parameters:**
- `git_log` (str): Raw commit messages from Git

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Provides clear instructions for changelog formatting
- Requests categorization into sections (Features, Fixes, Improvements)
- Ensures markdown output format

### `main()`

The primary execution function that orchestrates the entire changelog generation process.

**Process Flow:**
1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI prompt
5. Calls Claude API for summarization
6. Writes formatted changelog to file

## Configuration

### Environment Variables

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key for Claude access

**Optional:**
- `ANTHROPIC_MODEL`: Claude model version (defaults to `claude-sonnet-4-20250514`)

## Output

The generated changelog is saved to `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added user authentication system
- Implemented dark mode toggle

## Fixes
- Resolved database connection issues
- Fixed responsive design on mobile devices

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Prerequisites

1. **Git Repository**: Must be run within a Git repository
2. **API Key**: Valid Anthropic API key in environment variables
3. **Directory Structure**: Ensure `docs/` directory exists

## Error Handling

The script includes error handling for:
- Git command failures (missing repository, no commits)
- API communication issues
- File writing permissions

## Suggestions and Notes

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens; monitor usage
- **Rate Limits**: Be aware of API rate limiting for frequent executions
- **Git History**: Ensure meaningful commit messages for better AI summarization

### üîß Potential Improvements

1. **Add date range filtering** for commits:
   ```python
   # Example: Only commits from last week
   git log --since="1 week ago"
   ```

2. **Implement changelog versioning**:
   ```python
   # Append to existing changelog instead of overwriting
   ```

3. **Add commit filtering** by type:
   ```python
   # Filter out merge commits or specific patterns
   git log --no-merges
   ```

4. **Configuration file support**:
   ```python
   # Load settings from config.yaml
   ```

### üìù Best Practices

- Use conventional commit messages (e.g., `feat:`, `fix:`, `docs:`)
- Run before major releases
- Review generated changelog before publishing
- Keep API keys secure and never commit them to version control

## Integration Ideas

- **CI/CD Pipeline**: Integrate into GitHub Actions or similar
- **Release Automation**: Trigger on git tags or release branches
- **Slack/Discord**: Send changelog summaries to team channels
- **Multiple Formats**: Export to different formats (JSON, HTML, etc.)