<!-- Auto-generated by Claude on 2025-06-08 06:34 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit messages. It leverages Anthropic's Claude AI to intelligently summarize and categorize recent commits into readable release notes.

## Purpose

This tool automates the tedious process of writing changelogs by:
- Fetching recent Git commit messages
- Using AI to categorize and summarize changes
- Generating a properly formatted Markdown changelog
- Saving the output to `docs/changelog.md`

## Dependencies

The script requires the following Python packages:
- `anthropic` - For Claude AI integration
- `python-dotenv` - For environment variable management
- `subprocess` - For Git command execution (built-in)
- `datetime` - For timestamps (built-in)
- `os` - For environment access (built-in)

## Configuration

### Environment Variables

Create a `.env` file in your project root with:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails.

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str)`

Creates an AI prompt to transform raw commit messages into structured changelog content.

**Parameters:**
- `git_log` (str): Raw Git commit messages from `get_git_log()`

**Returns:**
- `str`: Formatted prompt instructing Claude to categorize commits into sections like Features, Fixes, and Improvements.

### `main()`

The primary function that orchestrates the changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Sends formatted prompt to Claude
5. Writes the generated changelog to `docs/changelog.md`

## Output Format

The generated changelog follows this structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Dashboard analytics integration

## Fixes  
- Resolved database timeout issues
- Fixed responsive design bugs

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Integration Examples

**GitHub Actions workflow:**
```yaml
- name: Generate Changelog
  run: python scripts/changelog_generator.py
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

**Pre-commit hook:**
```bash
#!/bin/sh
python changelog_generator.py
git add docs/changelog.md
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Key Security**: Never commit your `ANTHROPIC_API_KEY` to version control
- **Directory Structure**: Ensure the `docs/` directory exists before running
- **Git Repository**: This script must be run within a Git repository

### üîß Potential Improvements

1. **Error Handling**: Add validation for missing directories and API failures
2. **Customization**: Allow configurable output paths and changelog formats  
3. **Incremental Updates**: Support appending to existing changelogs instead of overwriting
4. **Commit Filtering**: Add options to exclude certain commit types (e.g., merge commits)
5. **Multiple Formats**: Support additional output formats (JSON, HTML, etc.)

### üí° Usage Tips

- **Commit Message Quality**: Write clear, descriptive commit messages for better AI summaries
- **Regular Generation**: Run this tool before releases or at regular intervals
- **Review Output**: Always review the AI-generated content before publishing
- **Backup**: Consider backing up existing changelogs before overwriting

## Error Handling

The script includes basic error handling:
- Git command failures return a "No commits found" message
- Missing environment variables will cause the Anthropic client to fail gracefully
- File writing errors are not currently caught (consider adding try-catch blocks)