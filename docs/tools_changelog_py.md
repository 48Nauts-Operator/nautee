<!-- Auto-generated by Claude on 2025-06-07 22:18 -->

# Changelog Generator

## Overview

The Changelog Generator is a Python utility that automatically creates formatted changelogs by analyzing recent Git commit messages. It leverages Anthropic's Claude AI to summarize and categorize commits into readable release notes, then outputs the results to a Markdown file.

## Purpose

- **Automate changelog creation** from Git commit history
- **Generate human-readable summaries** of recent changes using AI
- **Maintain consistent documentation** in a standardized format
- **Save time** by eliminating manual changelog writing

## Dependencies

The script requires the following Python packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required installations:**
- `anthropic` - Claude AI client library
- `python-dotenv` - Environment variable management

## Configuration

### Environment Variables

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Core Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Features:**
- Uses `git log --pretty=format:* %s` for clean bullet-point formatting
- Includes error handling for Git command failures
- Decodes subprocess output to UTF-8 string

```python
# Example output format:
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str)`

Creates an AI prompt for commit message summarization.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt for Claude AI

**Prompt Structure:**
- Clear instructions for changelog generation
- Requests markdown formatting with categorized sections
- Includes all commit messages for context

### `main()`

Orchestrates the complete changelog generation process.

**Process Flow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Request Claude summary
6. Write formatted changelog to file

**Output:**
- Creates `docs/changelog.md` with timestamp and AI-generated content

## Output Format

The generated changelog follows this structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Dashboard improvements

## Fixes  
- Resolved database timeout issues
- Fixed responsive design bugs

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Command Line Execution

```bash
python changelog_generator.py
```

### Integration Examples

**GitHub Actions Workflow:**
```yaml
- name: Generate Changelog
  run: python scripts/changelog_generator.py
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

**Pre-commit Hook:**
```bash
#!/bin/sh
python changelog_generator.py
git add docs/changelog.md
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Key Security**: Never commit your Anthropic API key to version control
- **Rate Limits**: Be mindful of Anthropic API usage limits for frequent runs
- **Git Repository**: Script must be run from within a Git repository

### üîß Potential Improvements

1. **Error Handling Enhancement**
   ```python
   # Add validation for API key existence
   if not os.getenv("ANTHROPIC_API_KEY"):
       raise ValueError("ANTHROPIC_API_KEY not found in environment")
   ```

2. **Configurable Output Path**
   ```python
   output_path = os.getenv("CHANGELOG_PATH", "docs/changelog.md")
   ```

3. **Date Range Filtering**
   ```python
   def get_git_log_since(since_date: str):
       return subprocess.check_output([
           "git", "log", f"--since={since_date}", "--pretty=format:* %s"
       ]).decode()
   ```

4. **Append vs Overwrite Option**
   - Consider preserving historical changelog entries
   - Add version/release tagging support

### üìÅ Recommended Project Structure

```
project/
‚îú‚îÄ‚îÄ .env                    # Environment variables
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ changelog.md       # Generated output
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ changelog_generator.py
‚îî‚îÄ‚îÄ requirements.txt       # Dependencies
```

### üöÄ Best Practices

- Run after significant development milestones
- Review AI-generated content before publishing
- Customize the prompt for your project's specific needs
- Consider integrating with your CI/CD pipeline