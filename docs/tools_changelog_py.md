<!-- Auto-generated by Claude on 2025-06-23 09:25 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI to intelligently summarize recent commit messages into readable release notes and outputs them to a markdown file.

## Purpose

- Automate changelog generation from Git commit messages
- Create human-readable release notes using AI summarization
- Maintain consistent changelog formatting across projects
- Save time on manual changelog creation

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required packages:**
- `anthropic` - Anthropic's Python client for Claude API
- `python-dotenv` - For loading environment variables

## Environment Variables

The script requires the following environment variables:

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `ANTHROPIC_API_KEY` | ‚úÖ Yes | - | Your Anthropic API key for Claude access |
| `ANTHROPIC_MODEL` | ‚ùå No | `claude-sonnet-4-20250514` | Claude model to use for summarization |

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str) -> str`

Creates a structured prompt for Claude AI to process commit messages.

**Parameters:**
- `git_log` (str): Raw commit messages from Git

**Returns:**
- `str`: Formatted prompt for AI processing

### `main()`

Main execution function that orchestrates the changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI summary
5. Writes formatted changelog to file

## Output

The script generates a `docs/changelog.md` file with:

- **Header**: "üìù Changelog"
- **Timestamp**: Last updated date and time
- **Organized sections**: Features, Fixes, Improvements (as determined by AI)
- **Markdown formatting**: Clean, readable structure

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Setup Requirements

1. **Create `.env` file:**
   ```env
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514
   ```

2. **Ensure Git repository:**
   - Script must be run from within a Git repository
   - Requires at least some commit history

3. **Create docs directory:**
   ```bash
   mkdir -p docs
   ```

## Error Handling

- **Git errors**: Gracefully handles cases where Git commands fail
- **Missing commits**: Returns "No commits found" message
- **API errors**: Will raise exceptions if Anthropic API calls fail

## Notes and Suggestions

### üîß Improvements

- **Add error handling** for Anthropic API failures
- **Implement date range filtering** for commits (e.g., since last release)
- **Add configuration file support** for customizing output format
- **Include commit hashes** for reference
- **Add dry-run mode** to preview changes before writing

### üí° Usage Tips

- Run this script as part of your CI/CD pipeline before releases
- Consider scheduling regular runs to keep changelog updated
- Customize the AI prompt for your project's specific needs
- Use conventional commit messages for better AI summarization

### ‚ö†Ô∏è Important Considerations

- **API costs**: Each run consumes Anthropic API credits
- **Rate limits**: Be mindful of API rate limiting for frequent runs
- **Git dependency**: Requires Git to be installed and accessible
- **File overwrite**: Script overwrites existing changelog.md completely

### üöÄ Integration Ideas

```bash
# Add to package.json scripts
"scripts": {
  "changelog": "python changelog_generator.py"
}

# Or create a shell alias
alias changelog="python /path/to/changelog_generator.py"
```

This tool is particularly useful for teams that want to maintain professional changelogs without manual effort, making release documentation more consistent and comprehensive.