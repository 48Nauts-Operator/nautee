<!-- Auto-generated by Claude on 2025-06-23 06:32 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automates the creation of project changelogs by analyzing recent Git commit messages and generating human-readable release notes using Claude AI. The tool extracts commit history, processes it through Claude's language model, and outputs a formatted changelog in Markdown format.

## Purpose

This tool addresses the common challenge of maintaining up-to-date project documentation by:
- Automatically extracting recent Git commit messages
- Using AI to summarize and categorize changes into readable format
- Generating consistent, professional changelog documentation
- Saving time on manual changelog maintenance

## Dependencies

The script requires the following packages:
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management
- `subprocess` - Git command execution
- `datetime` - Timestamp generation
- `os` - Environment variable access

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages from the repository.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Default is 20.

**Returns:**
- `str`: Formatted commit messages or error message

**Usage:**
```python
commits = get_git_log(10)  # Get last 10 commits
```

**Notes:**
- Uses Git's `--pretty=format:* %s` to create bullet-point formatted output
- Includes error handling for Git command failures
- Returns fallback message if Git log cannot be accessed

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI processing

**Features:**
- Provides clear instructions for changelog formatting
- Requests categorization into sections (Features, Fixes, Improvements)
- Specifies Markdown output format

### `main()`

The primary execution function that orchestrates the changelog generation process.

**Process Flow:**
1. Loads environment variables from `.env` file
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI prompt
5. Calls Claude API for summarization
6. Writes formatted changelog to file

## Configuration

### Environment Variables

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key for Claude access

**Optional:**
- `ANTHROPIC_MODEL`: Claude model version (defaults to `claude-sonnet-4-20250514`)

## Output

The script generates a changelog file at `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New feature implementations

## Fixes
- Bug fixes and corrections

## Improvements
- Performance enhancements and optimizations
```

## Usage

### Command Line Execution

```bash
python changelog_generator.py
```

### Integration Examples

```python
# Custom commit count
def generate_changelog_weekly():
    git_log = get_git_log(50)  # Get more commits for weekly summary
    # ... rest of processing
```

## Setup Requirements

1. **Git Repository**: Must be run within a Git repository
2. **API Access**: Valid Anthropic API key required
3. **Directory Structure**: Ensures `docs/` directory exists for output
4. **Dependencies**: Install required packages:
   ```bash
   pip install anthropic python-dotenv
   ```

## Suggestions and Best Practices

### Security
- ‚ö†Ô∏è **Never commit your `.env` file** - add it to `.gitignore`
- Use environment variables or secure credential management in production
- Consider API key rotation policies

### Customization
- Adjust the `n` parameter in `get_git_log()` based on your release frequency
- Modify the prompt template to match your project's changelog style
- Consider adding date-based filtering for Git commits

### Error Handling
- The script includes basic error handling for Git operations
- Consider adding retry logic for API calls
- Add validation for required environment variables

### Automation
- Integrate with CI/CD pipelines for automatic changelog updates
- Set up scheduled runs (e.g., weekly or before releases)
- Consider triggering on specific Git events or tags

## Limitations

- Requires active internet connection for Claude API calls
- Limited by Claude's token limits (currently set to 1000 max tokens)
- Overwrites existing changelog.md file completely
- Dependent on quality of commit messages for meaningful output

## Troubleshooting

**Common Issues:**
- **"No commits found"**: Ensure you're in a Git repository with commit history
- **API errors**: Verify `ANTHROPIC_API_KEY` is valid and has sufficient credits
- **File write errors**: Check that `docs/` directory exists and has write permissions