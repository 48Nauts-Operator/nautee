<!-- Auto-generated by Claude on 2025-06-21 23:19 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelog documentation by analyzing recent Git commit messages. It leverages Anthropic's Claude AI to summarize and categorize commits into readable release notes, then outputs the results to a markdown file.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Extracting recent Git commit messages from the repository
- Using AI to intelligently summarize and categorize changes
- Generating well-formatted markdown documentation
- Maintaining a consistent changelog format across releases

## Dependencies

The script requires the following Python packages:
- `anthropic` - For Claude AI integration
- `python-dotenv` - For environment variable management
- `subprocess` - For Git command execution (built-in)
- `datetime` - For timestamp generation (built-in)
- `os` - For environment access (built-in)

## Configuration

### Environment Variables

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to claude-sonnet-4-20250514
```

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails.

**Example Output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation for API endpoints
```

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to process commit messages.

**Parameters:**
- `git_log` (str): Raw commit messages from Git log

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

### `main()`

The primary execution function that orchestrates the entire changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit messages
4. Sends formatted prompt to Claude AI
5. Processes AI response
6. Writes formatted changelog to file

## Output

The generated changelog is saved to `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- API endpoint documentation

## Fixes  
- Resolved database connection timeout issues
- Fixed responsive design on mobile devices

## Improvements
- Enhanced error handling in data processing
- Optimized query performance
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Integration with CI/CD

This script can be integrated into your deployment pipeline to automatically update changelogs:

```yaml
# Example GitHub Actions step
- name: Generate Changelog
  run: python changelog_generator.py
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Key Security**: Never commit your `ANTHROPIC_API_KEY` to version control. Always use environment variables or secure secret management.
- **Git Repository**: This script must be run within a Git repository with commit history.
- **Directory Structure**: Ensure the `docs/` directory exists before running the script.

### üîß Potential Improvements

1. **Error Handling**: Add more robust error handling for API failures and file I/O operations
2. **Customization**: Allow custom output paths and changelog templates
3. **Date Range Filtering**: Add options to generate changelogs for specific date ranges or between tags
4. **Commit Filtering**: Implement filtering to exclude certain commit types (e.g., merge commits, CI updates)
5. **Backup**: Consider backing up existing changelog before overwriting

### üí° Usage Tips

- **Commit Message Quality**: The quality of generated changelogs depends on clear, descriptive commit messages
- **Regular Generation**: Run this tool regularly to maintain up-to-date documentation
- **Manual Review**: Always review AI-generated content before publishing
- **Cost Management**: Monitor Anthropic API usage to manage costs effectively

## Error Handling

The script includes basic error handling for Git operations but may benefit from additional error handling for:
- Missing environment variables
- API rate limiting
- File permission issues
- Network connectivity problems