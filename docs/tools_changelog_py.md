<!-- Auto-generated by Claude on 2025-06-22 16:23 -->

# Changelog Generator Documentation

## Overview

The Changelog Generator is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI to intelligently summarize and categorize recent commit messages into readable release notes.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Fetching recent Git commit messages
- Using AI to summarize and categorize changes
- Generating a well-formatted markdown changelog
- Saving the output to a standardized location

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Required API key for Claude
- `ANTHROPIC_MODEL` - Optional model specification (defaults to `claude-sonnet-4-20250514`)

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages or error message

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

**Error handling:** Returns `"# No commits found"` if Git command fails.

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to generate changelog content.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Instructs AI to use markdown formatting
- Suggests categorization (Features, Fixes, Improvements)
- Provides clear context for the summarization task

### `main()`

The primary execution function that orchestrates the changelog generation process.

**Workflow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Request AI summarization
6. Write formatted changelog to file

**Output:** Creates `docs/changelog.md` with timestamp and AI-generated content

## File Structure

The generated changelog follows this format:

```markdown
# üìù Changelog

_Last updated: YYYY-MM-DD HH:MM_

[AI-generated content organized by categories]
```

## Usage Example

```bash
# Ensure environment variables are set
export ANTHROPIC_API_KEY="your-api-key-here"

# Run the script
python changelog_generator.py
```

## Configuration Notes

### Required Setup
- **Git repository**: Must be run within a Git repository
- **API Key**: Anthropic API key must be configured
- **Directory structure**: Creates `docs/` directory if it doesn't exist

### Customization Options
- Modify `n` parameter in `get_git_log()` to fetch more/fewer commits
- Adjust `max_tokens` in the API call for longer/shorter summaries
- Customize the prompt template in `format_prompt()` for different formatting styles

## Error Handling

- **Git errors**: Gracefully handles Git command failures
- **API errors**: Will raise exceptions for API-related issues
- **File I/O**: May fail if `docs/` directory is not writable

## Suggestions for Improvement

1. **Add commit filtering**: Filter out merge commits or commits with specific patterns
2. **Version tagging**: Include Git tags to separate releases
3. **Configuration file**: Use a config file for customizable settings
4. **Append mode**: Option to append to existing changelog instead of overwriting
5. **Error logging**: Implement proper logging instead of print statements
6. **Commit date ranges**: Allow specifying date ranges for changelog generation

## Security Considerations

- Store API keys securely using environment variables or secure vaults
- Validate Git repository state before execution
- Consider rate limiting for API calls in automated environments