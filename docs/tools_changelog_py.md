<!-- Auto-generated by Claude on 2025-06-01 19:15 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelog documentation by analyzing recent Git commit messages. It leverages Anthropic's Claude AI to intelligently summarize and categorize commits into readable release notes.

## Purpose

- **Automate documentation**: Eliminates manual changelog creation
- **Improve readability**: Transforms raw commit messages into organized release notes
- **Maintain consistency**: Provides standardized changelog formatting
- **Save time**: Reduces developer overhead for documentation maintenance

## Dependencies

The script requires the following Python packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required installations:**
```bash
pip install anthropic python-dotenv
```

## Environment Configuration

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages from the repository.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Features:**
- Uses `git log --pretty=format:* %s` for clean formatting
- Includes error handling for Git operations
- Returns fallback message if Git log fails

### `format_prompt(git_log: str)`

Creates an AI prompt for commit message summarization.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt for Claude AI

**Prompt Structure:**
- Instructs AI to categorize changes (Features, Fixes, Improvements)
- Requests markdown formatting
- Provides context for changelog generation

### `main()`

Main execution function that orchestrates the changelog generation process.

**Workflow:**
1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI summary
5. Writes formatted changelog to file

## Output

The script generates `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

[AI-generated content organized by categories]
```

## Usage

### Basic Execution

```bash
python changelog_generator.py
```

### Integration Options

**As a Git Hook:**
```bash
# Add to .git/hooks/post-commit
#!/bin/bash
python changelog_generator.py
```

**In CI/CD Pipeline:**
```yaml
- name: Generate Changelog
  run: python changelog_generator.py
```

## Configuration Notes

### Model Selection
- Default model: `claude-sonnet-4-20250514`
- Customize via `ANTHROPIC_MODEL` environment variable
- Consider token limits and costs when selecting models

### Git Integration
- Ensure the script runs from the Git repository root
- Requires Git to be installed and accessible in PATH
- Works with any Git repository structure

## Limitations & Considerations

### Technical Limitations
- **API Dependency**: Requires active Anthropic API key and internet connection
- **Token Limits**: Large commit histories may exceed model token limits
- **Git Requirement**: Must be run within a Git repository

### Best Practices
- **Commit Message Quality**: Better commit messages produce better changelogs
- **Regular Execution**: Run periodically to maintain up-to-date documentation
- **Review Output**: Always review AI-generated content before publishing

### Cost Considerations
- Monitor API usage to control costs
- Consider caching for frequently accessed repositories
- Adjust commit count (`n` parameter) based on needs

## Error Handling

The script includes basic error handling for:
- Git command failures
- Missing environment variables
- File writing operations

**Common Issues:**
- Missing API key: Check `.env` configuration
- Git not found: Ensure Git is installed and in PATH
- Permission errors: Verify write access to `docs/` directory

## Customization Suggestions

### Enhanced Features
```python
# Add commit filtering by date range
def get_git_log_since(date_string):
    return subprocess.check_output([
        "git", "log", f"--since={date_string}", "--pretty=format:* %s"
    ]).decode()

# Add multiple output formats
def write_changelog(content, format="markdown"):
    if format == "json":
        # JSON output logic
    elif format == "html":
        # HTML output logic
```

### Integration Ideas
- Add changelog versioning
- Include contributor information
- Support multiple repository analysis
- Implement changelog diff detection