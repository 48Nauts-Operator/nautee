<!-- Auto-generated by Claude on 2025-06-08 05:20 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelog documentation by analyzing recent Git commit messages. It uses Anthropic's Claude AI to intelligently summarize and categorize commits into readable release notes.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Fetching recent Git commit messages
- Using AI to summarize and categorize changes
- Generating a formatted Markdown changelog file
- Maintaining consistent documentation structure

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required packages:**
- `anthropic` - For Claude AI integration
- `python-dotenv` - For environment variable management

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Default is 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git operation fails.

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Instructs AI to use markdown formatting
- Requests categorization into sections (Features, Fixes, Improvements)
- Provides clear context for changelog generation

### `main()`

The primary execution function that orchestrates the changelog generation process.

**Process flow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Request Claude summarization
6. Write formatted changelog to file

## Configuration

### Environment Variables

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key

**Optional:**
- `ANTHROPIC_MODEL`: Claude model version (defaults to `claude-sonnet-4-20250514`)

### Output Configuration

- **Output file**: `docs/changelog.md`
- **Token limit**: 1000 tokens for AI response
- **Timestamp format**: `YYYY-MM-DD HH:MM`

## Usage

### Basic Execution

```bash
python changelog_generator.py
```

### Integration Example

```python
from changelog_generator import get_git_log, format_prompt

# Get last 10 commits
recent_commits = get_git_log(10)
prompt = format_prompt(recent_commits)
```

## Output Format

The generated changelog follows this structure:

```markdown
# 📝 Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Added dashboard analytics

## Fixes
- Resolved database timeout issues
- Fixed responsive design bugs

## Improvements
- Enhanced error handling
- Updated documentation
```

## Notes and Suggestions

### ⚠️ Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens
- **Git Dependency**: Requires Git repository with commit history
- **Directory Structure**: Assumes `docs/` directory exists

### 🔧 Recommendations

1. **Error Handling**: Consider adding more robust error handling for API failures
2. **Customization**: Make output path configurable via environment variables
3. **Backup**: Implement backup of existing changelog before overwriting
4. **Commit Quality**: Works best with descriptive commit messages

### 🚀 Enhancement Ideas

```python
# Potential improvements:
- Add date range filtering for commits
- Support multiple output formats (JSON, HTML)
- Include commit authors and dates
- Add configuration file support
- Implement incremental changelog updates
```

### 📋 Prerequisites

- Python 3.6+
- Git repository
- Anthropic API account
- `docs/` directory in project root

### ⚡ Quick Setup

```bash
# Install dependencies
pip install anthropic python-dotenv

# Set up environment
echo "ANTHROPIC_API_KEY=your_key" > .env

# Create docs directory
mkdir -p docs

# Run generator
python changelog_generator.py
```