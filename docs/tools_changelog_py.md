<!-- Auto-generated by Claude on 2025-06-22 17:18 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python automation tool that generates formatted changelogs from Git commit history. It leverages Claude AI (Anthropic's language model) to summarize recent commit messages into clear, organized release notes and outputs them to a Markdown file.

## Purpose

This tool automates the tedious process of manually creating changelogs by:
- Fetching recent Git commit messages
- Using AI to intelligently categorize and summarize changes
- Generating a formatted Markdown changelog file
- Maintaining consistent documentation standards

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required packages:**
- `anthropic` - Claude AI API client
- `python-dotenv` - Environment variable management

## Core Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages with bullet points, or error message if Git command fails

**Usage:**
```python
recent_commits = get_git_log(10)  # Get last 10 commits
```

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Instructs AI to organize changes into categories (Features, Fixes, Improvements)
- Ensures Markdown formatting in output
- Provides clear context for changelog generation

### `main()`

The primary execution function that orchestrates the entire changelog generation process.

**Process flow:**
1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Sends formatted prompt to Claude AI
5. Processes AI response
6. Writes formatted changelog to file

## Configuration

### Environment Variables

Create a `.env` file with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

**Required:**
- `ANTHROPIC_API_KEY`: Your Anthropic API key for Claude access

**Optional:**
- `ANTHROPIC_MODEL`: Claude model version (defaults to `claude-sonnet-4-20250514`)

### Output Configuration

- **Output file:** `docs/changelog.md`
- **Encoding:** UTF-8
- **Format:** Markdown with timestamp header

## Usage

### Command Line Execution

```bash
python changelog_generator.py
```

### Expected Output Structure

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added new user authentication system
- Implemented dark mode toggle

## Fixes
- Fixed memory leak in data processing
- Resolved API timeout issues

## Improvements
- Enhanced error handling
- Updated documentation
```

## Important Notes

### Prerequisites
- **Git repository**: Must be run within a Git repository
- **API access**: Valid Anthropic API key required
- **Directory structure**: Assumes `docs/` directory exists

### Error Handling
- Git command failures are caught and logged
- Returns fallback message if no commits found
- File operations use UTF-8 encoding for international character support

### Limitations
- Requires internet connection for Claude AI API
- API usage incurs costs based on Anthropic's pricing
- Limited to 1000 max tokens per request
- Changelog overwrites previous content (no versioning)

## Suggestions for Enhancement

### Potential Improvements
- **Version management**: Append to changelog instead of overwriting
- **Date range filtering**: Add options for specific time periods
- **Custom categories**: Allow user-defined changelog sections
- **Multiple output formats**: Support for different changelog formats
- **Commit filtering**: Exclude merge commits or specific patterns
- **Error recovery**: Retry logic for API failures

### Security Considerations
- Store API keys securely using environment variables
- Consider rate limiting for API requests
- Validate Git repository state before execution

## Example Integration

```python
# Custom usage example
if __name__ == "__main__":
    # Generate changelog for last 50 commits
    git_log = get_git_log(50)
    if "No commits found" not in git_log:
        main()
    else:
        print("‚ö†Ô∏è No Git commits available")
```