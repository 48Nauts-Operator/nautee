<!-- Auto-generated by Claude on 2025-06-22 01:52 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automates the creation of project changelogs by analyzing recent Git commit messages and generating human-readable release notes using Claude AI. The tool fetches commit history, processes it through Claude's language model, and outputs a formatted changelog to `docs/changelog.md`.

## Purpose

- **Automate changelog creation** from Git commit messages
- **Generate human-readable release notes** using AI summarization
- **Maintain consistent documentation** with timestamped updates
- **Save development time** by eliminating manual changelog writing

## Dependencies

The script requires the following packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

**Required installations:**
```bash
pip install anthropic python-dotenv
```

## Environment Variables

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

## Core Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation formatting
```

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to process commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI processing

### `main()`

The primary execution function that orchestrates the entire changelog generation process:

1. **Load environment variables** from `.env` file
2. **Initialize Anthropic client** with API credentials
3. **Fetch Git commit history**
4. **Generate AI-powered summary** using Claude
5. **Write formatted changelog** to output file

## Output Format

The generated changelog follows this structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Dashboard analytics integration

## Fixes  
- Resolved database timeout issues
- Fixed responsive design bugs

## Improvements
- Enhanced error handling
- Updated dependencies
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Integration Examples

**As part of CI/CD pipeline:**
```yaml
- name: Generate Changelog
  run: python scripts/changelog_generator.py
```

**Pre-release script:**
```bash
#!/bin/bash
python changelog_generator.py
git add docs/changelog.md
git commit -m "Update changelog for release"
```

## Configuration Notes

### Model Selection
- **Default model:** `claude-sonnet-4-20250514`
- **Alternative models:** Update `ANTHROPIC_MODEL` environment variable
- **Token limit:** Currently set to 1000 tokens (adjustable)

### Customization Options

**Change number of commits:**
```python
git_log = get_git_log(50)  # Fetch last 50 commits
```

**Modify output path:**
```python
output_path = "CHANGELOG.md"  # Root directory instead of docs/
```

## Error Handling

The script includes basic error handling for:
- **Git command failures:** Returns fallback message if Git is unavailable
- **API errors:** Will raise exceptions for invalid API keys or network issues
- **File writing errors:** May fail if `docs/` directory doesn't exist

## Recommendations

### Best Practices

- **Consistent commit messages:** Use conventional commit format for better AI summarization
- **Regular updates:** Run before releases or weekly for active projects
- **Review output:** Always review AI-generated content before publishing

### Potential Improvements

- [ ] Add support for semantic versioning
- [ ] Include commit authors and dates
- [ ] Filter commits by type (feat, fix, docs, etc.)
- [ ] Add configuration file support
- [ ] Implement changelog appending vs. overwriting

### Security Considerations

- **API Key Protection:** Never commit `.env` files to version control
- **Rate Limiting:** Be mindful of Anthropic API usage limits
- **Validation:** Consider adding input validation for Git output

## Troubleshooting

**Common Issues:**

| Problem | Solution |
|---------|----------|
| "No commits found" | Ensure you're in a Git repository |
| API key errors | Verify `ANTHROPIC_API_KEY` in `.env` file |
| File not found | Create `docs/` directory manually |
| Permission denied | Check write permissions for output directory |