<!-- Auto-generated by Claude on 2025-06-22 21:18 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automates the creation of project changelogs by analyzing recent Git commit messages and generating human-readable release notes using Claude AI. The tool fetches commit history, sends it to Anthropic's Claude API for summarization, and outputs a formatted changelog file.

## Purpose

- **Automate changelog creation** from Git commit messages
- **Generate readable release notes** using AI-powered summarization
- **Maintain consistent documentation** with standardized formatting
- **Save time** by eliminating manual changelog writing

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Anthropic's Python client for Claude API
- `python-dotenv` - Environment variable management

### Environment Variables
- `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
- `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int): Number of recent commits to fetch (default: 20)

**Returns:**
- `str`: Formatted commit messages or error message

**Usage:**
```python
commits = get_git_log(10)  # Get last 10 commits
```

**Error Handling:**
- Returns `"# No commits found"` if Git command fails
- Prints error message to console

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to summarize commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

**Features:**
- Instructs AI to use markdown formatting
- Suggests organizing content into sections (Features, Fixes, Improvements)
- Provides clear context for the summarization task

### `main()`

Main execution function that orchestrates the changelog generation process.

**Process Flow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Call Claude API for summarization
6. Write formatted changelog to file

**Output:**
- Creates/overwrites `docs/changelog.md`
- Includes timestamp and formatted release notes

## Output Format

The generated changelog follows this structure:

```markdown
# üìù Changelog

_Last updated: YYYY-MM-DD HH:MM_

[AI-generated summary organized by categories]
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Prerequisites

1. **Set up environment variables:**
   ```bash
   # In your .env file
   ANTHROPIC_API_KEY=your_anthropic_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
   ```

2. **Ensure Git repository:**
   - Script must be run in a Git repository
   - Requires commit history to analyze

3. **Create docs directory:**
   ```bash
   mkdir -p docs
   ```

## Configuration

### Model Selection
You can specify different Claude models via environment variable:
```bash
ANTHROPIC_MODEL=claude-3-haiku-20240307
```

### Commit History Length
Modify the number of commits analyzed by changing the default parameter:
```python
git_log = get_git_log(50)  # Analyze last 50 commits
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run makes an API call to Anthropic - monitor usage
- **File Overwrite**: The script overwrites existing changelog.md files
- **Git Dependency**: Requires Git to be installed and accessible via command line

### üîß Potential Improvements

1. **Append Mode**: Consider appending to existing changelog instead of overwriting
2. **Date Range Filtering**: Add options to filter commits by date range
3. **Configuration File**: Use a config file for customizable settings
4. **Error Recovery**: Add retry logic for API failures
5. **Commit Message Quality**: Filter out merge commits or implement commit message standards

### üìÅ File Structure

```
your-project/
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ changelog.md          # Generated output
‚îú‚îÄ‚îÄ .env                      # Environment variables
‚îî‚îÄ‚îÄ changelog_generator.py    # This script
```

### üöÄ Integration Ideas

- **CI/CD Integration**: Run automatically on releases
- **Pre-commit Hook**: Generate changelog before commits
- **Scheduled Updates**: Use cron jobs for regular updates
- **Multiple Formats**: Export to different formats (JSON, PDF, etc.)