<!-- Auto-generated by Claude on 2025-06-08 04:30 -->

# Changelog Generator Documentation

## Overview

This Python script automatically generates formatted changelogs by analyzing recent Git commit messages and using Claude AI to create human-readable release notes. The generated changelog is saved as a Markdown file in the `docs/` directory.

## Purpose

- **Automate changelog creation** from Git commit history
- **Improve documentation workflow** by generating consistent, readable release notes
- **Leverage AI** to transform raw commit messages into organized changelog sections

## Dependencies

The script requires the following packages:

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Installations

```bash
pip install anthropic python-dotenv
```

## Environment Configuration

Create a `.env` file in your project root with:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, uses default if not set
```

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages using subprocess.

- **Parameters:**
  - `n` (int, optional): Number of recent commits to fetch. Default is 20.
- **Returns:** String containing formatted commit messages or error message
- **Format:** Each commit is prefixed with `* ` for Markdown list formatting

```python
# Example output:
* Add user authentication feature
* Fix bug in payment processing
* Update documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to process the commit messages.

- **Parameters:**
  - `git_log` (str): Raw commit message string from `get_git_log()`
- **Returns:** Formatted prompt string for AI processing
- **Purpose:** Instructs Claude to organize commits into logical sections (Features, Fixes, Improvements)

### `main()`

The primary execution function that orchestrates the changelog generation process.

**Workflow:**
1. Load environment variables
2. Initialize Anthropic client
3. Fetch Git commit history
4. Generate AI prompt
5. Request changelog from Claude
6. Write formatted output to file

## Output

The script generates `docs/changelog.md` with:

- **Header:** `# üìù Changelog`
- **Timestamp:** Last updated date and time
- **AI-generated content:** Organized sections based on commit analysis

### Example Output Structure

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added user authentication system
- Implemented payment processing

## Fixes  
- Resolved database connection timeout
- Fixed UI rendering bug on mobile devices

## Improvements
- Enhanced error handling
- Updated documentation
```

## Usage

### Command Line Execution

```bash
python changelog_generator.py
```

### Integration Options

- **CI/CD Pipeline:** Run automatically on releases
- **Pre-commit Hook:** Generate changelog before commits
- **Scheduled Task:** Regular changelog updates

## Configuration Notes

### Model Selection

The script uses Claude Sonnet 4 by default. You can specify different models:

```env
ANTHROPIC_MODEL=claude-3-haiku-20240307  # Faster, less detailed
ANTHROPIC_MODEL=claude-3-opus-20240229   # More detailed, slower
```

### Commit History Length

Adjust the number of commits analyzed by modifying the `get_git_log()` call:

```python
git_log = get_git_log(50)  # Analyze last 50 commits
```

## Error Handling

- **Git errors:** Returns fallback message if Git commands fail
- **API errors:** Will raise exceptions if Anthropic API calls fail
- **File errors:** May fail silently if unable to write to `docs/` directory

## Suggestions for Improvement

### Recommended Enhancements

- **Add error handling** for API failures and file operations
- **Implement date range filtering** for commits (e.g., since last release)
- **Add configuration file** support for customizable prompts
- **Include commit authors** and dates in the analysis
- **Support multiple output formats** (JSON, HTML, etc.)

### Best Practices

- **Run before releases** to ensure up-to-date documentation
- **Review generated content** before publishing
- **Customize prompts** based on your project's commit message conventions
- **Consider rate limits** when processing large commit histories

## Security Considerations

- Store API keys securely using environment variables
- Never commit `.env` files to version control
- Consider using CI/CD secrets for automated deployments