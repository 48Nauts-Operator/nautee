<!-- Auto-generated by Claude on 2025-06-22 06:34 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI to intelligently summarize recent commit messages into readable release notes and outputs them to a markdown file.

## Purpose

This tool automates the tedious process of manually creating changelogs by:
- Fetching recent Git commit messages
- Using AI to categorize and summarize changes
- Generating a professionally formatted changelog in Markdown
- Automatically timestamping the output

## Dependencies

```python
import os
import anthropic
from dotenv import load_dotenv
from datetime import datetime
import subprocess
```

### Required Packages
- `anthropic` - Anthropic's Python client for Claude API
- `python-dotenv` - For loading environment variables
- `subprocess` - Built-in module for executing Git commands
- `os`, `datetime` - Built-in modules for system operations and timestamps

## Environment Variables

The following environment variables must be configured:

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `ANTHROPIC_API_KEY` | ‚úÖ Yes | None | Your Anthropic API key for Claude access |
| `ANTHROPIC_MODEL` | ‚ùå No | `claude-sonnet-4-20250514` | Claude model to use for summarization |

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Default is 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git command fails

**Example Output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation for API endpoints
```

### `format_prompt(git_log: str)`

Creates a structured prompt for Claude AI to summarize commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages from `get_git_log()`

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

### `main()`

The main execution function that orchestrates the entire changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI summary
5. Writes formatted changelog to file

## Output

The generated changelog is saved to `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Advanced search functionality

## Fixes  
- Resolved database timeout issues
- Fixed responsive design bugs

## Improvements
- Enhanced API documentation
- Optimized database queries
```

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Prerequisites

1. **Set up environment variables** in a `.env` file:
   ```env
   ANTHROPIC_API_KEY=your_anthropic_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514
   ```

2. **Ensure Git repository** is initialized and has commit history

3. **Create docs directory** if it doesn't exist:
   ```bash
   mkdir -p docs
   ```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens. Monitor usage for cost management.
- **Git Dependency**: Requires Git to be installed and repository to be initialized.
- **Network Required**: Needs internet connection for Anthropic API calls.

### üöÄ Potential Improvements

1. **Error Handling**: Add more robust error handling for API failures and file operations
2. **Configuration**: Make commit count and output path configurable via command-line arguments
3. **Git Integration**: Add support for filtering commits by date range or author
4. **Template System**: Allow custom changelog templates
5. **Incremental Updates**: Support for appending to existing changelogs instead of overwriting

### üí° Usage Tips

- Run this script as part of your CI/CD pipeline before releases
- Consider adding it as a Git hook for automatic changelog updates
- Review and edit the generated changelog before publishing for accuracy
- Use meaningful commit messages to get better AI summaries

### üîß Troubleshooting

**Common Issues:**
- **"No commits found"**: Ensure you're in a Git repository with commit history
- **API Key errors**: Verify `ANTHROPIC_API_KEY` is correctly set in `.env`
- **Permission errors**: Ensure write permissions for the `docs/` directory
- **Model not found**: Check if the specified `ANTHROPIC_MODEL` is valid and accessible