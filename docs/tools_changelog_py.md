<!-- Auto-generated by Claude on 2025-06-23 01:50 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automates the creation of project changelogs by analyzing recent Git commit messages and generating human-readable release notes using Claude AI. The tool fetches commit history, processes it through Anthropic's Claude model, and outputs a formatted changelog file.

## Purpose

This tool serves to:
- Automatically generate professional changelog documentation
- Save time on manual changelog creation
- Maintain consistent changelog formatting
- Provide clear, readable summaries of project changes

## Dependencies

The script requires the following Python packages:
- `anthropic` - For Claude AI integration
- `python-dotenv` - For environment variable management
- `subprocess` - For Git command execution (built-in)
- `datetime` - For timestamp generation (built-in)
- `os` - For environment variable access (built-in)

## Functions

### `get_git_log(n=20)`

Retrieves recent Git commit messages from the repository.

**Parameters:**
- `n` (int, optional): Number of recent commits to fetch. Default is 20.

**Returns:**
- `str`: Formatted commit messages as bullet points, or error message if Git operation fails.

**Example output:**
```
* Add new feature for user authentication
* Fix bug in password validation
* Update documentation
```

### `format_prompt(git_log: str)`

Creates a structured prompt for the Claude AI model to generate changelog content.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt string with instructions for Claude

### `main()`

The primary function that orchestrates the changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Generates AI-powered changelog summary
5. Writes formatted output to file

## Configuration

### Environment Variables

Create a `.env` file in your project root with the following variables:

```bash
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to specified model
```

### Required Environment Setup

- **ANTHROPIC_API_KEY**: Your Anthropic API key (required)
- **ANTHROPIC_MODEL**: Claude model version (optional, defaults to `claude-sonnet-4-20250514`)

## Output

The script generates a changelog file at `docs/changelog.md` with the following structure:

```markdown
# üìù Changelog

_Last updated: 2024-01-15 14:30_

## Features
- New user authentication system
- Enhanced dashboard interface

## Fixes
- Resolved password validation issue
- Fixed responsive design bugs

## Improvements
- Updated documentation
- Performance optimizations
```

## Usage

### Command Line Execution

```bash
python changelog_generator.py
```

### Integration with CI/CD

This script can be integrated into your CI/CD pipeline to automatically update changelogs on releases:

```yaml
# Example GitHub Actions step
- name: Generate Changelog
  run: python changelog_generator.py
  env:
    ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

## Error Handling

The script includes basic error handling for:
- Git command failures
- Missing environment variables
- File writing permissions

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens. Monitor usage in production environments.
- **Git Repository**: Must be run within a Git repository with commit history.
- **Directory Structure**: Ensures `docs/` directory exists before running.

### üîß Potential Improvements

1. **Add commit filtering**: Filter out merge commits or commits matching specific patterns
2. **Multiple output formats**: Support for different changelog formats (JSON, HTML, etc.)
3. **Date range support**: Allow filtering commits by date range
4. **Template customization**: Make the prompt template configurable
5. **Backup existing changelog**: Preserve previous changelog versions
6. **Error logging**: Implement comprehensive logging for debugging

### üí° Usage Tips

- Run after significant development milestones
- Customize the prompt in `format_prompt()` for project-specific needs
- Consider running as a pre-release hook in your deployment process
- Review generated content before publishing, as AI summaries may need manual refinement

## File Structure

```
project/
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ changelog.md          # Generated output
‚îú‚îÄ‚îÄ .env                      # Environment variables
‚îî‚îÄ‚îÄ changelog_generator.py    # This script
```