<!-- Auto-generated by Claude on 2025-06-08 01:51 -->

# Changelog Generator Documentation

## Overview

The **Changelog Generator** is a Python utility that automatically creates formatted changelogs from Git commit history. It leverages Anthropic's Claude AI to intelligently summarize and categorize recent commits into readable release notes.

## Purpose

This tool automates the tedious process of manually writing changelogs by:
- Fetching recent Git commit messages
- Using AI to summarize and categorize changes
- Generating a well-formatted markdown changelog
- Saving the output to `docs/changelog.md`

## Dependencies

The script requires the following Python packages:
- `anthropic` - For Claude AI integration
- `python-dotenv` - For environment variable management
- `subprocess` - For Git command execution (built-in)
- `datetime` - For timestamps (built-in)
- `os` - For environment variables (built-in)

## Environment Variables

Before running the script, ensure these environment variables are set in your `.env` file:

```bash
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Functions

### `get_git_log(n=20)`

Fetches recent Git commit messages using the `git log` command.

**Parameters:**
- `n` (int, optional): Number of commits to retrieve. Defaults to 20.

**Returns:**
- `str`: Formatted commit messages or error message

**Example output:**
```
* Add user authentication feature
* Fix database connection timeout
* Update documentation for API endpoints
```

### `format_prompt(git_log: str) -> str`

Creates a structured prompt for Claude AI to process the commit messages.

**Parameters:**
- `git_log` (str): Raw Git commit messages

**Returns:**
- `str`: Formatted prompt with instructions for AI summarization

### `main()`

The primary function that orchestrates the entire changelog generation process:

1. Loads environment variables
2. Initializes Anthropic client
3. Fetches Git commit history
4. Sends prompt to Claude AI
5. Formats and writes the changelog

## Usage

### Basic Usage

```bash
python changelog_generator.py
```

### Expected Output

The script generates a file at `docs/changelog.md` with the following structure:

```markdown
# 📝 Changelog

_Last updated: 2024-01-15 14:30_

## Features
- Added user authentication system
- Implemented dark mode toggle

## Fixes
- Resolved database connection timeout issues
- Fixed responsive design on mobile devices

## Improvements
- Enhanced error handling in API calls
- Optimized database queries for better performance
```

## Notes and Suggestions

### ⚠️ Important Considerations

- **API Costs**: Each run consumes Anthropic API tokens. Monitor usage to avoid unexpected charges.
- **Git Repository**: Must be run within a Git repository with commit history.
- **File Permissions**: Ensure write permissions for the `docs/` directory.

### 🔧 Potential Improvements

1. **Error Handling**: Add more robust error handling for API failures and network issues.

2. **Configuration Options**: Consider adding command-line arguments for:
   ```python
   # Example enhancement
   import argparse
   parser = argparse.ArgumentParser()
   parser.add_argument('--commits', '-n', type=int, default=20)
   parser.add_argument('--output', '-o', default='docs/changelog.md')
   ```

3. **Incremental Updates**: Track the last processed commit to avoid regenerating the entire changelog.

4. **Multiple Output Formats**: Support for different changelog formats (JSON, HTML, etc.).

### 🚨 Troubleshooting

**Common Issues:**

- **"❌ Error reading git log"**: Ensure you're in a Git repository with commit history
- **API Authentication Errors**: Verify your `ANTHROPIC_API_KEY` is correctly set
- **File Write Errors**: Check that the `docs/` directory exists and is writable

### 📁 File Structure

```
project/
├── changelog_generator.py
├── .env
└── docs/
    └── changelog.md  # Generated output
```

## Security Considerations

- Store API keys securely in environment variables
- Never commit `.env` files to version control
- Consider using secret management tools for production environments