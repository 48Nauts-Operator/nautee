<!-- Auto-generated by Claude on 2025-06-08 08:24 -->

# Claude Review Tool Documentation

## Overview

The **Claude Review Tool** is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It supports two modes of operation:

1. **Manual File Review**: Review specific source files provided as command-line arguments
2. **Git Diff Review**: Automatically review changes using Git diff output

The tool generates structured feedback in Markdown format and saves it to a documentation file.

## Purpose

- Automate code review processes using AI
- Provide consistent, structured feedback on code quality
- Support both targeted file reviews and Git-based change reviews
- Generate documentation-ready output in Markdown format

## Prerequisites

- Python 3.x
- Anthropic API key
- Git (for diff mode)
- Required Python packages:
  - `anthropic`
  - `python-dotenv`

## Environment Setup

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Usage

### Manual File Review Mode
```bash
python claude_review.py file1.py file2.py file3.py
```

### Git Diff Review Mode
```bash
python claude_review.py
```

## Key Functions

### `load_code(file_paths)`

Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Handles missing files gracefully with warning messages
- Formats each file as a separate code block
- Assumes Python syntax highlighting

### `get_git_diff()`

Retrieves Git diff output with fallback strategies.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Fallback Strategy:**
1. Attempts `git diff origin/main...HEAD`
2. Falls back to `git diff HEAD^` if origin/main doesn't exist
3. Returns empty string if both fail

### `main()`

Main execution function that orchestrates the review process.

**Key Operations:**
1. Environment setup and API client initialization
2. Mode detection based on command-line arguments
3. Content preparation (files or diff)
4. Claude API interaction
5. Output generation

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:

- Timestamp of the review
- Structured feedback focusing on:
  - Bugs or logic issues
  - Code clarity
  - Suggested improvements
  - Style consistency

## Error Handling

- **Missing Files**: Warns and skips non-existent files
- **No Git Diff**: Creates a stub review file when no changes are detected
- **API Errors**: Displays error message and exits with status code 1

## Suggestions and Notes

### Improvements
- **File Type Detection**: Currently assumes Python files - consider adding language detection
- **Configuration**: Add support for custom output paths and review criteria
- **Token Management**: Monitor token usage for large diffs or multiple files
- **Parallel Processing**: For multiple files, consider parallel loading

### Best Practices
- Keep individual files under review reasonably sized to stay within token limits
- Use meaningful commit messages when in Git diff mode
- Regularly update the Claude model version in your environment variables
- Consider rate limiting for batch operations

### Security Considerations
- Store API keys securely using environment variables
- Be cautious when reviewing files containing sensitive information
- Consider implementing input validation for file paths

## Example Output Structure

```markdown
# ðŸ§  Claude Review

_Last updated: 2024-01-15 14:30_

## Summary
Brief overview of the review...

## Issues Found
- Critical bug in function X
- Style inconsistency in module Y

## Suggestions
- Consider refactoring method Z
- Add error handling for edge case A
```