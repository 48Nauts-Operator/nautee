<!-- Auto-generated by Claude on 2025-06-08 03:24 -->

# Claude Review Tool Documentation

## Overview

The **Claude Review Tool** is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It supports two primary modes of operation:

1. **Manual File Review**: Reviews specific source files provided as command-line arguments
2. **Git Diff Review**: Automatically reviews changes in a Git repository by analyzing diffs

The tool outputs structured feedback in Markdown format, making it easy to integrate into development workflows and documentation systems.

## Purpose

- Automate code review processes using AI
- Provide consistent, structured feedback on code quality
- Support both targeted file reviews and Git-based change reviews
- Generate readable Markdown documentation of review results

## Requirements

- Python 3.x
- Required packages:
  - `anthropic` - Claude AI API client
  - `python-dotenv` - Environment variable management
- Environment variables:
  - `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
  - `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

## Key Functions

### `load_code(file_paths)`

Combines multiple source files into a single Markdown-formatted string for review.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Handles missing files gracefully with warning messages
- Formats each file as a separate code block with proper syntax highlighting

### `get_git_diff()`

Retrieves Git diff information with fallback strategies.

**Returns:**
- `str`: Git diff output or empty string if unavailable

**Behavior:**
- First attempts: `git diff origin/main...HEAD`
- Fallback: `git diff HEAD^` if origin/main doesn't exist
- Returns empty string if both commands fail

### `main()`

The primary orchestration function that handles:
- Environment setup and API client initialization
- Mode detection (file review vs. git diff)
- Claude API interaction
- Output file generation

## Usage Examples

### Review Specific Files
```bash
python claude_review.py file1.py file2.py utils/helper.py
```

### Review Git Changes
```bash
python claude_review.py
```

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:

- **Header**: "ðŸ§  Claude Review" with timestamp
- **Structured Feedback**: Claude's analysis focusing on:
  - Bugs or logic issues
  - Code clarity and readability
  - Suggested improvements
  - Style consistency

## Configuration

### Environment Setup

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
```

### Directory Structure

The tool automatically creates a `docs/` directory if it doesn't exist.

## Error Handling

- **Missing Files**: Warns and skips non-existent files
- **Git Errors**: Gracefully falls back to alternative diff strategies
- **No Diff Available**: Creates a stub review file with appropriate message
- **API Errors**: Exits with error code 1 and descriptive message

## Notes and Suggestions

### Best Practices

- **API Key Security**: Store your Anthropic API key securely and never commit it to version control
- **File Types**: Currently optimized for Python files but can handle any text-based source code
- **Token Limits**: The tool uses a 1500 token limit for responses; consider this for large diffs

### Potential Improvements

- **Language Detection**: Add automatic language detection for better syntax highlighting
- **Configurable Output**: Allow custom output paths and formats
- **Batch Processing**: Add support for reviewing multiple commits or branches
- **Integration**: Consider adding CI/CD pipeline integration capabilities

### Limitations

- Requires active internet connection for Claude API calls
- Limited by Claude's context window for very large files or diffs
- Git diff mode requires a Git repository with proper remote configuration

## Integration Suggestions

- Add to pre-commit hooks for automatic review
- Integrate with CI/CD pipelines for pull request reviews  
- Use in code review workflows as a first-pass analysis tool
- Combine with existing linting and testing tools for comprehensive code quality checks