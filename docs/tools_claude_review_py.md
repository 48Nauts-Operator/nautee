<!-- Auto-generated by Claude on 2025-06-22 05:19 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It can analyze either specific source files or Git diffs, providing structured feedback in Markdown format.

## Purpose

This tool automates the code review process by:
- Analyzing Python source files for bugs, logic issues, and style consistency
- Reviewing Git diffs to provide feedback on code changes
- Generating structured, readable feedback in Markdown format
- Integrating with development workflows for continuous code quality improvement

## Features

- **Dual Operation Modes**: Review specific files or Git diffs
- **Intelligent Git Integration**: Automatically falls back between different Git diff strategies
- **Markdown Output**: Generates clean, formatted documentation
- **Error Handling**: Gracefully handles missing files and Git errors

## Prerequisites

- Python 3.6+
- Anthropic API key
- Git (for diff mode)
- Required Python packages:
  - `anthropic`
  - `python-dotenv`

## Setup

1. Install required dependencies:
```bash
pip install anthropic python-dotenv
```

2. Create a `.env` file with your configuration:
```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

## Usage

### Mode 1: File Review
Review specific files by passing them as arguments:
```bash
python claude_review.py file1.py file2.py
```

### Mode 2: Git Diff Review
Review changes in your Git repository:
```bash
python claude_review.py
```

## Functions

### `load_code(file_paths)`
Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Skips missing files with warning messages
- Formats each file with proper Markdown syntax highlighting

### `get_git_diff()`
Retrieves Git diff output with intelligent fallback strategies.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Fallback Strategy:**
1. Attempts `git diff origin/main...HEAD`
2. Falls back to `git diff HEAD^` if origin/main doesn't exist
3. Returns empty string if both fail

### `main()`
Main execution function that orchestrates the review process.

**Workflow:**
1. Loads environment configuration
2. Determines operation mode based on command-line arguments
3. Prepares appropriate prompts for Claude
4. Makes API call to Claude
5. Saves formatted output to `docs/claude_review.md`

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:
- Timestamp of the review
- Structured feedback from Claude
- Analysis of bugs, logic issues, code clarity, and style consistency

## Error Handling

- **Missing Files**: Warns about missing files but continues processing
- **Git Errors**: Gracefully handles repositories without proper Git setup
- **API Errors**: Catches and reports Claude API failures
- **No Changes**: Creates a stub review when no Git diff is available

## Configuration

### Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `ANTHROPIC_API_KEY` | Required | Your Anthropic API key |
| `ANTHROPIC_MODEL` | `claude-sonnet-4-20250514` | Claude model to use |

## Notes and Suggestions

### Best Practices
- Ensure your `ANTHROPIC_API_KEY` is properly configured
- Review the generated feedback before implementing suggestions
- Use in conjunction with existing code review processes, not as a replacement

### Limitations
- Currently optimized for Python files (syntax highlighting)
- Token limit of 1500 may truncate very long reviews
- Requires internet connection for Claude API access

### Potential Improvements
- Add support for multiple programming languages
- Implement configurable token limits
- Add batch processing for large codebases
- Include integration with popular IDEs

### Security Considerations
- Store API keys securely using environment variables
- Be mindful of sending sensitive code to external APIs
- Consider using local models for highly confidential projects

## Example Output Structure

The generated review follows this format:
```markdown
# ðŸ§  Claude Review

_Last updated: 2024-01-15 14:30_

## Summary
[High-level overview of findings]

## Issues Found
- [Specific bugs or problems]

## Suggestions
- [Improvement recommendations]

## Code Quality Notes
- [Style and consistency feedback]
```