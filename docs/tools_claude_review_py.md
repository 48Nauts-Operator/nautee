<!-- Auto-generated by Claude on 2025-06-22 01:52 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It operates in two modes: reviewing specific source files or analyzing Git diffs. The tool generates structured feedback in Markdown format, making it easy to integrate into development workflows.

## Purpose

- **Automated Code Review**: Get AI-powered feedback on code quality, bugs, and improvements
- **Git Integration**: Review changes in your Git repository automatically
- **Documentation Generation**: Output structured reviews in Markdown format
- **Development Workflow**: Streamline code review processes with AI assistance

## Requirements

- Python 3.x
- `anthropic` library
- `python-dotenv` library
- Git (for diff mode)
- Anthropic API key

## Environment Setup

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Usage Modes

### Mode 1: Manual File Review

Review specific files by passing them as command-line arguments:

```bash
python claude_review.py file1.py file2.py module/file3.py
```

### Mode 2: Git Diff Review

Run without arguments to review Git changes:

```bash
python claude_review.py
```

The tool attempts to get diffs in this order:
1. `git diff origin/main...HEAD`
2. `git diff HEAD^` (fallback)

## Key Functions

### `load_code(file_paths)`

Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to load

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Skips missing files with warnings
- Formats each file in code blocks with syntax highlighting
- Preserves file path information

### `get_git_diff()`

Retrieves Git diff output using subprocess calls.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Behavior:**
- First tries `git diff origin/main...HEAD`
- Falls back to `git diff HEAD^` if origin/main doesn't exist
- Returns empty string if both commands fail

### `main()`

Main execution function that orchestrates the review process.

**Key Steps:**
1. Load environment variables and initialize Claude client
2. Determine operation mode (file review vs. git diff)
3. Prepare appropriate prompt for Claude
4. Make API call to Claude
5. Save formatted output to `docs/claude_review.md`

## Output

The tool generates a Markdown file at `docs/claude_review.md` with:

- **Header**: "ðŸ§  Claude Review" with timestamp
- **Structured Feedback**: Claude's analysis focusing on:
  - Bugs or logic issues
  - Code clarity
  - Suggested improvements
  - Style consistency

## Error Handling

- **Missing Files**: Warns about missing files but continues processing
- **Git Errors**: Gracefully falls back between git diff commands
- **API Errors**: Catches and reports Claude API errors
- **No Diff Available**: Creates a stub review file when no changes are found

## Configuration Options

### Environment Variables

- `ANTHROPIC_API_KEY` (required): Your Anthropic API key
- `ANTHROPIC_MODEL` (optional): Claude model to use (defaults to `claude-sonnet-4-20250514`)

### Customizable Parameters

- **Output Directory**: Currently hardcoded to `docs/`
- **Max Tokens**: Set to 1500 for Claude responses
- **Output Filename**: `claude_review.md`

## Notes and Suggestions

### Best Practices

- **API Key Security**: Keep your API key in `.env` and add it to `.gitignore`
- **File Size Limits**: Be mindful of Claude's token limits when reviewing large files
- **Git Integration**: Run from your repository root for best Git diff results

### Potential Improvements

- Add support for different output formats (HTML, plain text)
- Implement file filtering by extension
- Add configuration file support for custom prompts
- Include support for multiple Git branches
- Add batch processing for multiple repositories

### Integration Ideas

- **CI/CD Pipeline**: Integrate into GitHub Actions or other CI systems
- **Pre-commit Hooks**: Run automatically before commits
- **IDE Integration**: Create plugins for popular editors
- **Team Workflows**: Schedule regular reviews of recent changes

## Example Output Structure

```markdown
# ðŸ§  Claude Review

_Last updated: 2024-01-15 14:30_

## Summary
Brief overview of the reviewed code...

## Issues Found
- **Bug**: Description of potential bug
- **Style**: Code style inconsistencies

## Suggestions
- Refactor function X for better readability
- Add error handling for edge case Y

## Positive Aspects
- Good use of docstrings
- Clear variable naming
```