<!-- Auto-generated by Claude on 2025-05-31 22:40 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It can analyze either specified source files or Git diffs, providing structured feedback in Markdown format.

## Purpose

This tool serves as an automated code review assistant that can:
- Review specific source files for bugs, clarity, and improvement opportunities
- Analyze Git diffs to provide feedback on code changes
- Generate structured, readable reviews in Markdown format
- Integrate into development workflows for consistent code quality checks

## Features

- **Dual Operation Modes**: File-based review or Git diff analysis
- **Markdown Output**: Generates well-formatted documentation
- **Flexible Git Integration**: Automatically handles different Git scenarios
- **Error Handling**: Graceful handling of missing files and Git issues
- **Configurable Model**: Supports different Claude model versions

## Requirements

### Dependencies
```python
anthropic  # Claude AI API client
python-dotenv  # Environment variable management
```

### Environment Variables
Create a `.env` file with:
```
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

## Usage

### Mode 1: Review Specific Files
```bash
python claude_review.py file1.py file2.py file3.py
```

### Mode 2: Review Git Diff
```bash
python claude_review.py
```

## Key Functions

### `load_code(file_paths)`
Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Skips missing files with warning messages
- Formats each file with proper Markdown code blocks
- Assumes Python syntax highlighting (may need modification for other languages)

### `get_git_diff()`
Retrieves Git diff output with fallback strategies.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Fallback Strategy:**
1. First attempts: `git diff origin/main...HEAD`
2. If failed, tries: `git diff HEAD^`
3. Returns empty string if both fail

### `main()`
The primary orchestration function that:
- Sets up the Claude API client
- Determines operation mode based on command-line arguments
- Constructs appropriate prompts for Claude
- Handles API communication and error management
- Saves results to `docs/claude_review.md`

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:
- Timestamp of the review
- Structured feedback from Claude
- Analysis focusing on:
  - Bugs or logic issues
  - Code clarity and readability
  - Suggested improvements
  - Style consistency

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

1. **API Costs**: Each review consumes Claude API tokens. Monitor usage for cost management.

2. **Security**: Never commit your `.env` file containing API keys to version control.

3. **File Type Assumption**: The tool assumes Python files but could be modified to detect file types automatically.

### üîß Potential Improvements

1. **Language Detection**: 
   ```python
   # Consider adding file extension detection
   def detect_language(file_path):
       ext = os.path.splitext(file_path)[1]
       language_map = {'.py': 'python', '.js': 'javascript', '.java': 'java'}
       return language_map.get(ext, 'text')
   ```

2. **Configuration File**: Replace hardcoded values with a configuration file for better flexibility.

3. **Batch Processing**: Add support for reviewing entire directories or project structures.

4. **Output Formats**: Consider supporting additional output formats (JSON, HTML, etc.).

### üöÄ Integration Ideas

- **CI/CD Integration**: Add to GitHub Actions or other CI pipelines
- **Pre-commit Hooks**: Use as a Git pre-commit hook for automatic reviews
- **IDE Plugin**: Develop IDE extensions for seamless integration

### üìÅ File Structure
```
project/
‚îú‚îÄ‚îÄ claude_review.py
‚îú‚îÄ‚îÄ .env                 # API keys (do not commit)
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ claude_review.md # Generated output
‚îî‚îÄ‚îÄ requirements.txt     # Dependencies
```

## Error Handling

The tool includes robust error handling for:
- Missing source files (skipped with warnings)
- Git command failures (graceful fallbacks)
- Claude API errors (proper error reporting)
- Missing environment variables (handled by anthropic library)