<!-- Auto-generated by Claude on 2025-06-22 04:31 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that automates code review using Anthropic's Claude AI model. It can operate in two modes: reviewing specific source files or analyzing Git diffs. The tool generates structured feedback in Markdown format, making it ideal for integration into development workflows.

## Purpose

- **Automated Code Review**: Leverage Claude AI for consistent, thorough code analysis
- **Flexible Input**: Support both manual file selection and Git diff analysis
- **Structured Output**: Generate readable Markdown reports for easy integration
- **Development Workflow Integration**: Seamlessly fit into existing Git-based workflows

## Requirements

- Python 3.x
- Required packages:
  - `anthropic` - Claude AI API client
  - `python-dotenv` - Environment variable management
- Environment variables:
  - `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
  - `ANTHROPIC_MODEL` - Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

## Usage

### Mode 1: Manual File Review
```bash
python claude_review.py file1.py file2.py [additional_files...]
```

### Mode 2: Git Diff Review
```bash
python claude_review.py
```

## Key Functions

### `load_code(file_paths)`
Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Gracefully handles missing files with warning messages
- Formats each file with proper Markdown code blocks
- Assumes Python syntax highlighting (may need adjustment for other languages)

### `get_git_diff()`
Retrieves Git diff output with fallback strategies.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Behavior:**
- First attempts: `git diff origin/main...HEAD`
- Fallback: `git diff HEAD^` if origin/main doesn't exist
- Returns empty string if both commands fail

### `main()`
Primary execution function that orchestrates the review process.

**Workflow:**
1. Loads environment variables and initializes Claude client
2. Creates output directory (`docs/`)
3. Determines operating mode based on command-line arguments
4. Generates appropriate prompt for Claude
5. Makes API call and processes response
6. Saves formatted output to `docs/claude_review.md`

## Output

The tool generates a Markdown file (`docs/claude_review.md`) containing:

- **Header**: "üß† Claude Review" with timestamp
- **Review Content**: Claude's structured feedback focusing on:
  - Bugs or logic issues
  - Code clarity and readability
  - Suggested improvements
  - Style consistency

## Configuration

### Environment Setup
Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional
```

### Directory Structure
```
project/
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ claude_review.py
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ claude_review.md  # Generated output
```

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

- **API Costs**: Each review consumes Claude API tokens (max 1500 tokens per request)
- **File Size Limits**: Large files or diffs may exceed token limits
- **Language Assumption**: Code blocks default to Python syntax highlighting

### üîß Potential Improvements

1. **Language Detection**: Auto-detect file types for proper syntax highlighting
2. **Token Management**: Add token counting and chunking for large inputs
3. **Configuration File**: Support for custom prompts and review criteria
4. **Output Formats**: Add support for other output formats (JSON, HTML)
5. **Git Integration**: Enhanced Git operations and branch detection

### üí° Usage Tips

- **Regular Reviews**: Integrate into CI/CD pipelines for automated reviews
- **Team Standards**: Customize prompts to match your team's coding standards
- **Incremental Reviews**: Use Git diff mode for focused reviews of changes
- **Documentation**: Keep review outputs for historical reference and learning

### üêõ Error Handling

The script includes basic error handling for:
- Missing files (warnings, continues processing)
- Git command failures (graceful fallbacks)
- API errors (exits with error code)

Consider adding more robust error handling for production use.