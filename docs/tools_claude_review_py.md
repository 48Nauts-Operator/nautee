<!-- Auto-generated by Claude on 2025-06-02 04:30 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It supports two distinct modes of operation:

1. **Manual File Review**: Reviews specific source files provided as command-line arguments
2. **Git Diff Review**: Automatically reviews changes in a Git repository by analyzing diffs

The tool outputs structured feedback in Markdown format, making it easy to integrate into development workflows and documentation systems.

## Purpose

- Automate code review processes using AI
- Provide consistent, structured feedback on code quality
- Support both targeted file reviews and Git-based change reviews
- Generate documentation-ready output in Markdown format

## Prerequisites

### Required Dependencies

```bash
pip install anthropic python-dotenv
```

### Environment Variables

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

## Usage

### Mode 1: Manual File Review

Review specific source files:

```bash
python claude_review.py file1.py file2.py file3.py
```

### Mode 2: Git Diff Review

Review recent Git changes (no arguments):

```bash
python claude_review.py
```

## Key Functions

### `load_code(file_paths)`

Combines multiple source files into a single Markdown-formatted string for review.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all source files

**Features:**
- Handles missing files gracefully with warning messages
- Formats each file with appropriate syntax highlighting
- Combines multiple files into a single reviewable document

### `get_git_diff()`

Retrieves Git diff output with fallback strategies for maximum compatibility.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Fallback Strategy:**
1. First attempts: `git diff origin/main...HEAD`
2. If failed, tries: `git diff HEAD^`
3. Returns empty string if both fail

### `main()`

Primary execution function that orchestrates the entire review process.

**Key Responsibilities:**
- Environment setup and API client initialization
- Mode detection based on command-line arguments
- Prompt construction for different review types
- Claude API interaction
- Output file generation

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:

- **Header**: "ðŸ§  Claude Review" with timestamp
- **Structured Feedback**: AI-generated review focusing on:
  - Bugs or logic issues
  - Code clarity and readability
  - Suggested improvements
  - Style consistency

## Configuration Options

### Model Selection

Override the default Claude model via environment variable:

```env
ANTHROPIC_MODEL=claude-3-sonnet-20240229
```

### Output Directory

The script automatically creates a `docs/` directory and saves reviews as `claude_review.md`.

## Error Handling

The tool includes robust error handling for common scenarios:

- **Missing Files**: Warns about missing files but continues processing others
- **Git Errors**: Graceful fallback when Git commands fail
- **API Errors**: Clear error messages for Claude API issues
- **No Changes**: Creates stub review when no Git diff is available

## Notes and Suggestions

### Best Practices

- **API Key Security**: Never commit your `.env` file to version control
- **File Size Limits**: Be mindful of Claude's token limits when reviewing large files
- **Git Setup**: Ensure your repository has proper remote configuration for diff mode

### Integration Ideas

- **CI/CD Integration**: Run as part of pull request workflows
- **Pre-commit Hooks**: Integrate with Git hooks for automatic reviews
- **IDE Integration**: Create editor extensions to trigger reviews on demand

### Limitations

- **Token Limits**: Large codebases may exceed Claude's context window
- **Language Support**: Currently optimized for Python (easily extensible)
- **Network Dependency**: Requires internet connection for Claude API access

## Example Output Structure

```markdown
# ðŸ§  Claude Review

_Last updated: 2024-01-15 14:30_

## Summary
Brief overview of the code review...

## Issues Found
- Critical bugs or logic errors
- Performance concerns

## Suggestions
- Code improvement recommendations
- Style and clarity enhancements

## Positive Aspects
- Well-implemented features
- Good practices observed
```