<!-- Auto-generated by Claude on 2025-06-22 17:18 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It can analyze either specific source files or Git diffs, providing structured feedback in a Markdown format. The tool is designed to help developers get AI-powered insights on code quality, potential bugs, and improvement suggestions.

## Purpose

- **Automated Code Review**: Get AI-powered feedback on code changes or specific files
- **Git Integration**: Seamlessly review Git diffs using Claude's analysis
- **Structured Output**: Generate consistent, readable Markdown reports
- **Development Workflow**: Integrate AI reviews into development processes

## Features

### Two Operating Modes

1. **Manual File Review**: Analyze specific files provided as command-line arguments
2. **Git Diff Review**: Automatically analyze changes in Git repository

### Key Capabilities

- Combines multiple files into a single review
- Handles missing files gracefully
- Supports multiple Git diff strategies
- Generates timestamped Markdown reports
- Configurable Claude model selection

## Functions

### `load_code(file_paths)`

Combines multiple source files into a single Markdown-formatted string for review.

**Parameters:**
- `file_paths` (list): List of file paths to analyze

**Returns:**
- `str`: Markdown-formatted string containing all source files

**Features:**
- Skips missing files with warning messages
- Formats each file with proper Markdown code blocks
- Assumes Python syntax highlighting (may need adjustment for other languages)

```python
# Example usage
files = ["main.py", "utils.py"]
combined = load_code(files)
```

### `get_git_diff()`

Retrieves Git diff output using fallback strategies.

**Returns:**
- `str`: Git diff string or empty string if unavailable

**Fallback Strategy:**
1. First attempts: `git diff origin/main...HEAD`
2. If failed, tries: `git diff HEAD^`
3. Returns empty string if both fail

### `main()`

Main execution function that orchestrates the entire review process.

**Workflow:**
1. Loads environment variables and initializes Claude client
2. Creates output directory structure
3. Determines operating mode based on command-line arguments
4. Generates appropriate prompts for Claude
5. Makes API call and processes response
6. Saves formatted review to Markdown file

## Configuration

### Environment Variables

Create a `.env` file with the following variables:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

### Required Dependencies

```bash
pip install anthropic python-dotenv
```

## Usage

### Manual File Review

```bash
python claude_review.py file1.py file2.py file3.py
```

### Git Diff Review

```bash
python claude_review.py
```

### Output

Reviews are saved to `docs/claude_review.md` with:
- Timestamp header
- Structured feedback covering:
  - Bugs or logic issues
  - Code clarity
  - Suggested improvements
  - Style consistency

## Notes and Suggestions

### Improvements Needed

- **Language Detection**: Currently assumes Python syntax highlighting
- **Error Handling**: Could benefit from more granular exception handling
- **Configuration**: Consider adding command-line options for model selection and output paths
- **File Type Support**: Add support for different programming languages

### Security Considerations

- Store API keys securely using environment variables
- Be mindful of sending sensitive code to external APIs
- Consider implementing rate limiting for large codebases

### Integration Suggestions

- **CI/CD Integration**: Can be integrated into GitHub Actions or other CI systems
- **Pre-commit Hooks**: Use as a Git pre-commit hook for automatic reviews
- **IDE Integration**: Could be wrapped in IDE extensions

### Example Output Structure

```markdown
# ðŸ§  Claude Review

_Last updated: 2024-01-15 14:30_

## Summary
Brief overview of the review...

## Issues Found
- Critical issues
- Minor improvements

## Recommendations
- Suggested changes
- Best practices
```

## Error Handling

The tool includes basic error handling for:
- Missing files (warnings, continues execution)
- Git command failures (fallback strategies)
- API errors (exits with error code)
- Missing API keys (handled by anthropic library)

## Limitations

- Requires active internet connection for Claude API
- Limited by Claude's token limits (currently set to 1500 max tokens)
- Git diff strategy may not work in all repository configurations
- No support for binary files or very large files