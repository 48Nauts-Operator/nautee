<!-- Auto-generated by Claude on 2025-06-22 22:18 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It can operate in two modes: reviewing specific source files or analyzing Git diffs. The tool generates structured feedback in Markdown format, making it easy to integrate into development workflows.

## Purpose

This tool automates code review processes by:
- Analyzing source code files for bugs, clarity, and improvements
- Reviewing Git diffs to catch issues in commits or pull requests
- Generating consistent, structured feedback in Markdown format
- Integrating AI-powered code analysis into development workflows

## Requirements

- Python 3.x
- `anthropic` library
- `python-dotenv` library
- Git (for diff mode)
- Anthropic API key

## Configuration

The script requires the following environment variables:
- `ANTHROPIC_API_KEY`: Your Anthropic API key (required)
- `ANTHROPIC_MODEL`: Claude model to use (optional, defaults to `claude-sonnet-4-20250514`)

These can be set in a `.env` file in the project root.

## Usage

### Mode 1: File Review
```bash
python claude_review.py file1.py file2.py [additional_files...]
```

### Mode 2: Git Diff Review
```bash
python claude_review.py
```

## Key Functions

### `load_code(file_paths)`
Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Skips missing files with warning messages
- Formats each file as a separate code block
- Assumes Python syntax highlighting

### `get_git_diff()`
Retrieves Git diff output with fallback strategies.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Behavior:**
- First attempts `git diff origin/main...HEAD`
- Falls back to `git diff HEAD^` if origin/main doesn't exist
- Returns empty string if both methods fail

### `main()`
Primary execution function that handles:
- Environment setup and API client initialization
- Mode detection based on command-line arguments
- Prompt construction for Claude API
- API communication and response handling
- Output file generation

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:
- Timestamp of the review
- Structured feedback from Claude
- Analysis focusing on:
  - Bugs or logic issues
  - Code clarity
  - Suggested improvements
  - Style consistency

## Error Handling

- **Missing files**: Warns and continues processing remaining files
- **Git errors**: Gracefully falls back between diff strategies
- **API errors**: Exits with error code 1 and descriptive message
- **No diff available**: Creates stub review file and exits cleanly

## Notes and Suggestions

### Best Practices
- Ensure your `.env` file is properly configured before running
- Use meaningful file paths when reviewing specific files
- Run from a Git repository root for optimal diff functionality

### Limitations
- Assumes Python syntax for file review mode
- Limited to 1500 max tokens for Claude responses
- Requires active internet connection for API calls

### Potential Improvements
- Add support for multiple programming languages
- Implement configurable output directories
- Add support for custom review criteria
- Include file filtering based on extensions
- Add batch processing capabilities

### Security Considerations
- Store API keys securely in `.env` files
- Add `.env` to your `.gitignore` file
- Consider using environment-specific API keys for different deployment stages

## Integration Tips

This tool can be integrated into:
- Pre-commit hooks for automatic review
- CI/CD pipelines for pull request analysis
- Development workflows as a manual review step
- Code quality gates in deployment processes