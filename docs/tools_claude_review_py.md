<!-- Auto-generated by Claude on 2025-06-22 15:19 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It can operate in two modes: reviewing specific source files or analyzing Git diffs. The tool outputs structured feedback in Markdown format, making it easy to integrate into development workflows.

## Purpose

- **Automated Code Review**: Get AI-powered feedback on code quality, bugs, and improvements
- **Git Integration**: Review changes in Git diffs automatically
- **Documentation Generation**: Output reviews in readable Markdown format
- **Development Workflow Integration**: Streamline code review processes

## Requirements

- Python 3.6+
- `anthropic` library
- `python-dotenv` library
- Git (for diff mode)
- Anthropic API key

## Setup

1. Install required dependencies:
   ```bash
   pip install anthropic python-dotenv
   ```

2. Create a `.env` file with your Anthropic API credentials:
   ```
   ANTHROPIC_API_KEY=your_api_key_here
   ANTHROPIC_MODEL=claude-sonnet-4-20250514
   ```

## Usage

### Mode 1: File Review
Review specific source files:
```bash
python claude_review.py file1.py file2.py file3.py
```

### Mode 2: Git Diff Review
Review Git changes (no arguments):
```bash
python claude_review.py
```

## Core Functions

### `load_code(file_paths)`

Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Handles missing files gracefully with warnings
- Formats code in Markdown code blocks
- Preserves file structure and naming

### `get_git_diff()`

Retrieves Git diff output with fallback strategies.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Behavior:**
- First attempts `git diff origin/main...HEAD`
- Falls back to `git diff HEAD^` if origin/main doesn't exist
- Returns empty string if Git operations fail

### `main()`

Main execution function that orchestrates the review process.

**Key Operations:**
1. Environment setup and API client initialization
2. Mode detection (file review vs. Git diff)
3. Prompt construction based on selected mode
4. Claude API interaction
5. Markdown output generation

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:

- **Header**: "ðŸ§  Claude Review" with timestamp
- **Structured Feedback**: AI-generated review focusing on:
  - Bugs or logic issues
  - Code clarity and readability
  - Suggested improvements
  - Style consistency

## Configuration

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `ANTHROPIC_API_KEY` | Your Anthropic API key | Required |
| `ANTHROPIC_MODEL` | Claude model to use | `claude-sonnet-4-20250514` |

### Output Configuration

- **Output Directory**: `docs/` (created automatically)
- **Output File**: `claude_review.md`
- **Token Limit**: 1500 tokens per review

## Error Handling

The script includes robust error handling for:

- **Missing Files**: Warns and skips non-existent files
- **Git Failures**: Graceful fallback between Git diff strategies
- **API Errors**: Clear error messages for Claude API issues
- **No Diff Available**: Creates stub review when no changes detected

## Notes and Suggestions

### Best Practices

- **API Key Security**: Keep your Anthropic API key secure and never commit it to version control
- **File Size Limits**: Be mindful of token limits when reviewing large files
- **Git Repository**: Ensure you're in a Git repository when using diff mode

### Potential Improvements

- **File Type Detection**: Currently assumes Python files but could be extended for other languages
- **Configurable Output**: Allow custom output paths and formats
- **Batch Processing**: Add support for reviewing multiple diffs or file sets
- **Integration**: Consider CI/CD pipeline integration for automated reviews

### Limitations

- **Token Constraints**: Limited by Claude's token limits (currently 1500)
- **File Format**: Hardcoded for Python syntax highlighting
- **Git Dependency**: Diff mode requires Git repository context

## Example Output Structure

```markdown
# ðŸ§  Claude Review

_Last updated: 2024-01-15 14:30_

## Summary
[AI-generated summary of changes]

## Issues Found
- [Specific bugs or problems]

## Suggestions
- [Improvement recommendations]

## Code Quality Notes
- [Style and clarity feedback]
```