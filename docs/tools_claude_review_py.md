<!-- Auto-generated by Claude on 2025-06-22 14:17 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that automates code reviews using Anthropic's Claude AI. It provides two modes of operation: reviewing specific source files or analyzing Git diffs. The tool generates structured feedback in Markdown format, making it easy to integrate into development workflows.

## Purpose

This tool helps developers get AI-powered code reviews by:
- Analyzing individual source files for bugs, clarity, and improvements
- Reviewing Git diffs to catch issues before merging
- Generating consistent, structured feedback in Markdown format
- Integrating with existing development workflows

## Dependencies

The script requires the following Python packages:
- `anthropic` - For Claude AI API integration
- `python-dotenv` - For environment variable management
- `subprocess` - For Git operations (built-in)
- `datetime` - For timestamps (built-in)
- `os`, `sys` - For file and system operations (built-in)

## Environment Setup

Create a `.env` file in your project root with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Usage

### Mode 1: Review Specific Files
```bash
python claude_review.py file1.py file2.py file3.py
```

### Mode 2: Review Git Diff
```bash
python claude_review.py
```

## Key Functions

### `load_code(file_paths)`
Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Handles missing files gracefully with warning messages
- Formats each file with proper Markdown code blocks
- Assumes Python syntax highlighting (may need adjustment for other languages)

### `get_git_diff()`
Retrieves Git diff output with fallback strategies.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Fallback Strategy:**
1. First attempts `git diff origin/main...HEAD`
2. Falls back to `git diff HEAD^` if origin/main doesn't exist
3. Returns empty string if both fail

### `main()`
Main execution function that:
- Sets up environment and API client
- Determines operation mode based on command-line arguments
- Constructs appropriate prompts for Claude
- Makes API calls and saves results

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:
- Header with brain emoji and timestamp
- Structured feedback from Claude
- Analysis of bugs, logic issues, code clarity, and improvements
- Style consistency recommendations

## Notes and Suggestions

### ‚ö†Ô∏è Important Considerations

1. **API Key Security**: Ensure your `.env` file is in `.gitignore` to prevent API key exposure
2. **File Type Assumption**: The tool assumes Python files but could be extended for other languages
3. **Git Repository**: Git diff mode requires the script to run within a Git repository

### üîß Potential Improvements

1. **Language Detection**: Add automatic language detection for proper syntax highlighting
2. **Error Handling**: Enhance error handling for network issues and API rate limits
3. **Configuration**: Add support for custom output paths and review templates
4. **File Filtering**: Add options to exclude certain file types or directories

### üí° Best Practices

- Run the tool as part of your pre-commit or CI/CD pipeline
- Review the generated feedback before making changes
- Use specific file reviews for focused analysis
- Use diff mode for quick change validation

### üöÄ Integration Ideas

- Integrate with GitHub Actions for automated PR reviews
- Add to pre-commit hooks for immediate feedback
- Create wrapper scripts for team-specific review templates
- Combine with other code quality tools for comprehensive analysis

## Error Handling

The script includes error handling for:
- Missing files (warns and continues)
- Git command failures (graceful fallbacks)
- Claude API errors (exits with error code)
- Missing environment variables (handled by anthropic library)

## Output Structure

Generated reviews follow this structure:
```markdown
# üß† Claude Review

_Last updated: YYYY-MM-DD HH:MM_

[Claude's structured feedback here]
```