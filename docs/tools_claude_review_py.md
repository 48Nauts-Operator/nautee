<!-- Auto-generated by Claude on 2025-06-22 20:21 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It supports two main modes of operation:

1. **Manual File Review**: Review specific source files provided as command-line arguments
2. **Git Diff Review**: Automatically review changes in a Git repository by analyzing diffs

The tool outputs structured feedback in Markdown format, making it easy to integrate into development workflows and documentation.

## Purpose

- Automate code review processes using AI
- Provide consistent, structured feedback on code quality
- Support both targeted file reviews and Git-based change reviews
- Generate readable Markdown reports for easy integration into development workflows

## Requirements

- Python 3.x
- `anthropic` library for Claude API access
- `python-dotenv` for environment variable management
- Git (for diff functionality)
- Valid Anthropic API key

## Installation

```bash
pip install anthropic python-dotenv
```

## Configuration

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to claude-sonnet-4-20250514
```

## Usage

### Manual File Review

Review specific files by providing them as command-line arguments:

```bash
python claude_review.py file1.py file2.py module/file3.py
```

### Git Diff Review

Run without arguments to review Git changes:

```bash
python claude_review.py
```

## Key Functions

### `load_code(file_paths)`

Combines multiple source files into a single Markdown-formatted string for review.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Handles missing files gracefully with warning messages
- Formats code blocks with proper syntax highlighting
- Includes file paths as headers for organization

### `get_git_diff()`

Retrieves Git diff output with fallback strategies for different repository states.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Strategy:**
1. First attempts `git diff origin/main...HEAD`
2. Falls back to `git diff HEAD^` if origin/main doesn't exist
3. Returns empty string if both fail

### `main()`

Primary orchestration function that handles:
- Environment setup and API client initialization
- Command-line argument processing
- Mode selection (file review vs. git diff)
- Claude API interaction
- Output file generation

## Output

The tool generates a Markdown file at `docs/claude_review.md` containing:

- **Header**: "ðŸ§  Claude Review" with timestamp
- **Structured Feedback**: AI-generated review focusing on:
  - Bugs or logic issues
  - Code clarity and readability
  - Suggested improvements
  - Style consistency

## Error Handling

- **Missing Files**: Warns about missing files but continues processing
- **Git Errors**: Gracefully handles repositories without proper Git setup
- **API Errors**: Catches and reports Claude API failures
- **No Changes**: Creates stub review when no diff is available

## Notes and Suggestions

### Best Practices

- Ensure your `ANTHROPIC_API_KEY` is properly configured
- Run the tool from your project root directory for best Git integration
- Review the generated Markdown file before acting on suggestions

### Limitations

- **Token Limit**: Currently set to 1500 tokens maximum response
- **File Types**: Assumes Python files but can work with any text-based code
- **Git Dependency**: Git diff mode requires a properly initialized Git repository

### Potential Improvements

- Add support for custom output file paths
- Implement configurable token limits
- Add support for multiple programming languages with appropriate syntax highlighting
- Include file type detection for better code block formatting
- Add batch processing capabilities for large codebases

### Integration Tips

- Consider integrating this tool into your CI/CD pipeline
- Use it as a pre-commit hook for automated code quality checks
- Combine with other code quality tools for comprehensive analysis

## File Structure

```
project/
â”œâ”€â”€ .env                    # Environment variables
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ claude_review.md   # Generated review output
â””â”€â”€ claude_review.py       # Main script
```