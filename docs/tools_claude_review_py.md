<!-- Auto-generated by Claude on 2025-06-01 23:18 -->

# Claude Review Tool Documentation

## Overview

The Claude Review Tool is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It can operate in two modes: reviewing specific source files or analyzing Git diffs. The tool generates structured feedback in Markdown format, making it easy to integrate into development workflows.

## Purpose

This tool helps developers get AI-powered code reviews by:
- Analyzing source code files for bugs, clarity, and improvements
- Reviewing Git diffs to catch issues before merging
- Generating consistent, structured feedback in Markdown format
- Automating the code review process for solo developers or small teams

## Features

- **Dual Mode Operation**: Review specific files or Git diffs
- **Markdown Output**: Structured, readable feedback format
- **Git Integration**: Automatically detects changes between branches
- **Error Handling**: Graceful handling of missing files and Git errors
- **Configurable Model**: Supports different Claude model versions

## Installation & Setup

### Prerequisites

```bash
pip install anthropic python-dotenv
```

### Environment Configuration

Create a `.env` file in your project root:

```env
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

## Usage

### Mode 1: Review Specific Files

```bash
python claude_review.py file1.py file2.py file3.py
```

### Mode 2: Review Git Diff

```bash
python claude_review.py
```

## Key Functions

### `load_code(file_paths)`

Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to load

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Skips missing files with warnings
- Formats each file as a code block with syntax highlighting
- Handles file reading errors gracefully

### `get_git_diff()`

Retrieves Git diff output with fallback strategies.

**Returns:**
- `str`: Git diff string or empty string if unavailable

**Behavior:**
- First attempts `git diff origin/main...HEAD`
- Falls back to `git diff HEAD^` if origin/main doesn't exist
- Returns empty string if Git operations fail

### `main()`

The primary function that orchestrates the review process.

**Key Steps:**
1. Loads environment variables and initializes Claude client
2. Determines operation mode based on command-line arguments
3. Prepares appropriate prompt for Claude
4. Makes API call and processes response
5. Saves formatted output to `docs/claude_review.md`

## Output

The tool generates a Markdown file at `docs/claude_review.md` with:
- Timestamp of the review
- Structured feedback focusing on:
  - Bugs or logic issues
  - Code clarity
  - Suggested improvements
  - Style consistency

## Error Handling

- **Missing Files**: Skipped with warning messages
- **Git Errors**: Fallback strategies and graceful degradation
- **API Errors**: Clear error messages with non-zero exit codes
- **Missing API Key**: Handled by the Anthropic client

## Notes & Suggestions

### Security Considerations
- Store your API key securely in the `.env` file
- Add `.env` to your `.gitignore` to avoid committing credentials
- Consider using environment variables in CI/CD environments

### Best Practices
- Run the tool as part of your pre-commit hooks
- Review the generated feedback before merging changes
- Use specific file reviews for focused analysis
- Use Git diff mode for comprehensive change reviews

### Limitations
- Token limit of 1500 may truncate large reviews
- Requires internet connection for Claude API
- Git diff mode requires a Git repository

### Potential Improvements
- Add support for different output formats (HTML, plain text)
- Implement configurable token limits
- Add support for multiple Git diff strategies
- Include file filtering based on extensions
- Add integration with popular code review platforms

## Example Output Structure

```markdown
# ðŸ§  Claude Review

_Last updated: 2024-01-15 14:30_

## Issues Found

### Critical
- [Bug description and location]

### Suggestions
- [Improvement recommendations]

## Code Quality
- [Style and clarity feedback]
```