<!-- Auto-generated by Claude on 2025-06-02 05:21 -->

# Claude Review Tool Documentation

## Overview

The **Claude Review Tool** is a Python script that leverages Anthropic's Claude AI to perform automated code reviews. It can analyze either specific source files or Git diffs, providing structured feedback in Markdown format.

## Purpose

- **Automated Code Review**: Get AI-powered code review feedback without manual reviewer overhead
- **Git Integration**: Review changes in your Git repository automatically
- **Structured Output**: Generate consistent, Markdown-formatted review documentation
- **Flexible Input**: Support both individual file review and diff-based review

## Features

- üîç **Dual Review Modes**: Review specific files or Git diffs
- üìù **Markdown Output**: Clean, structured feedback saved to documentation
- üîß **Git Integration**: Automatically detects and reviews Git changes
- ‚öôÔ∏è **Configurable**: Uses environment variables for API keys and model selection

## Requirements

### Dependencies
```python
anthropic     # Claude API client
python-dotenv # Environment variable management
```

### Environment Variables
Create a `.env` file with:
```bash
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, has default
```

## Usage

### Mode 1: Review Specific Files
```bash
python claude_review.py file1.py file2.py file3.py
```

### Mode 2: Review Git Diff
```bash
python claude_review.py
```
When no files are specified, the tool automatically reviews Git changes.

## Core Functions

### `load_code(file_paths)`
Combines multiple source files into a single Markdown-formatted string.

**Parameters:**
- `file_paths` (list): List of file paths to process

**Returns:**
- `str`: Markdown-formatted string containing all file contents

**Features:**
- Skips missing files with warning messages
- Formats each file as a separate code block
- Preserves file path information in headings

### `get_git_diff()`
Retrieves Git diff output with fallback strategies.

**Returns:**
- `str`: Git diff content or empty string if unavailable

**Fallback Strategy:**
1. First tries: `git diff origin/main...HEAD`
2. Falls back to: `git diff HEAD^`
3. Returns empty string if both fail

### `main()`
Primary execution function that orchestrates the review process.

**Workflow:**
1. Load environment variables and initialize Claude client
2. Determine review mode (files vs. diff)
3. Generate appropriate prompt for Claude
4. Make API call and process response
5. Save formatted output to `docs/claude_review.md`

## Output

The tool generates a Markdown file at `docs/claude_review.md` with:

- **Header**: "üß† Claude Review" title
- **Timestamp**: Last updated information
- **Review Content**: AI-generated feedback focusing on:
  - Bugs or logic issues
  - Code clarity
  - Suggested improvements
  - Style consistency

## Error Handling

- **Missing Files**: Warns about missing files but continues processing
- **Git Errors**: Gracefully handles missing Git repository or branches
- **API Errors**: Catches and reports Claude API failures
- **No Changes**: Creates stub review when no diff is available

## Configuration

### Model Selection
The default model is `claude-sonnet-4-20250514`, but you can specify a different model via the `ANTHROPIC_MODEL` environment variable.

### Output Directory
Reviews are automatically saved to the `docs/` directory (created if it doesn't exist).

## Best Practices

### üîí Security
- Store your `ANTHROPIC_API_KEY` in a `.env` file
- Add `.env` to your `.gitignore` file
- Never commit API keys to version control

### üìÅ File Organization
- Keep review outputs in the `docs/` directory
- Consider adding `docs/claude_review.md` to `.gitignore` if reviews are temporary

### üîÑ Integration
- Run as part of your CI/CD pipeline
- Use in pre-commit hooks for automatic review
- Integrate with pull request workflows

## Limitations

- **API Costs**: Each review consumes Claude API tokens
- **Token Limits**: Large diffs may exceed model token limits (currently 1500 max tokens)
- **Language Assumption**: Code blocks are formatted as Python by default
- **Git Dependency**: Diff mode requires a Git repository

## Example Output Structure

```markdown
# üß† Claude Review

_Last updated: 2024-01-15 14:30_

## Summary
The code looks generally well-structured, but I've identified several areas for improvement...

## Issues Found
- **Bug**: Potential null pointer exception on line 45
- **Style**: Inconsistent variable naming convention

## Suggestions
- Consider adding error handling for file operations
- Use more descriptive variable names
```