<!--
This documentation was auto-generated by Claude on 2025-05-31T17-02-57.
Source file: ./tools/claude_folder_review_batched.py
-->

# Code Review Script Documentation

## Overview

A Python script that performs automated code review of entire folders using Anthropic's Claude AI model. The script intelligently batches files to stay within token limits and generates comprehensive code analysis reports.

## Features

- **Multi-language Support**: Reviews Python, JavaScript, TypeScript, HTML, CSS, JSON, Go, Java, and YAML files
- **Intelligent Batching**: Automatically groups files to respect Claude's token limits (~10k tokens per batch)
- **Test File Exclusion**: Automatically filters out test files to focus on production code
- **Organized Output**: Generates timestamped Markdown reports for each batch
- **Progress Tracking**: Provides real-time feedback on processing status

## Requirements

### Dependencies

```bash
pip install anthropic python-dotenv
```

### Environment Variables

Create a `.env` file in the script directory:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, defaults to this model
```

## Usage

### Basic Usage

```bash
python code_review_script.py [folder_path]
```

### Examples

```bash
# Review default folder (../137docs)
python code_review_script.py

# Review specific folder
python code_review_script.py /path/to/your/project

# Review current directory
python code_review_script.py .
```

## Configuration

### Supported File Types

The script processes files with these extensions:

- **Python**: `.py`
- **JavaScript/TypeScript**: `.js`, `.ts`, `.tsx`, `.jsx`
- **Web**: `.html`, `.css`
- **Data**: `.json`, `.yaml`, `.yml`
- **Other Languages**: `.go`, `.java`

### File Exclusion Rules

Files are automatically excluded if they:
- Contain "test" in the filename (case-insensitive)
- Start with "test_"
- Are located in directories containing "test"

### Token Management

- **Batch Limit**: 10,000 tokens per Claude API call
- **Token Estimation**: Approximates 4 characters per token
- **Response Limit**: 2,000 tokens per Claude response

## Output

### Directory Structure

```
output/
‚îî‚îÄ‚îÄ folder_review/
    ‚îú‚îÄ‚îÄ batch_01_2025-05-31T14-30-15.md
    ‚îú‚îÄ‚îÄ batch_02_2025-05-31T14-30-45.md
    ‚îî‚îÄ‚îÄ ...
```

### Report Content

Each batch report includes:

- **Code Organization Analysis**: Structure and modularity assessment
- **Bug Pattern Detection**: Common issues and potential problems
- **Architecture Review**: Design weaknesses and strengths
- **Improvement Suggestions**: Specific recommendations for enhancement

## Error Handling

The script handles various error conditions:

- **Missing Files**: Gracefully skips unreadable files with error messages
- **API Failures**: Continues processing remaining batches if one fails
- **Invalid Folders**: Exits with clear error message if no valid files found
- **Missing API Key**: Fails fast with authentication error

## Performance

- **Processing Time**: Displayed upon completion
- **Progress Indicators**: Real-time batch processing status
- **File Discovery**: Recursive directory traversal with filtering

## Example Output

```
üîç Found 42 valid source files in: /path/to/project

üì¶ Processing batch 1 of 3...
‚úÖ Batch 1 saved to output/folder_review/batch_01_2025-05-31T14-30-15.md

üì¶ Processing batch 2 of 3...
‚úÖ Batch 2 saved to output/folder_review/batch_02_2025-05-31T14-30-45.md

üì¶ Processing batch 3 of 3...
‚úÖ Batch 3 saved to output/folder_review/batch_03_2025-05-31T14-31-12.md

üéâ All batches complete in 02:30
```

## Troubleshooting

### Common Issues

1. **No files found**: Check file extensions and exclusion rules
2. **API errors**: Verify ANTHROPIC_API_KEY in .env file
3. **Permission errors**: Ensure read access to target folder and write access to output directory

### Debug Tips

- Check console output for specific file processing errors
- Verify folder path exists and contains supported file types
- Ensure API key has sufficient credits/permissions

## Version Information

- **Version**: 1.0.0
- **Author**: Andr√© Wolke
- **Date**: 2025-05-31
- **License**: Not specified