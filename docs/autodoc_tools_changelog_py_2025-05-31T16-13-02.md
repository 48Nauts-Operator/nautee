<!--
This documentation was auto-generated by Claude on 2025-05-31T16-13-02.
Source file: ./tools/changelog.py
-->

# Git Changelog Generator

A Python utility that automatically generates formatted release notes from Git commit messages using the Anthropic Claude AI model.

## Overview

This tool extracts recent Git commit messages from a repository and uses Claude AI to transform them into well-structured, readable changelog entries organized by categories such as Features, Fixes, and Improvements.

## Prerequisites

- Python 3.6+
- Git repository (must be run from within a Git repository)
- Anthropic API key
- Required Python packages (see [Installation](#installation))

## Installation

1. Install required dependencies:
```bash
pip install anthropic python-dotenv
```

2. Create a `.env` file in your project root:
```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514  # Optional, uses default if not specified
```

## Configuration

### Environment Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `ANTHROPIC_API_KEY` | Yes | - | Your Anthropic API key for Claude access |
| `ANTHROPIC_MODEL` | No | `claude-sonnet-4-20250514` | Claude model version to use |

### Customizable Parameters

The script can be easily modified to adjust:
- Number of commits to analyze (currently set to 10)
- Git log format
- Output directory and filename format
- AI prompt template

## Usage

Run the script from within a Git repository:

```bash
python changelog_generator.py
```

## Output

The tool generates:
- **Console output**: Success/error messages with file location
- **File output**: Timestamped changelog file in `output/` directory

### Output File Format
- **Location**: `output/changelog_YYYY-MM-DDTHH-MM-SS.txt`
- **Content**: Markdown-formatted release notes with categorized changes

### Example Output Structure
```markdown
## Features
- Added new user authentication system
- Implemented dark mode toggle

## Fixes  
- Fixed memory leak in data processing
- Resolved CSS styling issues on mobile

## Improvements
- Optimized database query performance
- Enhanced error handling and logging
```

## Error Handling

The script includes robust error handling for common scenarios:

- **Git repository not found**: Displays error message and continues with placeholder text
- **Git command failures**: Gracefully handles subprocess errors
- **API failures**: Anthropic client errors are propagated with clear error messages
- **File system errors**: Directory creation and file writing are handled safely

## Technical Details

### Dependencies

```python
import os              # Environment variables and file operations
import anthropic       # Claude AI API client
from dotenv import load_dotenv  # Environment variable loading
from datetime import datetime   # Timestamp generation
import subprocess      # Git command execution
```

### Workflow

1. **Environment Setup**: Load environment variables and initialize Anthropic client
2. **Git Data Extraction**: Execute `git log` command to retrieve commit messages
3. **AI Processing**: Send commit data to Claude with structured prompt
4. **Output Generation**: Save formatted changelog with timestamp
5. **User Feedback**: Display success message with file location

### Git Command Details

The script executes:
```bash
git log --pretty=format:"* %s" -n 10
```

- `--pretty=format:"* %s"`: Formats each commit as a bullet point with subject line
- `-n 10`: Limits to the 10 most recent commits

## Customization

### Modifying Commit Count
```python
git_log = subprocess.check_output([
    "git", "log", "--pretty=format:* %s", "-n", "20"  # Change to desired number
]).decode()
```

### Custom Prompt Template
```python
prompt = f"""Your custom prompt here...
Available variables: {git_log}
"""
```

### Different Output Format
```python
out_path = f"output/release_notes_{timestamp}.md"  # Change extension/naming
```

## Limitations

- Requires active internet connection for API calls
- Limited by Anthropic API rate limits and token limits (max 1000 tokens)
- Quality depends on commit message clarity and detail
- Must be run from within a Git repository

## Security Notes

- Store API keys securely in `.env` file
- Add `.env` to `.gitignore` to prevent accidental commits
- Consider using environment-specific API keys for different deployment stages