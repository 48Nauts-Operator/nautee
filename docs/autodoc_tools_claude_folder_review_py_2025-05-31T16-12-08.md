<!--
This documentation was auto-generated by Claude on 2025-05-31T16-12-08.
Source file: ./tools/claude_folder_review.py
-->

# Code Review Tool

A Python script for automated code review using Claude AI. This tool analyzes folders containing source code files and generates comprehensive reviews focusing on code organization, architecture, and potential improvements.

## Overview

**Author:** Andr√© Wolke  
**Version:** 1.0.0  
**Date:** 2025-05-31

This script leverages Claude AI to perform intelligent code reviews on entire codebases, providing insights on code quality, architecture patterns, and suggestions for improvements.

## Features

- **Multi-file Analysis**: Reviews entire folders of source code files
- **Progress Tracking**: Real-time progress bar with ETA calculations
- **Multiple Language Support**: Supports Python, JavaScript, TypeScript, and React files
- **Markdown Output**: Generates professional review reports in Markdown format
- **Error Handling**: Robust error handling for file operations and API calls

## Prerequisites

### Required Dependencies

```bash
pip install anthropic python-dotenv
```

### Environment Setup

Create a `.env` file in the project root with the following variables:

```env
ANTHROPIC_API_KEY=your_claude_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-20250514
```

## Usage

### Basic Usage

```bash
python review_tool.py [folder_path]
```

### Examples

```bash
# Review default folder (../137docs)
python review_tool.py

# Review specific folder
python review_tool.py /path/to/your/codebase

# Review current directory
python review_tool.py .
```

## Configuration

### Supported File Types

The script currently supports the following file extensions:

- `.py` - Python files
- `.js` - JavaScript files  
- `.ts` - TypeScript files
- `.tsx` - TypeScript React files
- `.jsx` - JavaScript React files

### Extending File Type Support

To add support for additional file types, modify the `valid_exts` tuple:

```python
valid_exts = (".py", ".js", ".ts", ".tsx", ".jsx", ".html", ".css", ".json", ".go", ".java", ".yaml", ".yml")
```

### Model Configuration

The default model can be changed via environment variable:

```env
ANTHROPIC_MODEL=claude-3-opus-20240229
```

## Output

### Review Reports

Generated reviews are saved to the `output/` directory with timestamps:

```
output/folder_review_2025-05-31T14-30-45.md
```

### Console Output

The script provides real-time feedback including:

- File discovery summary
- Progress bar with ETA
- List of successfully processed files
- Total processing time
- Output file location

Example output:
```
üîç Found 15 source files in: ../137docs

[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100% ‚è± ETA: 00:00 | ‚úÖ main.py

‚úÖ Folder review saved to `output/folder_review_2025-05-31T14-30-45.md` in 02:45
```

## Review Focus Areas

The Claude AI analysis focuses on:

- **Code Organization**: File structure and module organization
- **Bug Patterns**: Common programming errors and potential issues
- **Architecture Weaknesses**: Design pattern problems and structural issues
- **Modularization**: Suggestions for breaking down complex code
- **Code Clarity**: Readability and maintainability improvements

## Error Handling

The script includes comprehensive error handling for:

- **Missing API Keys**: Validates Anthropic API key availability
- **File Access Errors**: Handles unreadable files gracefully
- **API Failures**: Catches and reports Claude API errors
- **Empty Directories**: Exits gracefully when no valid files are found

## Limitations

- **Token Limits**: Claude API has token limits that may affect very large codebases
- **API Rate Limits**: Subject to Anthropic's rate limiting policies
- **File Size**: Very large individual files may exceed context windows

## Technical Details

### Dependencies

| Package | Purpose |
|---------|---------|
| `anthropic` | Claude AI API client |
| `python-dotenv` | Environment variable management |
| `os`, `sys` | File system and system operations |
| `datetime`, `time` | Timestamp generation and progress tracking |

### File Processing Flow

1. **Discovery**: Recursively scan target directory for valid files
2. **Reading**: Load file contents with error handling
3. **Aggregation**: Combine all files into a single prompt
4. **Analysis**: Send to Claude AI for review
5. **Output**: Save formatted review to timestamped file

### Progress Calculation

The progress bar uses a custom rendering function that calculates:
- Completion percentage based on processed files
- Average processing time per file
- Estimated time remaining (ETA)

## Troubleshooting

### Common Issues

**No files found error:**
```bash
‚ùå No valid files found in [folder]
```
- Verify the folder path exists
- Check that folder contains files with supported extensions

**API key error:**
- Ensure `ANTHROPIC_API_KEY` is set in `.env` file
- Verify API key is valid and has sufficient credits

**File reading errors:**
- Check file permissions
- Ensure files are not corrupted or binary

### Debug Tips

- Run with verbose output by adding print statements
- Check the `output/` directory for partial results
- Verify `.env` file is in the correct location

## Contributing

To extend or modify this tool:

1. Add new file extensions to `valid_exts`
2. Modify the Claude prompt for different review focuses
3. Adjust progress bar styling in `render_progress()`
4. Customize output formatting in the file writing section